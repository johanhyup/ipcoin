"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[83912],{583912:(e,t,i)=>{i.d(t,{linking:()=>p});var s=i(290484),n=i(650151),r=i(375397),a=(i(764829),i(378975)),o=i(975179),l=i(338619),u=i(62802),h=i(588948),d=i(776734),c=i(503679),y=i(149109),_=i(912445);const b=(0,l.getLogger)("Linking");class S{constructor(e,t,i){this.watchedSymbol=new r.WatchedValue,this.seriesShortSymbol=new r.WatchedValue,this.proSymbol=new r.WatchedValue,this.ensuredProSymbol=new r.WatchedValue,this.watchedInterval=new r.WatchedValue,this.watchedIntraday=new r.WatchedValue,this.watchedSeconds=new r.WatchedValue,this.watchedTicks=new r.WatchedValue,this.watchedDataFrequencyResolution=new r.WatchedValue,this.watchedRange=new r.WatchedValue,this.watchedSupportedResolutions=new r.WatchedValue,this.watchedSupportedChartStyles=new r.WatchedValue,this.symbolNamesList=new r.WatchedValue,this._chartWidgetCollection=null,this._chartWidgetBindingState=0,this._activeChartWidget=null,this._linkingGroupCharts=null,this._boundChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._setGroupSymbolCancellationToken={cancelled:!1},this._muted=!1,this.updateBoundChartWidget=()=>{const e=this._chartToBind();e!==this._boundChartWidget&&(null===e?this.unbindFromChartWidget():this.bindToChartWidget(e))},this._updateAllGroupChartWidgets=()=>{this._destroySymbolIntervalPropertySubscriptions?.();const e=(0,n.ensureNotNull)(this._linkingGroupCharts).value(),t=[],i=[];for(const s of e){const e=s.symbolWV().spawn(),n=s.resolutionWV().spawn();e.subscribe(this._updateSymbolByProperty.bind(this,s)),n.subscribe(this._updateIntervalByProperty.bind(this,s)),t.push(e),i.push(n)}this._destroySymbolIntervalPropertySubscriptions=()=>{t.forEach((e=>e.destroy())),i.forEach((e=>e.destroy())),this._destroySymbolIntervalPropertySubscriptions=void 0};const s=this.watchedSymbol.value();e.length>1&&this._needApplySymbol(s)&&!this._muted&&this._setGroupSymbol(s);const r=this.watchedInterval.value();e.length>1&&this._needApplyInterval(r)&&!this._muted&&this._setGroupInterval(r),this.updateBoundChartWidget()},this._groupIndex=e;const s=(e,t)=>{e.subscribe((e=>{i()===this&&t.setValue(e)}),{callWithLast:!0})};s(this.watchedSymbol,t.watchedSymbol),s(this.seriesShortSymbol,t.seriesShortSymbol),s(this.proSymbol,t.proSymbol),s(this.ensuredProSymbol,t.ensuredProSymbol),s(this.watchedInterval,t.watchedInterval),s(this.watchedIntraday,t.watchedIntraday),s(this.watchedSeconds,t.watchedSeconds),s(this.watchedTicks,t.watchedTicks),s(this.watchedDataFrequencyResolution,t.watchedDataFrequencyResolution),s(this.watchedRange,t.watchedRange),s(this.watchedSupportedResolutions,t.watchedSupportedResolutions),s(this.watchedSupportedChartStyles,t.watchedSupportedChartStyles),s(this.symbolNamesList,t.symbolNamesList),this.watchedSymbol.subscribe((e=>{
this._boundChartWidget&&this._boundChartWidget.hasModel()&&this._mainSeries().symbolSameAsCurrent(e)||this.proSymbol.setValue(e)}),{callWithLast:!0})}mute(e){this._muted=e}bindToChartWidgetCollection(e){this.unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._activeChartWidget=e.activeChartWidget.spawn(),this._activeChartWidget.subscribe(this.updateBoundChartWidget),this._linkingGroupCharts=e.linkingGroupsCharts(this._groupIndex).spawn(),this._linkingGroupCharts.subscribe(this._updateAllGroupChartWidgets),this.updateBoundChartWidget(),this._updateAllGroupChartWidgets()}unbindFromChartWidgetCollection(){this.unbindFromChartWidget(),this._chartWidgetCollection=null,this._activeChartWidget?.destroy(),this._activeChartWidget=null,this._linkingGroupCharts?.destroy(),this._linkingGroupCharts=null,this._destroySymbolIntervalPropertySubscriptions?.()}bindToChartWidget(e){if(this.unbindFromChartWidget(),this._boundChartWidget=e,e.hasModel())return void this._onChartModelCreated(e.model());e.modelCreated().subscribe(this,this._onChartModelCreated,!0),this._chartWidgetBindingState=1;const t=e.mainSeriesProperties().childs();this.watchedSymbol.setValue(t.symbol.value()),this.watchedInterval.setValue(t.interval.value()),this._boundChartWidget.linkingGroupIndex().subscribe(this.updateBoundChartWidget)}unbindFromChartWidget(){const e=this._boundChartWidget;if(null!==e){switch(this._chartWidgetBindingState){case 1:e.modelCreated().unsubscribeAll(this);break;case 2:this.watchedSymbol.unsubscribe(this._watchedSymbolListenerBound);const t=this._mainSeries().dataEvents();t.symbolResolved().unsubscribeAll(this),t.symbolError().unsubscribeAll(this),this._mainSeries().onIntervalChanged().unsubscribeAll(this),this.watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this.watchedSymbol.writeLock}e.linkingGroupIndex().unsubscribe(this.updateBoundChartWidget),this._boundChartWidget=null,this._chartWidgetBindingState=0}}boundChartWidget(){return this._boundChartWidget}_mainSeries(){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");return this._boundChartWidget.model().mainSeries()}_watchedSymbolListener(e){this._needApplySymbol(e)&&!this._muted&&(this._setGroupSymbol(e),this._sendSnowplowAnalytics())}_updateSymbolByProperty(e,t){const i=this._symbolLock();i&&this._needApplySymbol(t)&&!this._muted&&this._setGroupSymbol(t),(i||e===this._boundChartWidget)&&this.watchedSymbol.setValue(t)}_watchedIntervalListener(e){const t=a.Interval.normalize(e);t&&this._needApplyInterval(t)&&!this._muted&&this._setGroupInterval(t)}_updateIntervalByProperty(e,t){const i=this._intervalLock(),s=a.Interval.normalize(t);i&&s&&this._needApplyInterval(s)&&!this._muted&&this._setGroupInterval(s),(i||e===this._boundChartWidget)&&this.watchedInterval.setValue(s??t)}_sendSnowplowAnalytics(){if(window.user.do_not_track)return;const e=this._mainSeries(),t=()=>{e.dataEvents().symbolResolved().unsubscribe(this,i)},i=i=>{(0,d.getTracker)().then((e=>{if(null===e)return;const t=(0,
n.ensureNotNull)(this._chartWidgetCollection),s=t.layout.value(),r=t.metaInfo.uid.value()||"";e.trackChartSymbols(i.pro_name,i.type,s,r,window.user.declared_status===c.UserStatus.Pro)})),e.dataEvents().symbolError().unsubscribe(this,t)};e.dataEvents().symbolResolved().subscribe(this,i,!0),e.dataEvents().symbolError().subscribe(this,t,!0)}_updateSeriesSymbolInfo(){this.seriesShortSymbol.setValue((0,n.ensureNotNull)(this._boundChartWidget).getSymbol(!0));const e=this._mainSeries().symbolInfo();if(e){const t=e.pro_name||!1;this.proSymbol.setValue(t||this.watchedSymbol.value()),this.ensuredProSymbol.setValue(this.proSymbol.value()),e.aliases&&this.symbolNamesList.setValue(e.aliases);let i=(0,y.allChartStyles)();((0,o.isCloseBasedSymbol)(e)||this._mainSeries().intervalObj().is1Tick())&&(i=i.filter((e=>(0,o.isSingleValueBasedStyle)(e)))),this.watchedSupportedChartStyles.setValue(i),this.watchedIntraday.setValue(!!e.has_intraday),this.watchedSeconds.setValue(!!e.has_seconds),this.watchedTicks.setValue(!(0,o.isCloseBasedSymbol)(e)&&!!e["is-tickbars-available"]),this.watchedRange.setValue(!(0,o.isCloseBasedSymbol)(e));const s=e.data_frequency?e.data_frequency:void 0;this.watchedDataFrequencyResolution.setValue(s)}else this.watchedIntraday.setValue(!1),this.watchedSeconds.setValue(!1),this.watchedTicks.setValue(!1),this.watchedRange.setValue(!1),this._mainSeries().isFailed()&&this.ensuredProSymbol.setValue(this.proSymbol.value())}_onChartModelCreated(e){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");this._chartWidgetBindingState=2,this.watchedSymbol.setValue(this._boundChartWidget.symbolWV().value()),this.watchedSymbol.subscribe(this._watchedSymbolListenerBound);const t=e.mainSeries().dataEvents();t.symbolResolved().subscribe(this,this._updateSeriesSymbolInfo),t.symbolError().subscribe(this,this._updateSeriesSymbolInfo),e.mainSeries().onIntervalChanged().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),this.watchedInterval.setValue(this._boundChartWidget.resolutionWV().value()),this.watchedInterval.subscribe(this._watchedIntervalListenerBound),this._boundChartWidget.readOnly()&&(this.watchedSymbol.writeLock=!0)}_chartToBind(){const e=this._chartWidgetCollection;return null===e?null:e.activeChartWidget.value().linkingGroupIndex().value()===this._groupIndex?e.activeChartWidget.value():null!==this._boundChartWidget&&this._boundChartWidget.linkingGroupIndex().value()===this._groupIndex?this._boundChartWidget:e.getAll().find((e=>e.linkingGroupIndex().value()===this._groupIndex))??null}_symbolLock(){return!!this._chartWidgetCollection?.lock.symbol.value()}_intervalLock(){return!!this._chartWidgetCollection?.lock.interval.value()}_chartsForLock(e){return(0===e?this._symbolLock():this._intervalLock())?(0,n.ensureNotNull)(this._linkingGroupCharts).value():this._boundChartWidget?[this._boundChartWidget]:[]}_setGroupSymbol(e){this.mute(!0),this._setGroupSymbolCancellationToken.cancelled=!0;const t=this._setGroupSymbolCancellationToken={cancelled:!1};(0,
n.ensureNotNull)(this._chartWidgetCollection).setSymbol(e,this._groupIndex,(0,n.ensureNotNull)(this._boundChartWidget)).finally((()=>{if(this._boundChartWidget&&!t.cancelled){const t=this._boundChartWidget.model().mainSeries();t.symbolSameAsCurrent(e)||(this.watchedSymbol.setValue(t.symbol()),this.proSymbol.setValue(t.proSymbol()))}})),this.mute(!1)}_needApplySymbol(e){const t=this._chartsForLock(0),i=t.find((t=>t.hasModel()&&t.model().mainSeries().symbolInfo()&&t.model().mainSeries().symbolSameAsResolved(e)));if(i){const e=i.model().mainSeries();if(t.every((t=>e.symbolSameAsResolved(t.symbolWV().value()))))return!1}return t.some((t=>t.symbolWV().value()!==e))}_setGroupInterval(e){this.mute(!0),(0,n.ensureNotNull)(this._chartWidgetCollection).setResolution(e,this._groupIndex).finally((()=>{if(this._boundChartWidget){const t=this._boundChartWidget.resolutionWV().value();a.Interval.isEqual(t,e)||this.watchedInterval.setValue(t)}})),this.mute(!1)}_needApplyInterval(e){return this._chartsForLock(1).some((t=>!a.Interval.isEqual(t.resolutionWV().value(),e)))}}const p=new class{constructor(){this._watchedSymbol=new r.WatchedValue,this._seriesShortSymbol=new r.WatchedValue,this._proSymbol=new r.WatchedValue,this._ensuredProSymbol=new r.WatchedValue,this._watchedInterval=new r.WatchedValue,this._watchedIntraday=new r.WatchedValue,this._watchedSeconds=new r.WatchedValue,this._watchedTicks=new r.WatchedValue,this._watchedDataFrequencyResolution=new r.WatchedValue,this._watchedRange=new r.WatchedValue,this._watchedSupportedResolutions=new r.WatchedValue,this._watchedSupportedChartStyles=new r.WatchedValue([]),this._symbolNamesList=new r.WatchedValue,this._chartWidgetCollection=null,this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._searchChartsLoadDebounced=null,this._selfEmit=!1,this._preventFeedBySymbol=!1,this._feedBySymbolDebounceCounter=0,this._linkingGroups=new Map,this._activeLinkingGroup=new r.WatchedValue,this._activeLinkingGroupIndex=null,this._updateLinkingGroups=()=>{(0,n.ensureNotNull)(this._chartWidgetCollection).allLinkingGroups().value().forEach((e=>this._linkingGroup(e))),this._linkingGroups.forEach((e=>e.updateBoundChartWidget()))},this._activeLinkingGroup.setValue(this._linkingGroup(null));const e=(e,t)=>{e.subscribe((e=>t().setValue(e)),{callWithLast:!0})};e(this._watchedSymbol,(()=>this._activeLinkingGroup.value().watchedSymbol)),e(this._seriesShortSymbol,(()=>this._activeLinkingGroup.value().seriesShortSymbol)),e(this._proSymbol,(()=>this._activeLinkingGroup.value().proSymbol)),e(this._ensuredProSymbol,(()=>this._activeLinkingGroup.value().ensuredProSymbol)),e(this._watchedInterval,(()=>this._activeLinkingGroup.value().watchedInterval)),e(this._watchedIntraday,(()=>this._activeLinkingGroup.value().watchedIntraday)),e(this._watchedSeconds,(()=>this._activeLinkingGroup.value().watchedSeconds)),e(this._watchedTicks,(()=>this._activeLinkingGroup.value().watchedTicks)),e(this._watchedDataFrequencyResolution,(()=>this._activeLinkingGroup.value().watchedDataFrequencyResolution)),
e(this._watchedRange,(()=>this._activeLinkingGroup.value().watchedRange)),e(this._watchedSupportedResolutions,(()=>this._activeLinkingGroup.value().watchedSupportedResolutions)),e(this._watchedSupportedChartStyles,(()=>this._activeLinkingGroup.value().watchedSupportedChartStyles)),e(this._symbolNamesList,(()=>this._activeLinkingGroup.value().symbolNamesList));const t=e=>{this._watchedSymbol.setValue(e.watchedSymbol.value()),this._seriesShortSymbol.setValue(e.seriesShortSymbol.value()),this._proSymbol.setValue(e.proSymbol.value()),this._ensuredProSymbol.setValue(e.ensuredProSymbol.value()),this._watchedInterval.setValue(e.watchedInterval.value()),this._watchedIntraday.setValue(e.watchedIntraday.value()),this._watchedSeconds.setValue(e.watchedSeconds.value()),this._watchedTicks.setValue(e.watchedTicks.value()),this._watchedDataFrequencyResolution.setValue(e.watchedDataFrequencyResolution.value()),this._watchedRange.setValue(e.watchedRange.value()),this._watchedSupportedResolutions.setValue(e.watchedSupportedResolutions.value()),this._watchedSupportedChartStyles.setValue(e.watchedSupportedChartStyles.value()),this._symbolNamesList.setValue(e.symbolNamesList.value())};this._activeLinkingGroup.subscribe(t),t(this._activeLinkingGroup.value()),(0,_.setMuteLinkingGroup)(((e,t)=>{this._linkingGroup(e).mute(t)}))}get symbol(){return this._watchedSymbol}get proSymbol(){return this._proSymbol.readonly()}get ensuredProSymbol(){return this._ensuredProSymbol.readonly()}get symbolNamesList(){return this._symbolNamesList.readonly()}get seriesShortSymbol(){return this._seriesShortSymbol.readonly()}get interval(){return this._watchedInterval}get intraday(){return this._watchedIntraday.readonly()}get seconds(){return this._watchedSeconds.readonly()}get ticks(){return this._watchedTicks.readonly()}get range(){return this._watchedRange.readonly()}get supportedResolutions(){return this._watchedSupportedResolutions.readonly()}get supportedChartStyles(){return this._watchedSupportedChartStyles.readonly()}get preventFeedBySymbol(){return this._preventFeedBySymbol}get dataFrequencyResolution(){return this._watchedDataFrequencyResolution.readonly()}activeLinkingGroup(){return this._activeLinkingGroup.readonly()}getChartWidget(){return this.activeLinkingGroup().value().boundChartWidget()}bindToChartWidgetCollection(e){this._chartWidgetCollection?.onAboutToBeDestroyed.unsubscribeAll(this),this._unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._chartWidgetCollection.onAboutToBeDestroyed.subscribe(this,this._unbindFromChartWidgetCollection),this._chartWidgetCollection.allLinkingGroups().subscribe(this._updateLinkingGroups),this._updateLinkingGroups(),this._activeLinkingGroupIndex=e.activeLinkingGroup().spawn(),this._activeLinkingGroupIndex.subscribe((e=>{this._activeLinkingGroup.setValue(this._linkingGroup(e))}),{callWithLast:!0}),this._linkingGroups.forEach((t=>t.bindToChartWidgetCollection(e)))}bindToSearchCharts(e){this.unbindFromSearchCharts(),this._searchCharts=e,e.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),
e.loadingSymbol.subscribe((e=>{!1===e&&(this._feedBySymbolDebounceCounter=0)})),this._watchedSymbol.subscribe(this._onSymbolLinkBound)}unbindFromSearchCharts(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)}setPreventFeedBySymbol(e){this._preventFeedBySymbol=e}setSymbolAndLogInitiator(e,t,i){(this.symbol.value()!==e||i)&&(b.logInfo(`Change linking symbol to ${e}, initiator: ${t}`),this.symbol.setValue(e,i))}_onSearchBySymbol(e){if(!e.resolved_symbol)throw new Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(e.resolved_symbol),this._selfEmit=!1}_onSymbolLink(e){if(!this._selfEmit){if(!this._searchCharts){const e="No search charts defined";throw b.logError(e),new Error(e)}this._preventFeedBySymbol||this._loadSearchCharts(e)}}_loadSearchCharts(e){if(!this._searchCharts){const e="No search charts defined";throw b.logError(e),new Error(e)}if(this._searchChartsLoadDebounced)return void(this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced(e)));const t=e=>this._searchCharts?(!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,s.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchChartsLoadDebounced=null,this._searchCharts.feedBySymbol.call(this._searchCharts,e)):()=>{};!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,s.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchCharts.feedBySymbol(e)}_linkingGroup(e){let t=this._linkingGroups.get(e);if(void 0===t){const i={watchedSymbol:this._watchedSymbol,seriesShortSymbol:this._seriesShortSymbol,proSymbol:this._proSymbol,ensuredProSymbol:this._ensuredProSymbol,watchedInterval:this._watchedInterval,watchedIntraday:this._watchedIntraday,watchedSeconds:this._watchedSeconds,watchedTicks:this._watchedTicks,watchedDataFrequencyResolution:this._watchedDataFrequencyResolution,watchedRange:this._watchedRange,watchedSupportedResolutions:this._watchedSupportedResolutions,watchedSupportedChartStyles:this._watchedSupportedChartStyles,symbolNamesList:this._symbolNamesList};t=new S(e,i,(()=>this._activeLinkingGroup.value())),this._linkingGroups.set(e,t),this._chartWidgetCollection&&t.bindToChartWidgetCollection(this._chartWidgetCollection)}return t}_unbindFromChartWidgetCollection(){null!==this._chartWidgetCollection&&(this._activeLinkingGroupIndex?.destroy(),this._activeLinkingGroupIndex=null,this._linkingGroups.forEach((e=>e.unbindFromChartWidgetCollection())),this._chartWidgetCollection.allLinkingGroups().unsubscribe(this._updateLinkingGroups),this._chartWidgetCollection=null)}};{const e=(0,h.getFreshInitData)().symbolInfo,t=e?e.pro_symbol:u.getValue("editchart.model.symbol",window.DEFAULT_SYMBOL);p.setSymbolAndLogInitiator(t,"initial data")}
window.TradingViewApi||(window.TradingViewApi={linking:p})},912445:(e,t,i)=>{let s;function n(e,t){s?.(e,t)}function r(e){s=e}i.d(t,{muteLinkingGroup:()=>n,setMuteLinkingGroup:()=>r})},643322:(e,t,i)=>{i.d(t,{accumulate:()=>o,combine:()=>a,combineWithFilteredUpdate:()=>r});var s=i(375397);function n(e,t,...i){let n=null;const r=(...t)=>e(...t.map((e=>e.value())),n?.value()),a=n=new s.WatchedValue(r(...i)),o=()=>{t(...i.map((e=>e.value())))&&a.setValue(r(...i))},l=i.map((e=>e.spawn()));for(const e of l)e.subscribe(o);return a.readonly().spawn((()=>{l.forEach((e=>e.destroy())),i.forEach((e=>e.release()))}))}function r(e,t,...i){return n(e,t,...i)}function a(e,...t){return n(e,(()=>!0),...t)}function o(e,t,i){const n=(t,i)=>{const s=t.map((e=>e.value()));return e(s,i)},r=new s.WatchedValue(n(t.value(),i?.value())),a=t.spawn();let o=[];const l=i?.spawn()??new s.WatchedValue(void 0),u=()=>{r.setValue(n(o,l.value()))},h=e=>{o.forEach((e=>e.destroy())),o=e.map((e=>e.spawn())),o.forEach((e=>{e.subscribe(u)})),u()};h(a.value()),a.subscribe(h),l.subscribe(u);return r.readonly().spawn((()=>{o.forEach((e=>e.destroy())),a.destroy(),l.destroy(),t.release()}))}},788387:(e,t,i)=>{function s(e,t){return!!t?.includes("cfd")&&["commodity","futures","index","stock","fund"].includes(e)}function n(e,t){return"stock"===e&&void 0!==t&&!t.includes("cfd")}i.d(t,{isCFDSymbol:()=>s,isStockSymbol:()=>n})},149109:(e,t,i)=>{i.d(t,{allChartStyles:()=>r});var s=i(764829);const n=(0,i(638456).onWidget)();function r(){return function(){const e=[0,1,9,13,2,14,15,3,16,10];return e.push(12),n||e.push(17),n||e.push(18),n||e.push(20),n||e.push(19),e}().concat(function(){const e=[8];return s.enabled("japanese_chart_styles")&&(e.push(4,7,5,6),e.push(11)),e}())}},378975:(e,t,i)=>{i.d(t,{Interval:()=>h,ResolutionKind:()=>r,SpecialResolutionKind:()=>a,isHour:()=>c});const s=/^(\d*)([TSHDWMR])$/,n=/^(\d+)$/;var r,a;!function(e){e.Ticks="ticks",e.Seconds="seconds",e.Minutes="minutes",e.Days="days",e.Weeks="weeks",e.Months="months",e.Range="range",e.Invalid="invalid"}(r||(r={})),function(e){e.Hours="hours"}(a||(a={}));const o={};o[r.Ticks]=1e3,o[r.Seconds]=1e3,o[r.Minutes]=60*o[r.Seconds],o[r.Days]=1440*o[r.Minutes],o[r.Weeks]=7*o[r.Days];const l={T:r.Ticks,S:r.Seconds,D:r.Days,W:r.Weeks,M:r.Months,R:r.Range},u=new Set([r.Ticks,r.Seconds,r.Minutes]);class h{constructor(e,t){this._kind=r.Invalid,this._multiplier=0,e!==r.Invalid&&t>0&&(this._kind=e,this._multiplier=t)}kind(){return this._kind}guiKind(){return this.isMinuteHours()?a.Hours:this._kind}multiplier(){return this._multiplier}isValid(){return this.kind()!==r.Invalid&&this.multiplier()>0}isDWM(){return this.isValid()&&!this.isRange()&&!this.isIntraday()&&!this.isTicks()}isIntraday(){const e=u.has(this.kind());return this.isValid()&&e}isSeconds(){return this.kind()===r.Seconds}isMinutes(){return this.kind()===r.Minutes}isMinuteHours(){return this.kind()===r.Minutes&&c(this.multiplier())}isDays(){return this.kind()===r.Days}isWeeks(){return this.kind()===r.Weeks}isMonths(){return this.kind()===r.Months}
isRange(){return this.kind()===r.Range}isTicks(){return this.kind()===r.Ticks}is1Tick(){return this.isTicks()&&1===this.multiplier()}isTimeBased(){return!this.isRange()}letter(){return this.isValid()&&this.kind()!==r.Minutes?this.kind()[0].toUpperCase():""}value(){return this.isValid()?this.kind()===r.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""}isEqualTo(e){if(!(e instanceof h))throw new Error("Argument is not an Interval");return!(!this.isValid()||!e.isValid())&&(this.kind()===e.kind()&&this.multiplier()===e.multiplier())}inMilliseconds(e=Date.now()){if(!this.isValid()||this.isRange())return NaN;if(this.isMonths()){const t=new Date(e);t.setUTCMonth(t.getUTCMonth()+(this.multiplier()||1));return+t-e}const t=this.multiplier();return o[this.kind()]*t}static isEqual(e,t){return e===t||h.parse(e).isEqualTo(h.parse(t))}static parseExt(e){e=(e+"").toUpperCase().split(",")[0];let t=s.exec(e);return null!==t?"H"===t[2]?{interval:new h(r.Minutes,60*d(t[1])),guiResolutionKind:a.Hours}:{interval:new h(l[t[2]],d(t[1])),guiResolutionKind:l[t[2]]}:(t=n.exec(e),null!==t?{interval:new h(r.Minutes,d(t[1])),guiResolutionKind:r.Minutes}:{interval:new h(r.Invalid,0),guiResolutionKind:r.Invalid})}static parse(e){return h.parseExt(e).interval}static kind(e){return h.parse(e).kind()}static isValid(e){return h.parse(e).isValid()}static isDWM(e){return h.parse(e).isDWM()}static isIntraday(e){return h.parse(e).isIntraday()}static isSeconds(e){return h.parse(e).isSeconds()}static isMinutes(e){return h.parse(e).isMinutes()}static isMinuteHours(e){return h.parse(e).isMinuteHours()}static isDays(e){return h.parse(e).isDays()}static isWeeks(e){return h.parse(e).isWeeks()}static isMonths(e){return h.parse(e).isMonths()}static isRange(e){return h.parse(e).isRange()}static isTicks(e){return h.parse(e).isTicks()}static isTimeBased(e){return h.parse(e).isTimeBased()}static normalize(e){const t=h.parse(e);return t.isValid()?t.value():null}}function d(e){return 0===e.length?1:parseInt(e,10)}function c(e){return e>=60&&!(e%60)}},848292:(e,t,i)=>{i.d(t,{combineProperty:()=>n});var s=i(998418);function n(e,...t){const i=()=>e(...t.map((e=>e.value()))),n=(0,s.createPrimitiveProperty)(i()),r=()=>n.setValue(i()),a={};for(const e of t)e.subscribe(a,r);return n.destroy=()=>{t.forEach((e=>e.unsubscribeAll(a))),t.forEach((e=>e.release()))},n}},331613:(e,t,i)=>{i(998418)},272933:(e,t,i)=>{i.d(t,{combineProperty:()=>a.combineProperty,createWVFromGetterAndSubscription:()=>s.createWVFromGetterAndSubscription,createWVFromGetterAndSubscriptions:()=>n.createWVFromGetterAndSubscriptions,createWVFromProperty:()=>r.createWVFromProperty});var s=i(523965),n=i(203918),r=i(874145),a=(i(331613),i(848292))},523965:(e,t,i)=>{i.d(t,{createWVFromGetterAndSubscription:()=>n});var s=i(375397);function n(e,t){const i=new s.WatchedValue(e()),n={};t.subscribe(n,(()=>{i.setValue(e())}));return i.readonly().spawn((()=>t.unsubscribeAll(n)))}},203918:(e,t,i)=>{i.d(t,{createWVFromGetterAndSubscriptions:()=>n});var s=i(375397);function n(e,t){
const i=new s.WatchedValue(e()),n={};t.forEach((t=>t.subscribe(n,(()=>{i.setValue(e())}))));return i.readonly().spawn((()=>t.forEach((e=>e.unsubscribeAll(n)))))}},874145:(e,t,i)=>{i.d(t,{createWVFromProperty:()=>n});var s=i(523965);function n(e){return(0,s.createWVFromGetterAndSubscription)((()=>e.value()),e)}},509724:(e,t,i)=>{function s(e){if(!e)return"";if(["NYSE ARCA & MKT","AMEX"].includes(e))return"NYSE Arca";if(["Cboe BZX"].includes(e))return"Cboe One";if(["FTSEST"].includes(e))return"FTSE ST";const t=/^(CME|COMEX|CBOT|NYMEX)_MINI$/.exec(e);return null!==t?t[1]:e}i.d(t,{redefineExchangeName:()=>s})},540519:(e,t,i)=>{i.r(t),i.d(t,{SERIES_STATUS_TEXT:()=>v,STATUS_CALCULATION_ERROR:()=>S,STATUS_DELAYED:()=>d,STATUS_DELAYED_STREAMING:()=>c,STATUS_EOD:()=>u,STATUS_ERROR:()=>b,STATUS_INVALID_SYMBOL:()=>o,STATUS_LOADING:()=>r,STATUS_NO_BARS:()=>y,STATUS_OFFLINE:()=>s,STATUS_PULSE:()=>h,STATUS_READY:()=>a,STATUS_REPLAY:()=>_,STATUS_RESOLVING:()=>n,STATUS_SNAPSHOT:()=>l,STATUS_UNSUPPORTED_RESOLUTION:()=>p,STYLE_AREA:()=>k,STYLE_BARS:()=>w,STYLE_BASELINE:()=>R,STYLE_CANDLES:()=>C,STYLE_COLUMNS:()=>B,STYLE_HEIKEN_ASHI:()=>I,STYLE_HILO:()=>G,STYLE_HLC_AREA:()=>F,STYLE_HOLLOW_CANDLES:()=>E,STYLE_KAGI:()=>L,STYLE_LINE:()=>f,STYLE_LINE_WITH_MARKERS:()=>M,STYLE_PB:()=>T,STYLE_PNF:()=>V,STYLE_RANGE:()=>A,STYLE_RENKO:()=>W,STYLE_SHORT_NAMES:()=>N,STYLE_STEPLINE:()=>D,SYMBOL_STRING_DATA:()=>P,chartStylesWithAttachedStudies:()=>U,seriesLoadingStatuses:()=>g,seriesReadyStatuses:()=>m});const s=0,n=1,r=2,a=3,o=4,l=5,u=6,h=7,d=8,c=9,y=10,_=11,b=12,S=13,p=14,m=new Set([3,6,7,8,9,11]),g=new Set([1,2]),v={[s]:"connecting",[n]:"loading",[r]:"loading",[a]:"realtime",[o]:"invalid",[l]:"snapshot",[u]:"endofday",[h]:"endofday",[d]:"delayed",[c]:"delayed_streaming",[y]:"forbidden",[_]:"replay",[b]:"error",[S]:"calculation_error",[p]:"unsupported_resolution"},w=0,C=1,f=2,k=3,W=4,L=5,V=6,T=7,I=8,E=9,R=10,A=11,G=12,B=13,M=14,D=15,F=16,N={0:"bar",1:"candle",9:"hollowCandle",2:"line",14:"lineWithMarkers",15:"stepline",3:"area",16:"hlcArea",4:"renko",7:"pb",5:"kagi",6:"pnf",8:"ha",10:"baseline",11:"range",12:"hilo",13:"column",17:"volFootprint",18:"tpo",19:"volCandles",20:"svp"},P={4:{type:"BarSetRenko@tv-prostudies",basicStudyVersion:73},7:{type:"BarSetPriceBreak@tv-prostudies",basicStudyVersion:34},5:{type:"BarSetKagi@tv-prostudies",basicStudyVersion:73},6:{type:"BarSetPnF@tv-prostudies",basicStudyVersion:73},8:{type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},11:{type:"BarSetRange@tv-basicstudies",basicStudyVersion:72},17:{type:"Footprint@tv-volumebyprice",basicStudyVersion:104},18:{type:"TPOPeriodic@tv-volumebyprice",basicStudyVersion:104},20:{type:"VbPSessions@tv-volumebyprice",basicStudyVersion:126}},U=[17,18,20]},975179:(e,t,i)=>{i.r(t),i.d(t,{actualSymbol:()=>me,chartStyleStudyId:()=>Y,createSeriesFormatter:()=>j,displayedSymbolExchange:()=>pe,displayedSymbolName:()=>Se,extractLineToolSymbolFromSymbolInfo:()=>de,extractSymbolNameFromSymbolInfo:()=>he,getChartStyleByResolution:()=>O,getDefaultStyle:()=>x,
getLastUsedRawDataStyle:()=>U,getLastUsedSingleValueBasedStyle:()=>P,getLastUsedStyle:()=>N,getSeriesDisplayErrorWV:()=>Ie,getSeriesPriceFormattingState:()=>z,getSourceForEconomySymbol:()=>_e,getSymbolDelaySeconds:()=>Ee,getSymbolExchange:()=>Le,getTranslatedChartStyleName:()=>L,hasProjection:()=>K,hasVolume:()=>ke,isCloseBasedSymbol:()=>we,isConvertedToOtherCurrency:()=>ee,isConvertedToOtherUnit:()=>ne,isEconomicSymbol:()=>We,isFutureContinuousSymbolWithBackajustment:()=>Ve,isFuturesContractSymbol:()=>Te,isMeasureUnitSymbol:()=>Ce,isPriceSourceStyle:()=>$,isRangeBasedStyle:()=>T,isRangeStyle:()=>E,isRawDataStyle:()=>M,isRegularSessionId:()=>ve,isRequiringRestartSeriesStyles:()=>V,isSingleValueBasedStyle:()=>B,isStyleSupportedForReplay:()=>A,isTimeBasedStyle:()=>R,isValidStyle:()=>G,measureUnitId:()=>fe,preparePriceAxisProperties:()=>q,proSymbol:()=>ge,setLastUsedRawDataStyle:()=>F,setLastUsedStyle:()=>D,styleChangeRequiresRestart:()=>I,symbolBaseCurrency:()=>Q,symbolCurrency:()=>Z,symbolCurrencyConvertible:()=>X,symbolCurrentContract:()=>ae,symbolHasEconomicEvents:()=>ue,symbolHasPreOrPostMarket:()=>oe,symbolHasSeveralSessions:()=>le,symbolOriginalCurrency:()=>J,symbolOriginalUnit:()=>se,symbolTitle:()=>be,symbolTitleSeparator:()=>ye,symbolToSaveInState:()=>ce,symbolUnit:()=>ie,symbolUnitConvertible:()=>te,symbolUnitConvertibleGroupsIfExist:()=>re});var s=i(444372),n=i(62802),r=i(638456),a=i(519073),o=i(540519),l=i(378975),u=i(735211),h=i(764829),d=i(957365),c=i(142567),y=i(788387),_=i(643322),b=i(272933),S=i(509724);const p=h.enabled("pay_attention_to_ticker_not_symbol"),m=h.enabled("uppercase_instrument_names"),g=h.enabled("charting_library_single_symbol_request"),v=h.enabled("use_ticker_on_symbol_info_update"),w=h.enabled("hide_object_tree_and_price_scale_exchange_label"),C=[4,5,6,7,8],f=[4,5,6,7,11],k=[0,1,9,19,2,14,15,3,16,10,8,12,13,18,17,20],W=[2,14,15,10,3,13,18];function L(e){return{0:s.t(null,void 0,i(527377)),1:s.t(null,void 0,i(745054)),2:s.t(null,void 0,i(903554)),14:s.t(null,void 0,i(409394)),15:s.t(null,void 0,i(869217)),3:s.t(null,void 0,i(534456)),16:s.t(null,void 0,i(99906)),9:s.t(null,void 0,i(913459)),10:s.t(null,void 0,i(259213)),12:s.t(null,void 0,i(498236)),13:s.t(null,void 0,i(655761)),4:s.t(null,void 0,i(188130)),7:s.t(null,void 0,i(743588)),5:s.t(null,void 0,i(383490)),6:s.t(null,void 0,i(276519)),11:s.t(null,void 0,i(855169)),8:s.t(null,void 0,i(863876)),17:s.t(null,void 0,i(292763)),18:s.t(null,void 0,i(617809)),19:s.t(null,void 0,i(193722)),20:s.t(null,void 0,i(383298))}[e]}function V(e){return-1!==C.indexOf(e)}function T(e){return-1!==f.indexOf(e)}function I(e,t){return!E(e)&&!E(t)&&!(e===t||!V(e)&&!V(t))}function E(e){return 11===e}function R(e){return-1!==k.indexOf(e)}function A(e){return 8!==e&&17!==e&&18!==e&&20!==e&&R(e)}function G(e){return T(e)||R(e)}function B(e){switch(e){case 3:case 10:case 2:case 14:case 15:case 13:return!0;default:return!1}}function M(e){return!o.SYMBOL_STRING_DATA[e]}function D(e,t){G(e)&&(11!==e&&n.setValue("chart.lastUsedStyle",e),M(e)&&F(e),
we(t)&&B(e)&&n.setValue("chart.lastUsedSingleValueBasedStyle",e))}function F(e){n.setValue("chart.rawDataStyle",e)}function N(){const e=n.getInt("chart.lastUsedStyle");return void 0===e?1:e}function P(){const e=n.getInt("chart.lastUsedSingleValueBasedStyle");return void 0===e?14:e}function U(){return n.getInt("chart.rawDataStyle",1)}function x(e){return e?11:1}function O(e,t){const i=E(t),s=l.Interval.isRange(e);return!i&&s?x(!0):i&&!s?x(!1):t}function Y(e,t){const i=o.SYMBOL_STRING_DATA[e];return void 0===i?null:t?`${i.type}-${i.basicStudyVersion}`:i.type}function q(e){const t=e.priceAxisProperties,i=t.lockScale.value(),s=6===e.style.value();(s||i)&&(t.log.setValue(!1),t.percentage.setValue(!1)),t.logDisabled.setValue(!(!s&&!i)),t.percentageDisabled.setValue(!(!s&&!i))}const H=[4,7,5,6];function K(e){return-1!==H.indexOf(e)}function $(e){return W.includes(e)}function z(e,t="default",i=!1){let s,n,r,a=100,o=1;if("default"===t)null!=e&&(({pricescale:a,minmov:o,minmove2:n,fractional:s}=e),r=e.variable_tick_size||void 0);else{let e=t.split(",");3!==e.length&&(e=["100","1","false"]),a=parseInt(e[0]),o=parseInt(e[1]),s="true"===e[2]}return i&&(o=1),{priceScale:a,minMove:o,fractional:s,minMove2:n,variableMinTick:r,ignoreMinMove:i}}function j(e,t,i=!1){const{priceScale:s,minMove:n,fractional:r,minMove2:a,variableMinTick:o}=z(e,t,i);if(null!=e){const l=e.format;if("default"===t&&"volume"===l)return new d.VolumeFormatter({precision:2});if("percent"===l)return new c.PercentageFormatter({priceScale:s,minMove:n,fractional:r,minMove2:a,variableMinTick:o,ignoreMinMove:i})}return new u.PriceFormatter({priceScale:s,minMove:n,fractional:r,minMove2:a,variableMinTick:o,ignoreMinMove:i})}function X(e){return null!==e&&"spread"!==e.type}function Z(e,t,i){if(null===e)return null;const s=!t||i?e.currency_id:e.currency_code;return void 0===s||""===s||"pct"===s?null:s}function J(e,t){const i=t?e.original_currency_code:e.original_currency_id;return"pct"===i?null:i??Z(e,t)}function Q(e){return e.base_currency_id||null}function ee(e){if(null===e||!X(e))return!1;const t=J(e);return null!==t&&t!==Z(e)}function te(e,t){return t&&null!==e&&"spread"!==e.type}function ie(e,t){if(null===e||!t)return null;const i=e.unit_id;return void 0===i||""===i?null:i}function se(e,t){return t?e.original_unit_id||ie(e,t):null}function ne(e,t){return!(null===e||!te(e,t))&&(void 0!==e.original_unit_id&&e.original_unit_id!==e.unit_id)}function re(e,t){return null!==e&&te(e,t)?e.unit_conversion_types||null:[]}function ae(e){return"futures"===e.type&&e.front_contract||null}function oe(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.some((e=>"premarket"===e.id||"postmarket"===e.id))}function le(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.filter((e=>!e.private)).length>1}function ue(e){return null!==e&&("forex"===e.type||(0,y.isCFDSymbol)(e.type,e.typespecs)||(0,a.hasCryptoTypespec)(e.typespecs||[]))}function he(e,t,i,s){let n=e&&(i&&e.pro_name||e.full_name||e.name);return g&&t?n=t:(v||!s&&p)&&e&&e.ticker&&(n=e.ticker),m&&n&&(n=n.toUpperCase()),n}
function de(e,t){return he(e,null,!0,!0)||t}function ce(e,t){return e?e.ticker??e.pro_name??t:t}const ye="·";function _e(e,t){return We(e)?e.source2?.description??null:null}function be(e,t,i="exchange"){const s=_e(e)??e[i];return t||w?e.name:`${e.name} ${ye} ${s}`}function Se(e){let t=e&&(ae(e)||e.name)||"";return t.length>40&&(t=t.substring(0,37)+"..."),t.trim()}function pe(e){const t=e?e.exchange:"";return m?t.toUpperCase():t}function me(e,t){return null!==e?e.full_name:t}function ge(e,t){return e?.pro_name??t}function ve(e){return"regular"===e||"us_regular"===e}function we(e){return"c"===e?.visible_plots_set}function Ce(e){return null!==e&&("unit"===e.measure&&null!==fe(e))}function fe(e){return e?.value_unit_id??null}function ke(e){return"ohlcv"===e.visible_plots_set}function We(e){return null!==e&&"economic"===e.type}function Le(e){const t=_e(e);if(null!==t)return t;return(0,r.onWidget)()||"forex"===e.type?e.exchange:(0,S.redefineExchangeName)(e.listed_exchange)}function Ve(e){return null!==e&&"futures"===e.type&&Boolean(e.has_backadjustment&&e.typespecs?.includes("continuous"))}function Te(e){return null!==e&&"futures"===e.type&&!Boolean(e.typespecs?.includes("continuous"))}function Ie(e){return(0,_.combine)(((t,i)=>{switch(t){case 4:{const t=e.seriesErrorMessage();return null!==t&&("resolution_not_entitled"===t||"custom_resolution"===t||"seconds_not_entitled"===t||"ticks_not_entitled"===t||t.startsWith("study_not_auth:"))?null:{type:"invalid_symbol"}}case 13:{const t=e.seriesErrorMessage();return null===t?null:{type:"calculations_error",errorMessage:t}}case 14:{const t=e.unsupportedResolutionState().value();return null===t?null:{type:"unsupported_resolution",reason:t.reason}}case 1:case 2:return null;default:if(i)return{type:"no_data"}}return null}),e.statusWV().weakReference(),(0,b.createWVFromGetterAndSubscription)((()=>!e.bars().size()&&!e.isInReplay().value()),e.dataEvents().dataUpdated()).ownership(),(0,b.createWVFromGetterAndSubscription)((()=>({})),e.model().onChartThemeLoaded()).ownership())}function Ee(e){return Math.max(0,e?.delay??0)}},503679:(e,t,i)=>{i.d(t,{DAYS_UNTIL_BLOCK:()=>r,UserStatus:()=>s,getDaysUntilBlock:()=>a,isUserLockedOut:()=>o});var s,n=i(199872);!function(e){e.NonPro="non_pro",e.Pro="pro"}(s||(s={}));const r=30,a=(0,n.memoize)((()=>{const e=window.user.declared_status_timestamp;if(!e)return null;const t=((new Date).getTime()-new Date(1e3*e).getTime())/1e3/24/60/60;return r-Math.floor(t)})),o=(0,n.memoize)((e=>{const t=e??a();return Boolean(t&&t<0)}))},199872:(e,t,i)=>{function s(e,t){const i=new Map;return function(...s){const n=""+(t?t.apply(null,s):s[0]);if(!i.has(n)){const t=e.apply(this,s);return i.set(n,t),t}return i.get(n)}}i.d(t,{memoize:()=>s})}}]);