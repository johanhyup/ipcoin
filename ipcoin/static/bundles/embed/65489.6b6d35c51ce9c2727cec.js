"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[65489],{269665:(e,t,n)=>{n.d(t,{createDwmAligner:()=>u,createTimeToBarTimeAligner:()=>c});var o=n(870045),i=n(764829),r=n(378975),l=n(477472),s=n(242095);const a=new l.SessionInfo("Etc/UTC","0000-0000:1234567");function u(e,t){if(!d()||!r.Interval.isDWM(e))return null;const n=new l.SessionInfo(t.timezone,t.session,t.session_holidays,t.corrections),i=(0,s.newBarBuilder)(e,n,a);return{timeToSessionStart:e=>i.tradingDayToSessionStart(e),timeToExchangeTradingDay:e=>{const t=(0,o.utc_to_cal)(n.timezone,e),i=n.spec.correctTradingDay(t);return(0,o.set_hms)(i,0,0,0,0,(0,o.get_timezone)("Etc/UTC")),i.getTime()}}}function d(){return!i.enabled("disable_resolution_rebuild")}function c(e,t){if(!d())return e=>e;const n=new l.SessionInfo(t.timezone,t.session,t.session_holidays,t.corrections),o=(0,s.newBarBuilder)(e,n,n,!1);return e=>o.alignTimeIfPossible(e)}},419283:(e,t,n)=>{n.r(t),n.d(t,{SelectPointMode:()=>o,activePointSelectionMode:()=>U,alignTo45Degrees:()=>Pe,barTimesUnderCursor:()=>Z,beenSetLineToolLastPoint:()=>A,cancelLineTool:()=>ee,cancelledLineTool:()=>N,changeLineStyle:()=>de,changeLineTool:()=>le,changedLineStyle:()=>j,changedLineTool:()=>K,continueLineTool:()=>X,continuedLineTool:()=>C,copiedLineTool:()=>z,copyLineTool:()=>ce,createLineTool:()=>Y,createdLineTool:()=>F,crosshairLock:()=>g,cursorTool:()=>b,drawOnAllCharts:()=>we,drawOnAllChartsMode:()=>Re,emojiTool:()=>w,finishChangingLineTool:()=>se,finishLineTool:()=>ue,finishMovingLineTool:()=>ie,finishedChangingLineTool:()=>O,finishedLineTool:()=>$,finishedMovingLineTool:()=>E,hideAllDrawings:()=>Se,hideAllIndicators:()=>Le,hideMarksOnBars:()=>Ie,iconTool:()=>P,init:()=>pe,isDirectionalMovementActive:()=>D,isStudyEditingNow:()=>G,isToolCreatingNow:()=>M,isToolEditingNow:()=>_,isToolMovingNow:()=>V,lockDrawings:()=>ge,moveLineTool:()=>oe,movedLineTool:()=>k,properties:()=>ve,removeLineTool:()=>ae,removedLineTool:()=>W,resetToCursor:()=>h,restoreLineTool:()=>fe,restoreLineToolState:()=>ye,restoredLineTool:()=>H,restoredLineToolState:()=>q,runOnDrawingStateReady:()=>me,setLineToolLastPoint:()=>te,startChangingLineTool:()=>re,startMovingLineTool:()=>ne,startedChangingLineTool:()=>B,startedMovingLineTool:()=>x,stickerTool:()=>R,tool:()=>I,toolIsCursor:()=>f,toolIsMeasure:()=>y});var o,i=n(650151),r=n(998418),l=n(868594),s=n(375397),a=n(566238),u=n(942634),d=n(62802),c=n(251954);function f(e){return"cursor"===e||"arrow"===e||"dot"===e||"performance"===e}function y(e){return"measure"===e}function h(e=!1){if(!e&&T){if(T.childs().stayInDrawingMode.value())return}I.setValue(b.value())}!function(e){e[e.None=0]="None",e[e.Replay=1]="Replay",e[e.Study=2]="Study"}(o||(o={}));let T=null,p=null,m=null,v=null,S=null,L=null
;const g=new a.WatchedObject(null),I=new s.WatchedValue,P=new s.WatchedValue,w=new s.WatchedValue,R=new s.WatchedValue,b=new s.WatchedValue,M=new s.WatchedValue(!1),_=new s.WatchedValue(!1),V=new s.WatchedValue(!1),D=new s.WatchedValue(!1),F=new u.Delegate,C=new u.Delegate,N=new u.Delegate,A=new u.Delegate,x=new u.Delegate,k=new u.Delegate,E=new u.Delegate,B=new u.Delegate,K=new u.Delegate,O=new u.Delegate,W=new u.Delegate,$=new u.Delegate,j=new u.Delegate,z=new u.Delegate,H=new u.Delegate,q=new u.Delegate,U=new s.WatchedValue(o.None),G=new s.WatchedValue(!1),Z=new Map;function J(e,t){const n=t||{value:!1};return t=>{n.value||(n.value=!0,e.fire(t),n.value=!1)}}const Q={value:!1},Y=J(F,Q),X=J(C,Q),ee=J(N,Q),te=J(A,Q),ne=J(x),oe=J(k),ie=J(E),re=J(B),le=J(K),se=J(O),ae=J(W),ue=J($),de=J(j,Q),ce=J(z,Q),fe=J(H),ye=J(q);let he=!1,Te=[];function pe(){he||(I.setValue(d.getValue("chart.cursorPreference","cursor")),I.subscribe((e=>f(e)&&b.setValue(e)),{callWithLast:!0}),b.subscribe((e=>{e&&"performance"!==e&&d.setValue("chart.cursorPreference",e)})),T=new l.DefaultProperty({defaultName:"drawings"}),p=(0,r.createPrimitiveProperty)(!1),m=(0,r.createPrimitiveProperty)(!1),v=(0,r.createPrimitiveProperty)(!1),S=(0,r.createPrimitiveProperty)(!d.getBool("BarsMarksContainer.visibile",!0)),L=(0,r.createPrimitiveProperty)(!1),I.subscribe((e=>{(0,c.emit)("onSelectedLineToolChanged")})),he=!0,Te.forEach((e=>e())),Te=[])}function me(e){he?e():Te.push(e)}function ve(){return(0,i.ensureNotNull)(T)}function Se(){return(0,i.ensureNotNull)(p)}function Le(){return(0,i.ensureNotNull)(m)}function ge(){return(0,i.ensureNotNull)(v)}function Ie(){return(0,i.ensureNotNull)(S)}function Pe(){return(0,i.ensureNotNull)(L)}function we(){return ve().childs().drawOnAllCharts}function Re(){return ve().childs().drawOnAllChartsMode}},553220:(e,t,n)=>{n.d(t,{DateFormatter:()=>r});var o=n(339709),i=n(246125);class r{constructor(e="yyyy-MM-dd",t=!1){this._dateFormatFunc=t?(0,i.getDateFormatWithWeekday)(e):i.dateFormatFunctions[e]}format(e){return o.customFormatters&&o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!1)}formatLocal(e){return o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.formatLocal?o.customFormatters.dateFormatter.formatLocal(e):o.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!0)}parse(e){if(""===e)return{res:!1};let t=e;return o.customFormatters&&o.customFormatters.dateFormatter&&!o.customFormatters.dateFormatter.parse&&console.warn("You need to provide a `parse` function as part of `dateFormatter`"),o.customFormatters&&o.customFormatters.dateFormatter&&o.customFormatters.dateFormatter.parse&&(t=String(o.customFormatters.dateFormatter.parse(e))),{res:!0,value:t}}}},23666:(e,t,n)=>{n.d(t,{LineToolCollectedProperty:()=>u,LineToolColorsProperty:()=>c,LineToolWidthsProperty:()=>d,MultipleLineColorsProperty:()=>h,MultipleLineWidthsProperty:()=>y});var o=n(338619),i=n(805578),r=n(485020);const l=(0,o.getLogger)("Chart.LineToolCollectedProperty");class s{
applyValue(e,t){e.setValue(t)}}class a extends r.PropertyBase{constructor(e,t){super(),this._properties=e,e.forEach(((e,t)=>e.subscribe(this,((e,n)=>{this._listeners.fire(this,`${t}.${n}`)})))),this._showIfProperty=t}visible(){return!this._showIfProperty||this._showIfProperty?.value()}value(){if(0===this._properties.length)return l.logError("Incorrect call, should not request value of 0 properties"),"mixed";const e=this._properties[0].value();return 1===this._properties.length||this._properties.every((t=>t.value()===e))?e:"mixed"}setValueSilently(e){"mixed"!==e&&this._properties.forEach((t=>t.setValueSilently(e)))}hasChild(e){const t=parseInt(e,10);return!isNaN(t)&&t>=0&&t<this._properties.length}childCount(){return this._properties.length}childNames(){return this._properties.map(((e,t)=>t.toString()))}child(e){const t=parseInt(e,10);return!isNaN(t)&&t>=0&&t<this._properties.length?this._properties[t]:void 0}destroy(){this._properties.forEach((e=>e.unsubscribeAll(this))),this._listeners.destroy()}storeStateIfUndefined(){return!0}weakReference(){return(0,i.weakReference)(this)}ownership(){return(0,i.ownership)(this)}}class u extends a{setValue(e,t,n){if("mixed"===e)return;const o=n??new s;this._properties.forEach((t=>o.applyValue(t,e)))}}class d extends u{}class c extends u{firstColor(){return this._properties[0].value()}}class f extends(25242==n.j?a:null){setValue(e,t,n){if("mixed"===e)return;const o=n??new s;this._properties.forEach((t=>t.setValue(e,void 0,o)))}}class y extends(25242==n.j?f:null){}class h extends(25242==n.j?f:null){}},889301:(e,t,n)=>{n.d(t,{lineToolsLocalizedNames:()=>i});var o=n(444372);const i={LineTool5PointsPattern:o.t(null,void 0,n(942231)),LineToolABCD:o.t(null,void 0,n(246712)),LineToolArc:o.t(null,void 0,n(659324)),LineToolArrow:o.t(null,void 0,n(511858)),LineToolArrowMarkDown:o.t(null,void 0,n(673193)),LineToolArrowMarkLeft:o.t(null,void 0,n(401949)),LineToolArrowMarkRight:o.t(null,void 0,n(886275)),LineToolArrowMarkUp:o.t(null,void 0,n(162453)),LineToolBalloon:o.t(null,void 0,n(770540)),LineToolComment:o.t(null,void 0,n(309818)),LineToolBarsPattern:o.t(null,void 0,n(381994)),LineToolBezierCubic:o.t(null,void 0,n(77125)),LineToolBezierQuadro:o.t(null,void 0,n(678609)),LineToolBrush:o.t(null,void 0,n(243539)),LineToolCallout:o.t(null,void 0,n(925381)),LineToolCircleLines:o.t(null,void 0,n(584031)),LineToolCypherPattern:o.t(null,void 0,n(193191)),LineToolDateAndPriceRange:o.t(null,void 0,n(247017)),LineToolDateRange:o.t(null,void 0,n(485444)),LineToolDisjointAngle:o.t(null,void 0,n(91544)),LineToolElliottCorrection:o.t(null,void 0,n(980943)),LineToolElliottDoubleCombo:o.t(null,void 0,n(75112)),LineToolElliottImpulse:o.t(null,void 0,n(861114)),LineToolElliottTriangle:o.t(null,void 0,n(872359)),LineToolElliottTripleCombo:o.t(null,void 0,n(76129)),LineToolEllipse:o.t(null,void 0,n(978996)),LineToolExtended:o.t(null,void 0,n(452788)),LineToolFibChannel:o.t(null,void 0,n(659005)),LineToolFibCircles:o.t(null,void 0,n(182330)),LineToolFibRetracement:o.t(null,void 0,n(855986)),
LineToolFibSpeedResistanceArcs:o.t(null,void 0,n(633880)),LineToolFibSpeedResistanceFan:o.t(null,void 0,n(202395)),LineToolFibSpiral:o.t(null,void 0,n(239014)),LineToolFibTimeZone:o.t(null,void 0,n(930622)),LineToolFibWedge:o.t(null,void 0,n(485042)),LineToolFlagMark:o.t(null,void 0,n(514600)),LineToolImage:o.t(null,void 0,n(868065)),LineToolFlatBottom:o.t(null,void 0,n(745051)),LineToolAnchoredVWAP:o.t(null,void 0,n(584541)),LineToolGannComplex:o.t(null,void 0,n(844763)),LineToolGannFixed:o.t(null,void 0,n(960707)),LineToolGannFan:o.t(null,void 0,n(748683)),LineToolGannSquare:o.t(null,void 0,n(947460)),LineToolHeadAndShoulders:o.t(null,void 0,n(921928)),LineToolHorzLine:o.t(null,void 0,n(121795)),LineToolHorzRay:o.t(null,void 0,n(325487)),LineToolIcon:o.t(null,void 0,n(37913)),LineToolEmoji:o.t(null,void 0,n(273456)),LineToolSticker:o.t(null,void 0,n(443114)),LineToolInsidePitchfork:o.t(null,void 0,n(141686)),LineToolNote:o.t(null,void 0,n(986631)),LineToolTextNote:o.t(null,void 0,n(794389)),LineToolSignpost:o.t(null,void 0,n(467751)),LineToolParallelChannel:o.t(null,void 0,n(559256)),LineToolPitchfan:o.t(null,void 0,n(234156)),LineToolPitchfork:o.t(null,void 0,n(919634)),LineToolPolyline:o.t(null,void 0,n(239949)),LineToolPath:o.t(null,void 0,n(800371)),LineToolPrediction:o.t(null,void 0,n(920138)),LineToolPriceLabel:o.t(null,void 0,n(91282)),LineToolArrowMarker:o.t(null,void 0,n(936352)),LineToolPriceRange:o.t(null,void 0,n(768941)),LineToolProjection:o.t(null,void 0,n(375747)),LineToolRay:o.t(null,void 0,n(550318)),LineToolRectangle:o.t(null,void 0,n(426001)),LineToolCircle:o.t(null,void 0,n(191944)),LineToolRegressionTrend:o.t(null,void 0,n(802460)),LineToolRiskRewardLong:o.t(null,void 0,n(674832)),LineToolRiskRewardShort:o.t(null,void 0,n(508075)),LineToolFixedRangeVolumeProfile:o.t(null,{context:"study"},n(925705)),LineToolAnchoredVolumeProfile:o.t(null,{context:"study"},n(689633)),LineToolRotatedRectangle:o.t(null,void 0,n(56820)),LineToolSchiffPitchfork:o.t(null,void 0,n(657681)),LineToolSchiffPitchfork2:o.t(null,void 0,n(942608)),LineToolSineLine:o.t(null,void 0,n(839090)),LineToolText:o.t(null,{context:"tool"},n(691405)),LineToolTextAbsolute:o.t(null,void 0,n(642669)),LineToolThreeDrivers:o.t(null,void 0,n(46982)),LineToolTimeCycles:o.t(null,void 0,n(746852)),LineToolTrendAngle:o.t(null,void 0,n(35757)),LineToolTrendBasedFibExtension:o.t(null,void 0,n(680583)),LineToolTrendBasedFibTime:o.t(null,void 0,n(272159)),LineToolTrendLine:o.t(null,void 0,n(197339)),LineToolInfoLine:o.t(null,void 0,n(715992)),LineToolTriangle:o.t(null,void 0,n(901671)),LineToolTrianglePattern:o.t(null,void 0,n(390148)),LineToolVertLine:o.t(null,void 0,n(529535)),LineToolCrossLine:o.t(null,void 0,n(974334)),LineToolHighlighter:o.t(null,void 0,n(969476)),LineToolPriceNote:o.t(null,void 0,n(297512)),LineToolVbPFixed:o.t(null,void 0,n(840693)),LineToolGhostFeed:o.t(null,void 0,n(546808))};i.LineToolTweet=o.t(null,void 0,n(636549)),i.LineToolIdea=o.t(null,void 0,n(215982)),i.LineToolNoteAbsolute=o.t(null,void 0,n(363209)),
i.LineToolTable=o.t(null,void 0,n(17981))},465836:(e,t,n)=>{var o;n.d(t,{cloneLineTool:()=>B,createLineTool:()=>M,createLineToolProperties:()=>V,createStudyLineToolProperties:()=>D,initAllLineToolsFromContent:()=>b,initLineTool:()=>R,isBrushBasedLineTool:()=>C,isEditableTextLineTool:()=>k,isLineTool:()=>p.isLineTool,isStudyLineTool:()=>N,isTrading:()=>A,lineToolByLinkKey:()=>K,prepareLineToolPropertiesByOwnerSource:()=>_,setNewToolProperties:()=>g,supportsPhantomMode:()=>F,tryFindStudyLineToolNameByStudyId:()=>E,unsetNewToolProperties:()=>I});var i=n(182433),r=n(650151),l=n(86441),s=n(412788),a=n(609466),u=n(954877),d=n(926799),c=n(975179),f=n(627620),y=n(850723),h=n(850986),T=n(219774),p=n(226035);const m={},v={};Object.assign(m,o||(o=n.t(u,2)));const S=["LineToolRegressionTrend","LineToolAnchoredVWAP","LineToolFixedRangeVolumeProfile","LineToolVbPFixed"];S.push("LineToolAnchoredVolumeProfile");let L=null;function g(e,t,n){return null!==L&&L.tool===e&&L.toolData===t||(L={properties:V(e),tool:e,toolData:t}),L.properties}function I(){L=null}const P=new Map([["LineToolPriceNote",async()=>(await Promise.all([n.e(21955),n.e(77916),n.e(72763),n.e(96501),n.e(90108),n.e(380)]).then(n.bind(n,875943))).LineToolPriceNote],["LineToolTextNote",async()=>(await Promise.all([n.e(99804),n.e(77916),n.e(72763),n.e(96501),n.e(90108),n.e(88035),n.e(89123)]).then(n.bind(n,582703))).LineToolTextNote],["LineToolNote",async()=>(await Promise.all([n.e(10601),n.e(77916),n.e(72763),n.e(96501),n.e(90108),n.e(88035),n.e(23248)]).then(n.bind(n,834447))).LineToolNote],["LineToolFibSpiral",async()=>(await Promise.all([n.e(82835),n.e(77916),n.e(72763),n.e(96501),n.e(90108),n.e(78090)]).then(n.bind(n,45244))).LineToolFibSpiral],["LineToolCircleLines",async()=>(await Promise.all([n.e(39850),n.e(77916),n.e(72763),n.e(96501),n.e(90108),n.e(59445)]).then(n.bind(n,763389))).LineToolCyclicLines]]);let w=new Map;async function R(e){if((0,f.isStudyLineToolName)(e)){if(await(0,y.studyMetaInfoRepository)().findAllJavaStudies(),v[e])return;const t=(0,r.ensureDefined)(w.get(e));return void(v[e]=await t())}if(m[e])return;if(!(0,f.isLineToolName)(e))return;const t=(0,r.ensureDefined)(P.get(e));m[e]=await t()}async function b(e){if(!e)return;const t=new Set;("charts"in e?e.charts:[e]).forEach((e=>{e.panes.forEach((e=>{e.sources.forEach((e=>{(0,f.isLineToolName)(e.type)&&t.add(e.type)}))}))})),await Promise.all(Array.from(t).map((e=>R(e))))}function M(e,t,n,o,i,l){var s;let a;if((0,r.assert)((0,f.isLineToolName)(e),"Unknown line tool: "+e),i||n||(s=e,n=(null!==L&&L.tool===s?L.properties:null)||void 0),S.includes(e)){a=new((0,r.ensureDefined)(v[e]))(t,n,(0,r.ensureDefined)(o),i,l)}else{a=new((0,r.ensureDefined)(m[e]))(t,n,i,l)}return a.toolname=e,I(),a}function _(e,t){const n=(0,r.ensureNotNull)(t.symbolSource()),o=n.symbolInfo(),i=o?(0,c.extractLineToolSymbolFromSymbolInfo)(o,n.symbol()):n.symbol();e.childs().symbol.setValue(i),n.model().currencyConversionEnabled()&&n.isConvertedToOtherCurrency()&&e.childs().currencyId.setValue(n.currency()),
n.model().unitConversionEnabled()&&n.isConvertedToOtherUnit()&&e.childs().unitId.setValue(n.unit()),e.childs().symbolStateVersion.setValue(2),e.childs().zOrderVersion.setValue(2)}function V(e,t,n){if((0,r.assert)((0,f.isLineToolName)(e),`${e} should be name of the line tool`),S.includes(e)){return(0,r.ensureDefined)(v[e]).createProperties(t)}return(0,r.ensureDefined)(m[e]).createProperties(t,n)}function D(e,t,n,o,i){if((0,r.assert)((0,f.isStudyLineToolName)(e),`${e} should be name of the study line tool`),S.includes(e)){return(0,r.ensureDefined)(v[e]).createPropertiesFromStudyMetaInfoAndState(t,n,o,i)}throw new Error(`Property creation is not implemented for study line tool ${e}`)}function F(e){(0,r.assert)((0,f.isLineToolName)(e),`${e} should be name of the line tool`);const t=(o||(o=n.t(u,2)))[e];return void 0!==t&&Boolean(t.supportPhantomMode)}function C(e){return e instanceof T.LineToolBrushBase}function N(e){return e instanceof a.StudyLineDataSource}function A(e){return e instanceof d.LineToolTrading}P.set("LineToolNoteAbsolute",(async()=>(await Promise.all([n.e(10601),n.e(77916),n.e(72763),n.e(96501),n.e(90108),n.e(88035),n.e(23248)]).then(n.bind(n,834447))).LineToolNoteAbsolute)),P.set("LineToolTable",(async()=>(await Promise.all([n.e(85665),n.e(77916),n.e(72763),n.e(96501),n.e(90108),n.e(88035),n.e(92804),n.e(30319)]).then(n.bind(n,625892))).LineToolTable)),w=new Map([["LineToolAnchoredVWAP",async()=>(await Promise.all([n.e(45997),n.e(55500)]).then(n.bind(n,427322))).LineToolAnchoredVWAP],["LineToolRegressionTrend",async()=>(await n.e(99748).then(n.bind(n,741274))).LineToolRegressionTrend],["LineToolVbPFixed",async()=>(await Promise.all([n.e(45997),n.e(95695)]).then(n.bind(n,335248))).LineToolVbPFixed],["LineToolFixedRangeVolumeProfile",async()=>(await Promise.all([n.e(45997),n.e(95695)]).then(n.bind(n,573486))).LineToolFixedRangeVolumeProfile],["LineToolAnchoredVolumeProfile",async()=>(await Promise.all([n.e(45997),n.e(95695)]).then(n.bind(n,176592))).LineToolAnchoredVolumeProfile]]);const x=["editableTextStyle","editableText","editableTextProperties"];function k(e){return(0,i.default)(e)&&x.every((t=>t in e))}function E(e){let t=null;return e===h.lineToolsStudyIds.LineToolRegressionTrend?t="LineToolRegressionTrend":e===h.lineToolsStudyIds.LineToolVbPFixed?t="LineToolVbPFixed":e===h.lineToolsStudyIds.LineToolFixedRangeVolumeProfile&&(t="LineToolFixedRangeVolumeProfile"),t}function B(e,t,n,o){const i=t.toolname,a=t.properties().state();a.intervalsVisibilities=(0,s.mergeIntervalVisibilitiesDefaults)(a?.intervalsVisibilities);const u=V(t.toolname,a);u.childs().visible.setValue(!0);const d=(0,r.ensureNotNull)(t.ownerSource()),c=M(i,e,u);void 0!==o&&c.setId(o),c.setOwnerSource(d),c.toolname=i;const f=c.clonePositionOffset();if(t.isFixed()){const e=(0,r.ensureDefined)(t.fixedPoint()),o=n?e.add(new l.Point(f.xCoordOffset,f.yCoordOffset)):e;c.addFixedPoint(o)}const y=t.normalizedPoints(),h=n?function(e,t,n){const o=(0,r.ensureNotNull)(t.priceScale()),i=(0,r.ensureNotNull)(t.firstValue());return e.map((e=>{
const t=e.price,r=o.priceToCoordinate(t,i)+n.yCoordOffset,l=o.coordinateToPrice(r,i),s=e.interval;return{time_t:e.time_t,price:l,offset:e.offset+n.barOffset,interval:s}}))}(y,d,f):y,T=t.points();return c.restorePoints(h,T),c.cloneData&&c.cloneData(t),c.recalculateStateByData&&c.recalculateStateByData(),c}function K(e,t){return e.dataSources().find((e=>(0,p.isLineTool)(e)&&e.linkKey().value()===t))??null}},395394:(e,t,n)=>{n.d(t,{compareResolutions:()=>p,convertResolutionsFromSettings:()=>V,getApplicableIntervalForFrequency:()=>m,getDefaultResolution:()=>w,getMaxResolutionValue:()=>_,getResolutionByChartStyle:()=>R,getTranslatedResolution:()=>C,getTranslatedResolutionModel:()=>N,intervalIsSupported:()=>K,isAvailable:()=>I,isIntervalEnabled:()=>B,isResolutionMultiplierValid:()=>b,isSecondsEnabled:()=>x,isTicksEnabled:()=>k,mergeResolutions:()=>D,normalizeIntervalString:()=>g,setLastUsedResolution:()=>P,sortResolutions:()=>F});var o=n(444372),i=n(378975),r=n(975179),l=n(62802),s=n(583912),a=n(523863),u=n(638456),d=n(125226),c=n(124829),f=n(764829);const y={[i.ResolutionKind.Ticks]:1,[i.ResolutionKind.Seconds]:60,[i.ResolutionKind.Minutes]:1440,[i.SpecialResolutionKind.Hours]:24,[i.ResolutionKind.Days]:365,[i.ResolutionKind.Weeks]:52,[i.ResolutionKind.Months]:12,[i.ResolutionKind.Range]:1e6,[i.ResolutionKind.Invalid]:NaN},h={[i.ResolutionKind.Ticks]:0,[i.ResolutionKind.Seconds]:1,[i.ResolutionKind.Minutes]:2,[i.SpecialResolutionKind.Hours]:3,[i.ResolutionKind.Days]:4,[i.ResolutionKind.Weeks]:5,[i.ResolutionKind.Months]:6,[i.ResolutionKind.Range]:7,[i.ResolutionKind.Invalid]:8};function T(e){const t=i.Interval.parse(e),n=t.multiplier()||1;return t.isMinuteHours()?[i.SpecialResolutionKind.Hours,n/60]:[t.kind(),n]}function p(e,t){if(e===t)return 0;const[n,o]=T(e),[i,r]=T(t);return n!==i?h[n]-h[i]:o-r}function m(e,t){return p(t,e)>=0?t:e}const v=[1,5,10,15,30,45],S=[1,10,100,1e3],L=(0,d.isFeatureEnabled)("tick_intervals")&&!(0,u.onWidget)();function g(e){return i.Interval.parse(e).value()}function I(e){const t=i.Interval.parse(e);if(t.isRange())return s.linking.range.value();if(!k()&&t.isTicks())return!1;const n=t.value(),o=s.linking.dataFrequencyResolution.value();if(void 0!==o&&p(n,o)<0)return!1;const r=s.linking.supportedResolutions.value();return void 0!==r?void 0!==r.find((e=>g(e)===n)):t.isTicks()?Boolean(s.linking.ticks.value()):t.isIntraday()?Boolean(s.linking.intraday.value()):t.isDWM()}function P(e){i.Interval.isValid(e)&&(i.Interval.isRange(e)?l.setValue("chart.lastUsedRangeResolution",e):l.setValue("chart.lastUsedTimeBasedResolution",e))}function w(e){return e?"100R":"1D"}function R(e,t,n){const o=r.isRangeStyle(e),s=i.Interval.isRange(t);return!o&&s?function(e){const t=l.getValue("chart.lastUsedTimeBasedResolution");if(void 0!==t&&i.Interval.isTimeBased(t))return t;let n="1D";for(const t of e){const e=i.Interval.parse(t);if(e.isTimeBased()){const t=e.value();if("1D"===t)return t;n=t}}return n}(n):o&&!s?function(e){const t=l.getValue("chart.lastUsedRangeResolution");if(void 0!==t&&i.Interval.isRange(t))return t
;let n="100R";for(const t of e){const e=i.Interval.parse(t);if(e.isRange()){const t=e.value();if("100R"===t)return t;n=t}}return n}(n):t}function b(e){const{interval:t,guiResolutionKind:n}=i.Interval.parseExt(e);if(!t.isValid())return!1;const o=t.multiplier();if(n===i.ResolutionKind.Seconds)return v.includes(o);if(L&&n===i.ResolutionKind.Ticks)return S.includes(o);return(n===i.SpecialResolutionKind.Hours?o/60:o)<=M(n)}function M(e){const t=y[e];return Number.isNaN(t)?1:t}function _(e){return M(i.Interval.parseExt(e).guiResolutionKind)}function V(e){return Array.isArray(e)?e:Object.keys(e).map(i.Interval.normalize).filter(c.notNull)}function D(...e){let t=[].concat(...e);return t=(0,a.uniq)(t.filter(b).map(g)),F(t)}function F(e){return e.sort(p)}function C(e){const{multiplier:t,shortKind:n}=N(e);return`${t}${n}`}function N(e,t){const n=i.Interval.parse(e);let o=n.multiplier(),r=n.kind();if(!n.isValid()){if(t)return null;throw new TypeError(`Can't translate invalid interval: ${e}`)}return n.isMinuteHours()&&(o=Math.floor(o/60),r=i.SpecialResolutionKind.Hours),{multiplier:o.toString(),shortKind:A(r),hint:`${o} ${A(r,o)}`,mayOmitMultiplier:n.isDWM()&&1===o,mayOmitShortKind:n.isMinutes()&&!n.isMinuteHours()}}function A(e,t){if(!t)return{[i.ResolutionKind.Invalid]:"",[i.ResolutionKind.Ticks]:o.t(null,{context:"interval_short"},n(882901)),[i.ResolutionKind.Seconds]:o.t(null,{context:"interval_short"},n(968823)),[i.ResolutionKind.Minutes]:o.t(null,{context:"interval_short"},n(768430)),[i.SpecialResolutionKind.Hours]:o.t(null,{context:"interval_short"},n(438048)),[i.ResolutionKind.Days]:o.t(null,{context:"interval_short"},n(38691)),[i.ResolutionKind.Weeks]:o.t(null,{context:"interval_short"},n(307408)),[i.ResolutionKind.Months]:o.t(null,{context:"interval_short"},n(977995)),[i.ResolutionKind.Range]:o.t(null,{context:"interval_short"},n(993934))}[e];switch(e){case i.ResolutionKind.Ticks:return o.t(null,{plural:"ticks",count:t},n(111913));case i.ResolutionKind.Days:return o.t(null,{plural:"days",count:t},n(641807));case i.ResolutionKind.Weeks:return o.t(null,{plural:"weeks",count:t},n(448898));case i.ResolutionKind.Months:return o.t(null,{plural:"months",count:t},n(898393));case i.ResolutionKind.Seconds:return o.t(null,{plural:"seconds",count:t},n(33232));case i.ResolutionKind.Minutes:return o.t(null,{plural:"minutes",count:t},n(378318));case i.SpecialResolutionKind.Hours:return o.t(null,{plural:"hours",count:t},n(942328));case i.ResolutionKind.Range:return o.t(null,{plural:"ranges",count:t},n(189937));default:return e}}function x(){return!0}function k(){return L}function E(e){return!(!k()&&e.isTicks())}function B(e){return E(i.Interval.parse(e))}function K(e){if(f.enabled("allow_supported_resolutions_set_only")){const t=i.Interval.normalize(e);return null!==t&&I(t)}{const t=i.Interval.parse(e);if(!t.isValid()||!E(t))return!1;if(!f.enabled("custom_resolutions")){const t=i.Interval.normalize(e),n=window.ChartApiInstance.defaultResolutions().filter(B);if(!t||-1===n.indexOf(t))return!1}
const n=s.linking.dataFrequencyResolution.value();if(void 0!==n&&m(n,t.value())!==t.value())return!1;if(t.isRange())return s.linking.range.value();if(t.isTicks())return s.linking.ticks.value();if(t.isIntraday())return s.linking.intraday.value();{const e=s.linking.supportedResolutions.value();return!e||e.includes(t.value())}}}},434396:(e,t,n)=>{n.d(t,{createStudy:()=>g,hasConfirmInputs:()=>R,isCompareOrOverlayStudy:()=>S,isESDStudy:()=>p,isFundamentalStudy:()=>T,isOverlayStudy:()=>v,isRollDatesStudy:()=>m,isStudy:()=>c,isStudyStrategy:()=>y,isStudyStub:()=>h,isSymbolicStudy:()=>M,studyColorRotationMode:()=>I,useSameColorRotationComparator:()=>w});var o=n(650151),i=(n(764829),n(637761)),r=n(872842),l=n(296842),s=n(879938),a=n(903424);const u=(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,689052)).then((e=>e.Study))));(0,s.addStudyInfoToMap)("Study",u),(0,s.addStudyInfoToMap)("study_PivotPointsStandard",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,332764)).then((e=>e.study_PivotPointsStandard))))),(0,s.addStudyInfoToMap)("study_Overlay",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.t.bind(n,120269,19)).then((e=>e.study_Overlay))),"sexyColors")),(0,s.addStudyInfoToMap)("study_Compare",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,622161)).then((e=>e.StudyCompare))),"sexyColors")),(0,s.addStudyInfoToMap)("study_Volume",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,242829)).then((e=>e.VolumeStudy))))),(0,s.addStudyInfoToMap)("study_VbPVisible",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,759332)).then((e=>e.VbPVisibleWrapper))),"noRotations")),(0,s.addStudyInfoToMap)("study_VbPFixed",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,759332)).then((e=>e.VolumeProfileStudyWithThemedColors))),"noRotations")),(0,s.addStudyInfoToMap)("study_ScriptWithDataOffset",(0,
s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,654638)).then((e=>e.study_ScriptWithDataOffset))))),(0,s.addStudyInfoToMap)("study_Earnings",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,266298)).then((e=>e.study_ESD$TV_EARNINGS))))),(0,s.addStudyInfoToMap)("study_Splits",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,266298)).then((e=>e.study_ESD$TV_SPLITS))))),(0,s.addStudyInfoToMap)("study_Dividends",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,266298)).then((e=>e.study_ESD$TV_DIVIDENDS))))),(0,s.addStudyInfoToMap)("study_BarSetContinuousRollDates",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,517802)).then((e=>e.study_ESD$TV_ROLLDATES))))),(0,s.addStudyInfoToMap)(l.fundamentalsPrefix,(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,962608)).then((e=>e.Fundamental))),"loop",((e,t)=>(0,l.isFundamentalStudyMetaInfo)(t)))),(0,s.addStudyInfoToMap)("study_ElliottWave",(0,s.createStudyInfo)((()=>Promise.all([n.e(88101),n.e(81395),n.e(49767),n.e(77916),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(6706)]).then(n.bind(n,31508)).then((e=>e.study_ElliottWave))))),(0,s.addStudyInfoToMap)("study_LinearRegression",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,496327)).then((e=>e.LinearRegressionStudy))))),(0,s.addStudyInfoToMap)("study_PivotPointsHighLow",(0,s.createStudyInfo)((()=>Promise.all([n.e(88101),n.e(81395),n.e(49767),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(36552)]).then(n.bind(n,552993)).then((e=>e.study_PivotPointsHighLow))))),(0,s.addStudyInfoToMap)("study_VbPSessions",(0,
s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,2781)).then((e=>e.SessionVolumeStudy))),"noRotations")),(0,s.addStudyInfoToMap)("study_VbPPeriodic",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,759332)).then((e=>e.VolumeProfileWithPriceRangeStudy))),"noRotations")),(0,s.addStudyInfoToMap)("study_VbPSessionsRoughDetailed",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,990627)).then((e=>e.SessionVolume2Study))),"noRotations")),(0,s.addStudyInfoToMap)("study_ZigZag",(0,s.createStudyInfo)((()=>Promise.all([n.e(88101),n.e(81395),n.e(49767),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(70593)]).then(n.bind(n,996245)).then((e=>e.study_ZigZag))))),(0,s.addStudyInfoToMap)("study_VbPAutoAnchored",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,759332)).then((e=>e.VolumeProfileStudyWithThemedColors))),"noRotations")),(0,s.addStudyInfoToMap)("study_TPOPeriodic",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,997253)).then((e=>e.TpoPeriodicStudy))))),(0,s.addStudyInfoToMap)("study_TPOSessions",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,563371)).then((e=>e.TpoSessionsStudy))))),(0,s.addStudyInfoToMap)("study_VolumeFootprint",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,586043)).then((e=>e.VolumeFootprintStudy))))),(0,s.addStudyInfoToMap)("StudyStrategy",(0,s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,395104)).then((e=>e.StudyStrategy))))),(0,s.addStudyInfoToMap)("ReplayStudyStrategy",(0,
s.createStudyInfo)((()=>Promise.all([n.e(82938),n.e(32887),n.e(24951),n.e(81395),n.e(49767),n.e(97525),n.e(9121),n.e(45997),n.e(19719),n.e(58722),n.e(12440),n.e(78026),n.e(88035),n.e(5780),n.e(5955),n.e(57539)]).then(n.bind(n,912291)).then((e=>e.ReplayStudyStrategy)))));const d=["getStudyName","guiPlotName","isLinkedToSeries"];function c(e){return d.every((t=>t in e))}const f=["strategyOrdersPaneView","ordersData","reportData"];function y(e){return c(e)&&f.every((t=>t in e))}function h(e){return e instanceof r.StudyStub}function T(e){return c(e)&&(0,l.isFundamentalStudyMetaInfo)(e.metaInfo())}function p(e){return e instanceof a.DataSource&&("ESD$TV_EARNINGS"===e.id()||"ESD$TV_SPLITS"===e.id()||"ESD$TV_DIVIDENDS"===e.id())}function m(e){return e instanceof a.DataSource&&"ESD$TV_ROLLDATES"===e.id()}function v(e){return c(e)&&"Overlay@tv-basicstudies"===e.metaInfo().id}function S(e){return v(e)||c(e)&&"Compare@tv-basicstudies"===e.metaInfo().id}let L=0;async function g(e,t,n,r,a,d){let c;const f=2===d;if(i.StudyMetaInfo.isReplayStrategy(r)&&(c=(0,s.getStudyInfoByName)("ReplayStudyStrategy")),i.StudyMetaInfo.isScriptStrategy(r)&&(c=(0,s.getStudyInfoByName)("StudyStrategy")),!c){const e=(0,l.studyNameByMetaInfo)(r);c=(0,s.getStudyInfoByName)(e??"Study")??u}c.studyConstructor||(L+=1,c.studyConstructor=await(0,o.ensureDefined)(c.studyConstructorAsyncGetter)(),L-=1);const y=new((0,o.ensureDefined)(c?.studyConstructor))(e,t,n,r,f);return void 0!==a&&y.setId(a),y}function I(e){const t=(0,l.studyNameByMetaInfo)(e),n=(0,s.getStudyInfoByName)(t);return n?n.colorRotationMode:void 0===e.pine||i.StudyMetaInfo.isStandardPine(e.id)?1!==e.plots.length?"shift":"loop":null}function P(e,t){return e.id===t.id&&(o=t,((n=e).pine?n.pine.version:void 0)===(o.pine?o.pine.version:void 0));var n,o}function w(e){const t=(0,l.studyNameByMetaInfo)(e),n=(0,s.getStudyInfoByName)(t);if(n){const e=n.colorRotationComparator;if(void 0!==e)return e}return P}function R(e){return(e??[]).some((e=>e.confirm))}const b=["Overlay@tv-basicstudies","CorrelationCoefficient@tv-basicstudies","Correlation Coeff@tv-basicstudies","Spread@tv-basicstudies","Ratio@tv-basicstudies"];function M(e){return b.includes(e.id)}},850723:(e,t,n)=>{n.d(t,{emptyPineId:()=>T,isStudyDescriptor:()=>p,studyMetaInfoRepository:()=>L});var o=n(481251),i=n(444372),r=n(650151),l=n(637761),s=n(874546),a=n(306060),u=n(500323),d=n(870408),c=n(401843),f=n(338619),y=n(955273);const h=(0,f.getLogger)("Chart.Studies.StudyMetaInfoRepository",{color:"#606"}),T="";function p(e){return"object"==typeof e&&null!==e&&"type"in e&&("java"===e.type&&"studyId"in e||"pine"===e.type&&"pineId"in e)}class m{constructor(e){this._isReady=!1,this._studyVersioning=null,this._rawStudiesMetaInfo=[],this._rawStudiesMetaInfoDeferredPromise=null,this._javaStudiesMetaInfo=[],this._pineMetaInfoCache=[],this._compileErrors=new WeakMap,this._studiesMigrations=[],this._chartApi=e}async requestMetaInfo(){if(null===this._rawStudiesMetaInfoDeferredPromise){this._rawStudiesMetaInfoDeferredPromise=(0,y.createDeferredPromise)()
;const e=await this._chartApi.requestMetadata(),t=e.params[1].metainfo.slice();{const n=e.params[1].migrations.slice();this._processSiteMetaInfo(t,n)}this._studyVersioning=new u.StudyVersioning(this._javaStudiesMetaInfo,this._studiesMigrations),this._requestFinished(),this._rawStudiesMetaInfoDeferredPromise.resolve(this._rawStudiesMetaInfo)}return this._rawStudiesMetaInfoDeferredPromise.promise}async findById(e){this._isReady||await this.requestMetaInfo();const t=this._findStudyMetaInfo(e);if(null!==t){const e=this._compileErrors.get(t);return e?Promise.reject(e):Promise.resolve(t)}return"pine"===e.type?this._compilePine(e):Promise.reject(`unexpected study id=${e.studyId} with type=${e.type}`)}findByIdSync(e){return this._findStudyMetaInfo(e)}isReady(){return this._isReady}async findAllJavaStudies(){return this._isReady||await this.requestMetaInfo(),this._javaStudiesMetaInfo}studyVersioning(){return(0,r.ensureNotNull)(this._studyVersioning)}getInternalMetaInfoArray(){return this._javaStudiesMetaInfo}addPineMetaInfo(e,t){const n=S(this._pineMetaInfoCache,e);return t&&(!Array.isArray(t)||t.length>0)&&(t=Array.isArray(t)?new c.PineCompileFailErrorImpl({warnings:[],errors:t},e):t,this._compileErrors.set(n,t)),n}async getLatestMetaInfoForPineStudy(e,t){const n=await(0,d.requestUserScripts)();let o;if(n){const i=n.find((t=>t.scriptIdPart===e));if(i){const e=a.Version.parse(t),n=a.Version.parse(i.version);e.isLess(n)&&(o=i.version)}}if(void 0!==o){const t={type:"pine",pineId:e,pineVersion:o};return this.findById(t)}return null}_processMigrations(e){this._studiesMigrations=[];for(let t=0;e&&t<e.length;t++)this._studiesMigrations.push(e[t])}_processSiteMetaInfo(e,t){for(const t of e)u.StudyVersioning.verifyInputsMaxValue(t),v(t);this._rawStudiesMetaInfo=e,this._processMigrations(t);for(const e of this._rawStudiesMetaInfo)S(this._javaStudiesMetaInfo,e);l.StudyMetaInfo.overrideDefaults(this._javaStudiesMetaInfo)}_processLibraryMetaInfo(e){}_requestFinished(){this._isReady=!0}_findStudyMetaInfo(e){return"java"===e.type?((0,r.assert)(0!==this._javaStudiesMetaInfo.length,"Java studies metainfo should be define here"),this._javaStudiesMetaInfo.find((t=>t.id===e.studyId))||null):this._pineMetaInfoCache.find((t=>t.scriptIdPart===e.pineId&&(void 0===e.pineVersion||(0,r.ensureDefined)(t.pine).version===e.pineVersion)))||null}_compilePine(e){h.logNormal(`Compiling ${e.pineId} script`);const t=(0,d.translateScriptAsync2)(e.pineId,e.pineVersion||"last").then((({metaInfo:t,compileErrors:n})=>(h.logNormal(`Compiling ${e.pineId} is successful`),this.addPineMetaInfo((0,r.ensureDefined)(t),n.errors))));return t.catch((t=>{t instanceof c.PineCompileFailErrorImpl&&this.addPineMetaInfo(t.metaInfo,t),h.logNormal(`Compiling ${e.pineId} is failed`)})),t}}function v(e){e.description_localized=i.t(e.description,{context:"study"},n(783477))}function S(e,t){const n=new l.StudyMetaInfo(t).state();(0,s.migrateMetaInfoAndPropState)(n);const o=new l.StudyMetaInfo(n);let i=!0;const r=e.findIndex((e=>e.id===o.id));if(-1===r)e.push(o);else{
const t=e[r],n=void 0!==t.pine?a.Version.parse(t.pine.version):null,l=void 0!==o.pine?a.Version.parse(o.pine.version):null;null===l||null===n||l.isGreaterOrEqual(n)?(t.removeDefaults(),e[r]=o):i=!1}return i&&o.createDefaults(),o}const L=(0,o.default)((()=>new m(window.ChartApiInstance)))},457965:(e,t,n)=>{n.d(t,{runOrSigninWithFeature:()=>l});var o=n(469959),i=n(708050),r=n(314802);const l=(e,t)=>{{if((0,r.isOnMobileAppPage)("any"))return void window.runOrSignIn(e,t);const n=[];if(t.paidAccountCheck&&n.push((()=>(0,o.paidAccountCheck)({successButtonText:t.paidAccountSuccessButtonText}))),window.is_authenticated)n.reduce(((e,t)=>e.then(t)),Promise.resolve()).then(e).catch((()=>{}));else{const n={source:t.source,sourceMeta:t.sourceMeta,feature:t.feature,mode:t.mode,startTrial:t.startTrial};(0,i.createRunOrSigniWithFeatureDialog)({signInSuccess:e,options:n})}}};window.TradingView.runOrSigninWithFeature=l}}]);