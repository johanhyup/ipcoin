"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[19719],{828473:(t,e,n)=>{n.d(e,{compareTwoCollectionsByIds:()=>_,findFirst:()=>p,indexOf:()=>g,intersect:()=>f,join:()=>m,lowerbound:()=>a,lowerboundExt:()=>r,mapEntriesGenerator:()=>R,moveAfter:()=>h,moveBefore:()=>u,moveToHead:()=>c,nestedMapGenerator:()=>b,removeItemFromArray:()=>x,subtract:()=>d,sum:()=>v,upperbound:()=>l});var i=n(650151);function o(t,e){return t<e}function r(t,e,n,i,o){let r=o-i;for(;0<r;){const o=r>>1,a=i+o;n(t(a),e)?(i=a+1,r-=o+1):r=o}return i}function a(t,e,n,i=0,o=t.length){return r((e=>t[e]),e,n,i,o)}function s(t,e,n=0,i=t.length){return a(t,e,o,n,i)}function l(t,e,n,i=0,o=t.length){let r=o-i;for(;0<r;){const o=r>>1,a=i+o;n(e,t[a])?r=o:(i=a+1,r-=o+1)}return i}function d(t,e){return t.filter((t=>!e.includes(t)))}function c(t,e){const n=t.indexOf(e);return n<0?t.slice():[e].concat(t.slice(0,n)).concat(t.slice(n+1))}function h(t,e,n){const i=new Set(e),o=[],r=[],a=[];return t.forEach(((t,e)=>{i.has(t)?r.push(t):(o.push(t),a.push(e))})),n=n<t.length-1?s(a,n+1):o.length,o.splice(n,0,...r),{newItems:o,movedItemsStartIndex:n}}function u(t,e,n){const i=new Set(e),o=[],r=[],a=[];return t.forEach(((t,e)=>{i.has(t)?r.push(t):(o.push(t),a.push(e))})),n=n<=t.length-1?s(a,n):o.length,o.splice(n,0,...r),{newItems:o,movedItemsStartIndex:n}}function f(t,e){const n=new Set;return t.forEach((t=>{e.has(t)&&n.add(t)})),n}function m(t,e){const n=new Set(t);return e.forEach((t=>n.add(t))),n}function x(t,e){const n=t.indexOf(e);(0,i.assert)(-1!==n,"Item is not found"),t.splice(n,1)}function p(t,e){for(const n of t)if(e(n))return n;return null}function g(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function _(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n].id()!==e[n].id())return!1;return!0}function v(t){return t.reduce(((t,e)=>t+e),0)}function*R(t){for(const[e,n]of t)yield[e,n]}function*b(t,e){for(const[n,i]of t)if(void 0===e)for(const[,t]of i)yield[n,t];else{const t=i.get(e);void 0!==t&&(yield[n,t])}}},211414:(t,e,n)=>{n.d(e,{CircularCacheBuffer:()=>r});var i=n(650151);function o(t){const{prevItem:e,nextItem:n}=t;null!==e&&(e.nextItem=n),null!==n&&(n.prevItem=e)}class r{constructor(t=0,e=1.3){this._cache=new Map,this._lastItem=null,this._firstItem=null,this._size=t,this._sizeLimited=t>0,this._capacityFactor=e}set(t,e){const n={key:t,value:e,prevItem:this._lastItem,nextItem:null};null!==this._lastItem&&(this._lastItem.nextItem=n);const i=this._cache.get(t);return void 0!==i&&(o(i),i===this._firstItem&&(this._firstItem=i.nextItem)),this._cache.set(t,n),this._lastItem=n,null===this._firstItem&&(this._firstItem=n),this._sizeLimited&&this._cache.size>this._size*this._capacityFactor&&this._removeExtraItems(),this}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);if(void 0===e)return e;if(e===this._firstItem&&(this._firstItem=e.nextItem??e),e!==this._lastItem){o(e);const t=(0,i.ensureNotNull)(this._lastItem);t.nextItem=e,e.prevItem=t,e.nextItem=null,this._lastItem=e}return e.value
}clear(){this._cache.clear(),this._firstItem=null,this._lastItem=null}delete(t){const e=this._cache.get(t);return void 0!==e&&(o(e),e===this._lastItem&&(this._lastItem=e.prevItem),e===this._firstItem&&(this._firstItem=e.nextItem)),this._cache.delete(t)}*entries(){if(null!==this._firstItem)for(let t=this._firstItem;null!==t;t=t.nextItem)yield[t.key,t.value]}state(){const t=[];for(const[e,n]of this.entries())t.push([e,n]);return t}restoreState(t){for(const e of t)this.set(e[0],e[1])}_removeExtraItems(){const t=this._cache.size-this._size;let e=(0,i.ensureNotNull)(this._firstItem);for(let n=0;n<t;n+=1)this._cache.delete(e.key),e=(0,i.ensureNotNull)(e.nextItem);e.prevItem=null,this._firstItem=e}}},631088:(t,e,n)=>{n.d(e,{addExclusionArea:()=>M,addExclusionAreaByScope:()=>I,calcTextHorizontalShift:()=>b,clearRect:()=>m,createBoundCanvas:()=>v,createDisconnectedCanvas:()=>p,createDisconnectedCanvasByRenderingInfo:()=>g,disableSelection:()=>y,drawScaled:()=>x,drawWithExclusionAreaByScope:()=>T,fillRect:()=>f,getBindingRenderingInfo:()=>c,getContext2D:()=>h,getPrescaledContext2D:()=>u,measureText:()=>S,tryApplySuggestedCanvasBitmapSize:()=>R});var i=n(871934),o=n(650151),r=n(18900),a=n(5486),s=n(881025),l=n(638456);function d(t){return{horizontalPixelRatio:Math.max(1,t.bitmapSize.width/t.canvasElementClientSize.width),verticalPixelRatio:Math.max(1,t.bitmapSize.height/t.canvasElementClientSize.height)}}function c(t){return{...d(t),bitmapSize:t.bitmapSize,mediaSize:t.canvasElementClientSize}}function h(t){const e=(0,o.ensureNotNull)(t.getContext("2d"));return e.setTransform(1,0,0,1,0,0),e}function u(t){const e=(0,o.ensureNotNull)(t.getContext("2d")),n=(0,r.getCanvasDevicePixelRatio)(t);return e.setTransform(n,0,0,n,0,0),e}function f(t,e,n,i,o,r){t.save(),t.fillStyle=r,t.fillRect(e,n,i,o),t.restore()}function m(t,e,n,i,o,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,n,i,o),t.restore()}function x(t,e,n,i){t.save(),t.scale(e,n),i(),t.restore()}function p(t,e,n){const i=_(t);return void 0===n&&(n=(0,r.getCanvasDevicePixelRatio)(i)),i.width=e.width*n,i.height=e.height*n,i}function g(t,e){const{bitmapSize:n,mediaSize:i}=e,o=_(t);return o.style.width=`${i.width}px`,o.style.height=`${i.height}px`,o.width=n.width,o.height=n.height,o}function _(t){const e=t.createElement("canvas");return y(e),e}function v(t,e){const n=_((0,o.ensureNotNull)(t.ownerDocument));t.appendChild(n);const r=(0,i.bindCanvasElementBitmapSizeTo)(n,{type:"device-pixel-content-box",transform:(t,e)=>0===t.width||0===t.height?t:{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)}});return r.resizeCanvasElement(e),r}function R(t){const e=t.suggestedBitmapSize;return null!==e&&e.width>0&&e.height>0&&(t.applySuggestedBitmapSize(),!0)}function b(t,e){return"center"===t.textAlign?0:(0,s.isRtl)()?"start"===t.textAlign||"right"===t.textAlign?e:0:"start"===t.textAlign||"left"===t.textAlign?0:e}function y(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.msUserSelect="none",t.style.MozUserSelect="none",
t.style.webkitTapHighlightColor="transparent"}function I(t,e){const{context:n,horizontalPixelRatio:i,verticalPixelRatio:o,bitmapSize:r}=t;n.beginPath(),n.rect(0,0,r.width,r.height);for(let t=0;t<e.length;t++){let{x:r,y:a}=e[t];r*=i,a*=o,0!==t?n.lineTo(r,a):n.moveTo(r,a)}n.closePath(),n.clip("evenodd")}function M(t,e,n){I({context:t,...e},n)}function T(t,e,n){t.context.save(),I(t,e),n(),t.context.restore()}let w;function S(t,e,n){return w||function(){const t=document.createElement("canvas");t.width=0,t.height=0,(0,l.isMac)()&&(t.style.display="none",document.body.append(t)),w=(0,o.ensureNotNull)(t.getContext("2d")),w.textBaseline="alphabetic",w.textAlign="center"}(),e&&w.font!==e&&(w.font=e),n?n.getMetrics(w,t):(0,a.getMinTextMetrics)(w.measureText(t))}},18900:(t,e,n)=>{function i(t){return Math.max(1,t.ownerDocument?.defaultView?.devicePixelRatio||1)}n.d(e,{getCanvasDevicePixelRatio:()=>i})},937713:(t,e,n)=>{n.d(e,{lastMouseOrTouchEventInfo:()=>o,setLastMouseOrTouchEventInfo:()=>r});let i=(0,n(638456).supportTouch)()?{isTouch:!0,stylus:!1}:{isTouch:!1};function o(){return i}function r(t){i=t.isTouch?{isTouch:!0,stylus:t.stylus}:{isTouch:!1}}},509078:(t,e,n)=>{n.d(e,{AreaName:()=>i,HitTarget:()=>o,HitTestResult:()=>d,hitTestResultDataAreEqual:()=>l,shouldDefaultActionBeExecuted:()=>s,tryCallHandler:()=>a});var i,o,r=n(650151);function a(t,e,n,i){if(t.isTouch){if(void 0!==i)return i(t,e),!0}else if(void 0!==n)return n(t,e),!0;return!1}function s(t,e,n,i){return void 0!==e.executeDefaultAction&&(t.isTouch?Boolean(e.executeDefaultAction[i]):Boolean(e.executeDefaultAction[n]))}function l(t,e){return t&&e&&t.equals&&e.equals?t.equals(e):t===e}!function(t){t.Style="Style",t.Text="Text",t.Line="Line",t.Tooltip="Tooltip",t.Button="Button",t.SourceItemMove="SourceItemMove",t.AnchorPoint="AnchorPoint"}(i||(i={})),function(t){t[t.MovePointBackground=1]="MovePointBackground",t[t.Regular=2]="Regular",t[t.MovePoint=3]="MovePoint",t[t.ChangePoint=4]="ChangePoint",t[t.Custom=5]="Custom"}(o||(o={}));class d{constructor(t,e,n){this._target=t,this._data=e||null,this._eraseMarker=n}target(){return this._target}data(){return this._data}mergeData(t){this._data={...(0,r.ensureNotNull)(this._data),...t}}hasPressedMoveHandler(t){return null!==this._data&&function(t,e,n){if(t.isTouch){if(void 0!==n)return!0}else if(void 0!==e)return!0;return!1}(t,this._data.pressedMouseMoveHandler,this._data.touchMoveHandler)}tryCallMouseDownOrTouchStartHandler(t,e){return null!==this._data&&a(t,e,this._data.mouseDownHandler,this._data.touchStartHandler)}tryCallMouseUpOrTouchEndHandler(t,e){return null!==this._data&&a(t,e,this._data.mouseUpHandler,this._data.touchEndHandler)}tryCallMouseEnterHandler(t,e){return null!==this._data&&a(t,e,this._data.mouseEnterHandler)}tryCallMouseLeaveHandler(t,e){return null!==this._data&&a(t,e,this._data.mouseLeaveHandler)}tryCallMouseMoveHandler(t,e){return null!==this._data&&a(t,e,this._data.mouseMoveHandler)}tryCallClickOrTapHandler(t,e){return null!==this._data&&a(t,e,this._data.clickHandler,this._data.tapHandler)}
tryCallDblClickOrDblTapHandler(t,e){return null!==this._data&&a(t,e,this._data.doubleClickHandler,this._data.doubleTapHandler)}tryCallContextMenuHandler(t,e){return null!==this._data&&a(t,e,this._data.contextMenuHandler,this._data.touchContextMenuHandler)}eraseMarker(){return this._eraseMarker}}},985429:(t,e,n)=>{n.d(e,{intervalsVisibilitiesDefaults:()=>i});const i={ticks:!0,seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,weeksFrom:1,weeksTo:52,months:!0,monthsFrom:1,monthsTo:12,ranges:!0}},665798:(t,e,n)=>{n.r(e),n.d(e,{addHorizontalLineToPath:()=>h,addLineToPath:()=>T,addPixelPerfectLineToPath:()=>S,addVerticalLineToPath:()=>f,clearRectWithGradient:()=>d,clipPolygonByEdge:()=>D,computeDashPattern:()=>M,createCircle:()=>b,drawHorizontalLine:()=>u,drawLine:()=>w,drawPixelPerfectLine:()=>P,drawPoly:()=>y,drawRoundRect:()=>g,drawRoundRectWithInnerBorder:()=>_,drawVerticalLine:()=>m,fillRectInnerBorder:()=>c,fillRectWithBorder:()=>R,scaleDrawRoundRectRadii:()=>x,scaledDashPattern:()=>v,setLineStyle:()=>I});var i=n(86441),o=n(5531),r=n(666574),a=n(497503),s=n(631088),l=n(347441);function d(t,e,n,i,o,r,a){t.save(),t.globalCompositeOperation="copy";const s=t.createLinearGradient(0,0,0,o);s.addColorStop(0,r),s.addColorStop(1,a),t.fillStyle=s,t.fillRect(e,n,i,o),t.restore()}function c(t,e,n,i,o,r){t.fillRect(e+r,n,i-2*r,r),t.fillRect(e+r,n+o-r,i-2*r,r),t.fillRect(e,n,r,o),t.fillRect(e+i-r,n,r,o)}function h(t,e,n,i){const o=t.lineWidth%2?.5:0;t.moveTo(n,e+o),t.lineTo(i,e+o)}function u(t,e,n,i){t.beginPath(),h(t,e,n,i),t.stroke()}function f(t,e,n,i){const o=t.lineWidth%2?.5:0;t.moveTo(e+o,n),t.lineTo(e+o,i)}function m(t,e,n,i){t.beginPath(),f(t,e,n,i),t.stroke()}function x(t,e){return Array.isArray(t)?t.map((t=>Math.round(t*e))):Math.round(t*e)}function p(t,e){return Array.isArray(t)?t.map((t=>0===t?t:t+e)):t+e}function g(t,e,n,i,o,r,a){let s,l,d,c;if(Array.isArray(r))if(2===r.length){const t=Math.max(0,r[0]),e=Math.max(0,r[1]);s=t,l=t,d=e,c=e}else{if(4!==r.length)throw new Error("Wrong border radius - it should be like css border radius");s=Math.max(0,r[0]),l=Math.max(0,r[1]),d=Math.max(0,r[2]),c=Math.max(0,r[3])}else{const t=Math.max(0,r);s=t,l=t,d=t,c=t}a||t.beginPath(),t.moveTo(e+s,n),t.lineTo(e+i-l,n),0!==l&&t.arcTo(e+i,n,e+i,n+l,l),t.lineTo(e+i,n+o-d),0!==d&&t.arcTo(e+i,n+o,e+i-d,n+o,d),t.lineTo(e+c,n+o),0!==c&&t.arcTo(e,n+o,e,n+o-c,c),t.lineTo(e,n+s),0!==s&&t.arcTo(e,n,e+s,n,s)}function _(t,e,n,i,o,r,s=0,l=0,d="",c=a.LineStyle.Solid){if(t.save(),!l||!d||d===r)return g(t,e,n,i,o,s),t.fillStyle=r,t.fill(),void t.restore();const h=l/2;if("transparent"!==r){const h="transparent"!==d&&c!==a.LineStyle.Solid;g(t,h?e:e+l,h?n:n+l,h?i:i-2*l,h?o:o-2*l,h?s:p(s,-l)),t.fillStyle=r,t.fill()}if("transparent"!==d){g(t,e+h,n+h,i-l,o-l,p(s,-h)),t.lineWidth=l,t.strokeStyle=d,I(t,c),t.closePath(),t.stroke()}t.restore()}function v(t,e){return e=Math.max(1,e),t.map((t=>t*e))}function R(t,e,n,i,o,a,l,d,c){const{context:h}=t,f=a%2/2,m=e+f,x=i+f
;let p,g;if(d){const{borderMode:t,borderWidth:s,color:l,dashPattern:c,lineStyle:u}=d;switch(t){case"outer":{const t=-a/2-s/2,e=-s/2;g={left:m+t,right:x-t,top:n+e,bottom:o-e};break}case"center":{const t=s%2/2;g={left:e+t,right:i+t,top:n+t,bottom:o+t};break}case"inner":{const t=-a/2+s/2,e=s/2;g={left:m+t,right:x-t,top:n+e,bottom:o-e}}}h.strokeStyle=l,h.lineWidth=s;let f=-1;c?h.setLineDash(v(c,s)):void 0!==u&&(I(h,u),u===r.LINESTYLE_SOLID&&(f=1)),p={left:g.left+f*s/2,top:g.top+f*s/2,right:g.right-f*s/2,bottom:g.bottom-f*s/2}}if(l&&(h.fillStyle=l.color,p||(p={left:m-a/2,right:x+a/2,top:n,bottom:o}),h.fillRect(p.left,p.top,p.right-p.left,p.bottom-p.top)),c){const{lineWidth:r,lineColor:a,lineStyle:l,excludeBoundaries:d}=c;h.save(),h.lineCap="butt",h.lineWidth=r,h.strokeStyle=a,I(h,l);const f=()=>u(h,Math.floor((n+o)/2),e,i);d?(0,s.drawWithExclusionAreaByScope)(t,d,f):f(),h.restore()}g&&h.strokeRect(g.left,g.top,g.right-g.left,g.bottom-g.top)}function b(t,e,n,i){t.beginPath(),t.arc(e,n,i,0,2*Math.PI,!1),t.closePath()}function y(t,e,n){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(const n of e)t.lineTo(n.x,n.y);t.closePath(),t.stroke(),n&&t.fill()}function I(t,e){let n=[];e!==r.LINESTYLE_SOLID&&(n=M(t.lineWidth,e)),t.setLineDash(n)}function M(t,e){return[[t,2*t],[5*t,6*t],[6*t,6*t],[t,4*t],[2*t,t]][e-1]}function T(t,e,n,i,o){t.moveTo(e,n),t.lineTo(i,o)}function w(t,e,n,i,o){isFinite(e)&&isFinite(i)&&isFinite(n)&&isFinite(o)&&(t.beginPath(),T(t,e,n,i,o),t.stroke())}function S(t,e,n,i,o,r){const{horizontalPixelRatio:a,verticalPixelRatio:s}=r;let l;return e===i?(l=[Math.round(e*a),n*s,Math.round(e*a),o*s],f(t,l[0],l[1],l[3])):n===o?(l=[e*a,Math.round(n*s),i*a,Math.round(n*s)],h(t,l[1],l[0],l[2])):(l=[e*a,n*s,i*a,o*s],T(t,l[0],l[1],l[2],l[3])),l}function P(t,e,n,i,o,r=l.dpr1PixelRatioInfo){t.beginPath(),S(t,e,n,i,o,r),t.stroke()}function D(t,e,n,r){const a=(0,i.equalPoints)(n,r[0])?(0,i.equalPoints)(n,r[1])?null:r[1]:r[0];return null!==t&&null!==a?(0,o.intersectPolygonAndHalfplane)(t,(0,i.halfplaneThroughPoint)((0,i.lineThroughPoints)(e,n),a)):null}},968720:(t,e,n)=>{n.d(e,{PriceAxisViewRenderer:()=>u,hittestByData:()=>h});var i=n(86441),o=n(934026),r=n(937713),a=n(881025),s=n(631088),l=n(509078),d=n(665798);const c=new Path2D("M4.09.93c.4.16.75.4 1.02.73a5.47 5.47 0 0 0-3.78 3.27A2.5 2.5 0 0 1 3.2.77c.31 0 .61.06.89.16Zm8.24 3.35a2.5 2.5 0 0 0-3.27-3.23c-.38.16-.7.4-.97.7a5.47 5.47 0 0 1 3.56 3.5c.3-.26.53-.6.68-.97Zm-3.15-.84a4.5 4.5 0 1 0-5.5 7.12 4.5 4.5 0 0 0 5.5-7.12ZM6 4h1v4H4V7h2V4Z");function h(t,e){const n=(0,r.lastMouseOrTouchEventInfo)().isTouch?10:0,a=t.hitTestData;if(void 0===a||!t.visible)return null;const{itemBox:s,clickHandler:d,tooltip:c}=a;if(s){const r=(0,i.box)(new i.Point(s.min.x-n,s.min.y-n),new i.Point(s.max.x+n,s.max.y+n));if((0,o.pointInBox)(e,r))return new l.HitTestResult(t.hitTarget??l.HitTarget.Custom,{clickHandler:d?.bind(null,e),tapHandler:d?.bind(null,e),hoverModelFromAxis:a.hoverModelFromAxis,activeItem:a.activeItem,tooltip:c})}return null}class u{constructor(t,e){this._bodyBox=null,this.setData(t,e)
}setData(t,e){this._data=t,this._commonData=e}lastDrawnBodyBox(){return this._bodyBox}draw(t,e,n,o,r){const l=this._data,{mediaSize:c,bitmapSize:h,horizontalPixelRatio:u,verticalPixelRatio:f}=e;if(!l.visible||this._isOutOfScreen(n,c.height))return;const m=this._commonData,x=void 0!==l.labelIcon,p=n.paddingTop+m.additionalPaddingTop,g=n.paddingBottom+m.additionalPaddingBottom,{paddingOuter:_,paddingInner:v,fontSize:R,borderSize:b}=n,y=l.ignoreAdditionalPaddingInner?0:n.additionalPaddingInner;let I=l.text,M=l.textColor||m.textColor,T=l.secondLine||"",w=m.secondLineTextColor||M,S=l.thirdLine||"";const P=m.thirdLineTextColor||M;0===T.length&&(T=S,w=P,S=""),0===I.length&&(I=T,M=w,T=S,w=P,S=""),t.save(),void 0!==m.globalAlpha&&(t.globalAlpha*=m.globalAlpha),t.font=n.font;const D=o.yMidCorrection(t,I)*f,B=R+p+g,C=(l.labelIconMinWidth??0)*u,A=Boolean(T),k=Boolean(S),z=v+_+y,H=[Math.ceil(o.measureText(t,I)),A?Math.ceil(o.measureText(t,T)):0,k?Math.ceil(o.measureText(t,S)):0],L=Math.max(1,Math.floor(f));let E=Math.round(B*f);E%2!=L%2&&(E+=1);const N=Math.round((R+n.lineSpacing)*f),F=Math.round(2*(R+n.lineSpacing)*f),O=Math.max(1,Math.floor(b*u)),W=l.separatorVisible?O:0,V=l.borderVisible?O:0,q=x?Math.max(E,C):Math.round((Math.max(...H)+z)*u),$=Math.round(y*u),j=h.width,U=Math.ceil(v*u),G=Math.round((m.fixedCoordinate??m.coordinate)*f)-Math.floor(.5*f),Z=Math.floor(G+L/2-E/2),Y=Z+E,J="right"===r,K=void 0!==l.xCoord?Math.round(l.xCoord*u)+(J?1:-1)*Math.round(q/2):J?j-W:W;let Q,X=K;const tt=l.backgroung??m.background;t.fillStyle=tt;const et=2*f;if(t.textAlign=J?"right":"left",t.textBaseline="middle",J?(X=K-q,Q=K-$-U+W):(X=K+q,Q=K+$+U-W),this._bodyBox=null,I||x){const n=k?E+F:A?E+N:E,o=m.borderColor??tt,r=void 0!==l.xCoord?et:0;if(((e,o,a)=>{if(J){(0,d.drawRoundRectWithInnerBorder)(t,X,Z,q,n,e,l.overridenRadius?(0,d.scaleDrawRoundRectRadii)(l.overridenRadius,f):[et,r,r,et],V,o,a);const s=(0,i.point)(X/u,Z/f),c=s.add((0,i.point)(q/u,n/f));this._bodyBox=(0,i.box)(s,c)}else{(0,d.drawRoundRectWithInnerBorder)(t,K,Z,q,n,e,l.overridenRadius?(0,d.scaleDrawRoundRectRadii)(l.overridenRadius,f):[r,et,et,r],V,o,a);const s=(0,i.point)(K/u,Z/f),c=s.add((0,i.point)(q/u,n/f));this._bodyBox=(0,i.box)(s,c)}})(tt,o,m.borderStyle),x){switch(l.labelIcon){case 0:this._drawPlusIcon(t,K,X,Z,G,Y,L);break;case 1:this._drawClockExistingAlertIcon(t,K,X,e,Z,n)}return void t.restore()}t.save(),t.translate(Q,(Z+Y)/2+D),(0,s.drawScaled)(t,u,f,(()=>{t.fillStyle=M,t.fillText(I,0,0)})),t.restore()}A&&(t.fillStyle=w,t.save(),t.translate(Q,(Z+Y)/2+D+N),(0,s.drawScaled)(t,u,f,(()=>{t.fillText((0,a.startWithLTR)(T),0,0)})),t.restore()),k&&(t.fillStyle=P,t.save(),t.translate(Q,(Z+Y)/2+D+F),(0,s.drawScaled)(t,u,f,(()=>{t.fillText((0,a.startWithLTR)(S),0,0)})),t.restore()),t.restore()}topBottomTotalHeight(t){const e=this._lines();if(!this._data.visible||0===e)return{top:0,bottom:0,total:0};const n=t.fontSize/2+t.paddingTop+this._commonData.additionalPaddingTop,i=(e-.5)*t.fontSize+(e-1)*t.lineSpacing+t.paddingBottom+this._commonData.additionalPaddingBottom;return{top:n,
bottom:i,total:n+i}}hitTest(t){return h(this._data,t)}_drawPlusIcon(t,e,n,i,o,r,a){t.fillStyle=this._commonData.textColor,t.strokeStyle=this._commonData.textColor,t.lineWidth=a;const s=Math.abs(e-n);let l=Math.round(.35*s);l%2!=a%2&&(l+=1);let d=Math.round(.65*s);d%2!=a%2&&(d+=1);const c=Math.floor((s-l)/2),h=Math.min(e,n),u=h+Math.floor(s/2-a/2);t.fillRect(h+c,o,l,a),t.fillRect(u,i+c,a,l),t.beginPath(),t.arc(u+a/2,o+a/2,d/2,0,2*Math.PI,!1),t.stroke()}_drawClockExistingAlertIcon(t,e,n,i,o,r){t.fillStyle=this._commonData.textColor;const a=Math.abs(e-n),s=Math.min(e,n),{horizontalPixelRatio:l,verticalPixelRatio:d}=i,h=a/(23*l),u=a/(23*d),f=12*l*h,m=10.73*d*u,x=Math.floor((a-f)/2),p=Math.floor((r-m)/2)-1;t.save(),t.translate(s+x,o+p),t.scale(l*h,d*u),t.fill(c),t.restore()}_lines(){const t=this._data;return(t.text?1:0)+(t.secondLine?1:0)+(t.thirdLine?1:0)}_isOutOfScreen(t,e){const n=this._commonData,i=n.fixedCoordinate??n.coordinate,{total:o}=this.topBottomTotalHeight(t),r=o/this._lines();return i-r/2-3>e||i+(o-r/2)+3<0}}},347808:(t,e,n)=>{n.d(e,{PriceAxisView:()=>r});var i=n(968720),o=n(432059);class r{constructor(t){this._commonRendererData={coordinate:0,textColor:"#FFF",background:"#000",additionalPaddingBottom:0,additionalPaddingTop:0},this._axisRendererData={text:"",visible:!1,separatorVisible:!0,borderVisible:!1,ignoreAdditionalPaddingInner:!1},this._paneRendererData={text:"",visible:!1,separatorVisible:!1,borderVisible:!1,ignoreAdditionalPaddingInner:!0},this._invalidated=!0,this._active=!1,this._axisRenderer=new(t||i.PriceAxisViewRenderer)(this._axisRendererData,this._commonRendererData),this._paneRenderer=new(t||i.PriceAxisViewRenderer)(this._paneRendererData,this._commonRendererData)}setActive(t){this._active=t}text(){return this._updateRendererDataIfNeeded(),this._axisRendererData.text}secondLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.secondLine}thirdLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.thirdLine}background(){return this._updateRendererDataIfNeeded(),this._commonRendererData.background}color(){return this._updateRendererDataIfNeeded(),this.generateTextColor(this.background())}generateTextColor(t){return(0,o.colorFromBackground)(t)}coordinate(){return this._updateRendererDataIfNeeded(),this._commonRendererData.coordinate}floatCoordinate(){return this._updateRendererDataIfNeeded(),this._commonRendererData.floatCoordinate??this._commonRendererData.coordinate}update(t){this._invalidated=!0}topBottomTotalHeight(t){this._updateRendererDataIfNeeded();const{top:e,bottom:n,total:i}=this._axisRenderer.topBottomTotalHeight(t),{top:o,bottom:r,total:a}=this._paneRenderer.topBottomTotalHeight(t);return{top:Math.max(e,o),bottom:Math.max(n,r),total:Math.max(i,a)}}getFixedCoordinate(){return this._commonRendererData.fixedCoordinate||0}setFixedCoordinate(t){this._commonRendererData.fixedCoordinate=t}isVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible||this._paneRendererData.visible}isAxisLabelVisible(){
return this._updateRendererDataIfNeeded(),this._axisRendererData.visible}isPaneLabelVisible(){return this._updateRendererDataIfNeeded(),this._paneRendererData.visible}renderer(){return this._updateRendererDataIfNeeded(),this._axisRenderer}paneRenderer(){return this._updateRendererDataIfNeeded(),this._paneRenderer}setPaneRendererLabelIcon(t){this._paneRendererData.labelIcon=t}setPaneLabelVisible(t){this._paneRendererData.visible=t,this._invalidated=!0}ignoreAlignment(){return!1}_updateRendererDataIfNeeded(){this._invalidated&&(this._commonRendererData.fixedCoordinate=void 0,this._updateRendererData(this._axisRendererData,this._paneRendererData,this._commonRendererData),this._invalidated=!1)}}},941654:(t,e,n)=>{n.d(e,{isRootPath:()=>s,propertyByPath:()=>a,propertyPathForSource:()=>o});var i=n(650151);function o(t,e="properties"){return`charts.${t.model().id()}.sources.${t.id()}.${e}`}function r(t,e){if(e.length<4)throw new Error("Invalid chart path");const n=function(t,e){return(0,i.ensureDefined)(t.getAll().find((t=>t.hasModel()&&t.model().model().id()===e))).model().model()}(t,e[0]),o=e[1];if("sources"===o){return(0,i.ensureNotNull)(n.dataSourceForId(e[2])).propertyByPath(e.slice(3).join("."))}throw new Error(`Invalid chart path, unknown root: ${o}`)}function a(t,e){const n=e.split(".");if(n.length<1)throw new Error("Invalid path");const i=n[0];if("charts"===i)return r(t,n.slice(1));throw new Error(`Invalid path, unknown root: ${i}`)}function s(t){return t.startsWith("charts.")}},347441:(t,e,n)=>{n.d(e,{dpr1PixelRatioInfo:()=>o,equalPixelRatios:()=>a,equalRenderingInfos:()=>r});var i=n(871934);const o={horizontalPixelRatio:1,verticalPixelRatio:1};function r(t,e){return(0,i.equalSizes)(t.mediaSize,e.mediaSize)&&(0,i.equalSizes)(t.bitmapSize,e.bitmapSize)&&a(t,e)}function a(t,e){return t.horizontalPixelRatio===e.horizontalPixelRatio&&t.verticalPixelRatio===e.verticalPixelRatio}},5486:(t,e,n)=>{n.d(e,{TextWidthCache:()=>r,getMinTextMetrics:()=>o});var i=n(211414);function o(t){return{width:t.width,actualBoundingBoxAscent:t.actualBoundingBoxAscent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}class r{constructor(t=150){this._fontStyle="",this._cache=new i.CircularCacheBuffer(t,1.5)}reset(){this._cache.clear()}measureText(t,e){return this.getMetrics(t,e).width}yMidCorrection(t,e){const n=this.getMetrics(t,e);return void 0!==n.actualBoundingBoxAscent&&void 0!==n.actualBoundingBoxDescent?(n.actualBoundingBoxAscent-n.actualBoundingBoxDescent)/2:0}getMetrics(t,e){t.font!==this._fontStyle&&(this.reset(),this._fontStyle=t.font);const n=this._cache.get(e);if(void 0!==n)return n;const i=t.textBaseline;t.textBaseline="middle";const r=o(t.measureText(e));return t.textBaseline=i,0===r.width&&e.length||this._cache.set(e,r),r}}},387964:(t,e,n)=>{function i(t){let e;if("object"!=typeof t||null==t||"number"==typeof t.nodeType)e=t;else if(t instanceof Date)e=new Date(t.valueOf());else if(Array.isArray(t)){e=[];let n=0;const o=t.length
;for(;n<o;n++)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=i(t[n]))}else{e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=i(t[n]))}return e}n.d(e,{deepCopy:()=>i})}}]);