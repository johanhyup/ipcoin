(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[25104,73105,84300,88035],{489928:e=>{e.exports={}},972525:e=>{e.exports={}},355734:(e,t,s)=>{"use strict";s.d(t,{FOCUSABLE_SELECTOR:()=>n,createScopedVisibleElementFilter:()=>u,getActiveElementSelectors:()=>c,isHTMLOrSVGElement:()=>d,isInertRoot:()=>a,isVisibilityVisible:()=>o});const i=["button","fieldset","optgroup","option","select","textarea","input"],n=["button","input","select","textarea","a[href]","audio[controls]","video[controls]",'[tabindex="0"]','[contenteditable="true"]'].map((e=>i.includes(e)?`${e}:not(:disabled)`:e)).map((e=>`${e}:not([tabindex="-1"])`)).join(",");function o(e){return"visible"===getComputedStyle(e).visibility}function r(e,t){if(e.matches("[inert],[inert] *"))return!0;let s=e;for(;s!==t&&null!==s;){if(l(s))return!0;s=s.parentElement}return!1}function a(e){return e.matches("[inert]")||l(e)}function l(e){return"none"===getComputedStyle(e).display}function c(){return n}function u(e){return t=>o(t)&&!r(t,e)}function d(e){return e instanceof HTMLElement||e instanceof SVGElement}},873509:(e,t,s)=>{"use strict";s.d(t,{getFirstDescendant:()=>o,getLastDescendant:()=>r,getPreviousNonParent:()=>a,getSelectorTreeWalker:()=>n});var i=s(355734);const n=(e=document.documentElement,t)=>document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,(e=>t=>{if(1!==t.nodeType)return NodeFilter.FILTER_SKIP;const s=t;return(0,i.isInertRoot)(s)?NodeFilter.FILTER_REJECT:(0,i.isVisibilityVisible)(s)&&s.matches(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP})(t));function o(e){return e.currentNode=e.root,e.nextNode()}function r(e){for(e.currentNode=e.root;null!==e.lastChild(););return e.currentNode===e.root?null:e.currentNode}function a(e){const t=e.currentNode;let s=e.previousNode();for(;s&&s.contains(t);)s=e.previousNode();return s}},351440:(e,t,s)=>{"use strict";async function i(){return Promise.all([s.e(33334),s.e(75816),s.e(93703),s.e(62093),s.e(44524),s.e(21356),s.e(99325),s.e(40702),s.e(82321),s.e(62526),s.e(97486)]).then(s.bind(s,826618))}s.d(t,{importPopupRender:()=>i})},613122:(e,t,s)=>{"use strict";s.r(t),s.d(t,{closeCurrentPublicationViewPopup:()=>u,getPublicationType:()=>r,importEntryComponent:()=>a,openPublicationViewPopup:()=>h,preloadPublicationViewPopup:()=>d});var i=s(783359),n=s(351440);const o=new Set([i.ScriptType.Indicator,i.ScriptType.Library,i.ScriptType.Strategy,"indicator","library","strategy"]);function r({isVideo:e,isScript:t,scriptType:s}){switch(!0){case e:return"video";case t:case o.has(s||""):return"script";default:return"idea"}}async function a(e){switch(e){case"video":
return Promise.all([s.e(23542),s.e(93703),s.e(46445),s.e(44178),s.e(44524),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(22164),s.e(46489),s.e(99325),s.e(53799),s.e(65857),s.e(36010),s.e(29800),s.e(23141),s.e(49742),s.e(29296),s.e(95083),s.e(73399),s.e(62234),s.e(16356),s.e(77280),s.e(14742),s.e(30358),s.e(21251),s.e(28101),s.e(74729),s.e(64797),s.e(3062),s.e(32175),s.e(30449),s.e(87393),s.e(55057),s.e(39963),s.e(80774),s.e(52017),s.e(2220),s.e(31234),s.e(91248),s.e(68827),s.e(23407),s.e(610),s.e(43602),s.e(65642),s.e(74420),s.e(56261),s.e(73131),s.e(49180),s.e(13502),s.e(99884),s.e(94777),s.e(35365),s.e(83108),s.e(33542),s.e(22367),s.e(9061),s.e(82321),s.e(24951),s.e(13217),s.e(43052),s.e(23460),s.e(47940),s.e(92311),s.e(1423),s.e(67412),s.e(97071)]).then(s.bind(s,399255)).then((e=>e.PublicationViewVideo));case"script":return Promise.all([s.e(72423),s.e(93703),s.e(46445),s.e(44178),s.e(44524),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(22164),s.e(46489),s.e(99325),s.e(53799),s.e(65857),s.e(36010),s.e(25480),s.e(29800),s.e(23141),s.e(49742),s.e(29296),s.e(95083),s.e(73399),s.e(62234),s.e(16356),s.e(77280),s.e(14742),s.e(30358),s.e(21251),s.e(28101),s.e(74729),s.e(64797),s.e(3062),s.e(32175),s.e(30449),s.e(87393),s.e(55057),s.e(39963),s.e(80774),s.e(52017),s.e(2220),s.e(31234),s.e(91248),s.e(68827),s.e(81397),s.e(23407),s.e(610),s.e(43602),s.e(65642),s.e(74420),s.e(56261),s.e(81354),s.e(73131),s.e(49180),s.e(13502),s.e(99884),s.e(94777),s.e(35365),s.e(83108),s.e(33542),s.e(46500),s.e(48120),s.e(82321),s.e(24951),s.e(13217),s.e(38157),s.e(43052),s.e(23460),s.e(47940),s.e(42570),s.e(92311),s.e(1423),s.e(67412),s.e(14675)]).then(s.bind(s,730034)).then((e=>e.PublicationViewScript));case"idea":return Promise.all([s.e(73466),s.e(93703),s.e(46445),s.e(44178),s.e(44524),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(22164),s.e(46489),s.e(99325),s.e(53799),s.e(65857),s.e(36010),s.e(29800),s.e(23141),s.e(49742),s.e(29296),s.e(95083),s.e(73399),s.e(62234),s.e(16356),s.e(77280),s.e(14742),s.e(30358),s.e(21251),s.e(28101),s.e(74729),s.e(64797),s.e(3062),s.e(32175),s.e(30449),s.e(87393),s.e(55057),s.e(39963),s.e(80774),s.e(52017),s.e(2220),s.e(31234),s.e(91248),s.e(68827),s.e(81397),s.e(23407),s.e(610),s.e(43602),s.e(65642),s.e(74420),s.e(56261),s.e(73131),s.e(49180),s.e(13502),s.e(99884),s.e(94777),s.e(35365),s.e(83108),s.e(33542),s.e(46500),s.e(82321),s.e(24951),s.e(13217),s.e(43052),s.e(23460),s.e(47940),s.e(92311),s.e(1423),s.e(67412),s.e(84822)]).then(s.bind(s,564166)).then((e=>e.PublicationViewIdea))}}let l=!1;async function c(){return l=!0,Promise.all([s.e(83512),s.e(58214)]).then(s.bind(s,661254))}async function u(){if(!l)return;(await c()).closeCurrentPublicationViewPopup()}async function d(e){c(),(0,n.importPopupRender)(),a(e)}async function h(e){(await c()).openPublicationViewPopup(e)}},254526:(e,t,s)=>{"use strict";s.d(t,{SYMBOL_TYPE_BLACK_LIST:()=>i});const i=new Set(["spread","economic"])},783359:(e,t,s)=>{"use strict";var i,n,o;s.d(t,{CONTAINS_IO_SCRIPT_TAG:()=>r,PublicationMethod:()=>n,ScriptAccessType:()=>i,
ScriptType:()=>o}),function(e){e[e.Public=1]="Public",e[e.Protected=2]="Protected",e[e.InviteOnly=3]="InviteOnly"}(i||(i={})),function(e){e[e.New=0]="New",e[e.Edit=1]="Edit",e[e.Update=2]="Update"}(n||(n={})),function(e){e[e.Indicator=1]="Indicator",e[e.Strategy=2]="Strategy",e[e.Library=3]="Library"}(o||(o={}));const r="containsioscript"},572570:(e,t,s)=>{"use strict";function i(e){if(null!=e&&"boolean"!=typeof e&&!isNaN(Number(e)))return Number(e)}function n(e){if(null!=e&&"number"!=typeof e&&"boolean"!=typeof e)return String(e)}s.d(t,{toNumberOrUndefined:()=>i,toStringOrUndefined:()=>n})},780792:(e,t,s)=>{"use strict";s.d(t,{AbstractIndicator:()=>a});var i=s(338619),n=s(79342),o=s(625545);s(673747);const r=(0,i.getLogger)("GUI.Blocks.AbstractIndicator");class a{constructor(e){this._classSuffix="",this._quoteSessionPrefix="abstract-indicator",this._shortMode=!1,this._showTooltip=!0,this._subscribed=!1,this._tooltipType="custom",this._lastTooltipText="",this._quoteSession=e.quoteSession}getValue(){return this._value}getTooltipText(){return this._labelMap[this._value]||""}getLabel(){return this._labelMap[this._value]||""}getElement(){return this._el}update(e,t){this._updateValue(e,t),this._render()}setTooltipEnabled(e=!1){this._showTooltip!==e&&(this._showTooltip=e,this._renderTooltip())}enableShortMode(){!0!==this._shortMode&&(this._shortMode=!0,this._render())}disableShortMode(){!1!==this._shortMode&&(this._shortMode=!1,this._render())}isShortModeEnabled(){return this._shortMode}start(){!this._subscribed&&this._symbolName&&(this._quoteSession||(this._quoteSession=(0,o.getQuoteSessionInstance)("simple")),this._quoteSession.subscribe(this._getQuoteSessionId(),this._symbolName,this.update.bind(this)),this._subscribed=!0)}stop(){this._subscribed&&this._quoteSession&&this._symbolName&&(this._quoteSession.unsubscribe(this._getQuoteSessionId(),this._symbolName),this._subscribed=!1)}setSessionStatusIcon(e){this._sessionStatusIcon!==e&&(this._sessionStatusIcon=e,this._render())}_init(e){this._el=e.el?e.el:document.createElement("span"),this._el.innerHTML="",this._classMap=e.classMap,this._iconClassMap=e.iconClassMap,this._labelMap=e.labelMap,this._showTooltip=e.showTooltip,this._classSuffix=e.classSuffix,this._symbolName=e.symbol,this._sessionStatusIcon=e.sessionStatusIcon,this._onValueChange=e.onValueChange,e.tooltipType&&(this._tooltipType=e.tooltipType),this._quoteSessionGUID=(0,n.guid)(),!0===e.short&&this.enableShortMode(),e.data&&this._updateValue(e.data)}_clearClasses(){Object.values(this._classMap).map((e=>{this._el.classList.remove(`${e}`),this._el.classList.remove(`${e}${this._classSuffix}`)}))}_render(){this._renderClasses(),this._renderTooltip(),this._renderLabel()}_renderLabel(){this._el.textContent=this.getLabel()}_updateValue(e,t){const s=this._getValueFromData(e);(t||s!==this._value)&&(this._value=s,this._onValueChange?.(this._value))}_renderClasses(){const e=this._el.classList;e.add(this._componentClass,this._componentClass+this._classSuffix);const t=this._classMap[this._value]
;for(const s in this._classMap){const i=this._classMap[s];i&&(i===t?(e.add(i,i+this._classSuffix),this._sessionStatusIcon&&e.add(i+"__withIcon")):(e.remove(i,i+this._classSuffix),this._sessionStatusIcon&&e.remove(i+"__withIcon")))}!t&&this._value&&r.logWarn(`no className for status ${this._value}`)}_renderTooltip(){const e=this._showTooltip?this.getTooltipText():"";e!==this._lastTooltipText&&(this._lastTooltipText=e,this._el.setAttribute("title",e),"custom"===this._tooltipType&&this._el.classList.toggle("apply-common-tooltip",this._showTooltip))}_getQuoteSessionId(){return`${this._quoteSessionPrefix}.${this._quoteSessionGUID}`}}},719240:(e,t,s)=>{"use strict";s.d(t,{DataModeIndicator:()=>l});var i=s(444372),n=(s(466281),s(489928),s(780792));const o={connecting:"tv-data-mode--connecting",delayed:"tv-data-mode--delayed",delayed_streaming:"tv-data-mode--delayed",endofday:"tv-data-mode--endofday",forbidden:"tv-data-mode--forbidden",realtime:"tv-data-mode--realtime",snapshot:"tv-data-mode--snapshot",loading:"tv-data-mode--loading",replay:"tv-data-mode--replay"};function r(){return{connecting:i.t(null,{context:"data_mode_connecting_letter"},s(167040)),delayed:i.t(null,{context:"data_mode_delayed_letter"},s(800919)),delayed_streaming:i.t(null,{context:"data_mode_delayed_streaming_letter"},s(933088)),endofday:i.t(null,{context:"data_mode_end_of_day_letter"},s(918400)),forbidden:i.t(null,{context:"data_mode_forbidden_letter"},s(514149)),realtime:i.t(null,{context:"data_mode_realtime_letter"},s(650940)),snapshot:i.t(null,{context:"data_mode_snapshot_letter"},s(756757)),loading:"",replay:i.t(null,{context:"data_mode_replay_letter"},s(745540))}}const a={streaming:"realtime"};class l extends n.AbstractIndicator{constructor(e){super(e),this._quoteSessionPrefix="data-mode-indicator",this._componentClass="tv-data-mode",this._init(e)}getLabel(){return!0===this._shortMode?this._shortLabelMap[this._value]||"":super.getLabel()}setMode(e,t){this.update({values:{update_mode:e,update_mode_seconds:t}})}hide(){this._el.classList.add("i-hidden")}show(){this._el.classList.remove("i-hidden")}getTooltipText(){let e="";const t=this.getValue();if(""===t)return e;switch(t){case"delayed":e=i.t(null,void 0,s(369539));break;case"delayed_streaming":e=i.t(null,void 0,s(167476));break;default:e=this._labelMap[t]||e}return["delayed","delayed_streaming"].includes(t)&&(e=e.format({number:String(Math.round(this._modeInterval/60))})),e}_init(e={}){const t=Object.assign({},{classMap:o,classSuffix:"",data:{values:{update_mode:"connecting"}},labelMap:{connecting:i.t(null,void 0,s(366891)),delayed:i.t(null,void 0,s(739688)),delayed_streaming:i.t(null,void 0,s(739688)),endofday:i.t(null,void 0,s(328304)),forbidden:i.t(null,void 0,s(909161)),realtime:i.t(null,void 0,s(303058)),snapshot:i.t(null,void 0,s(988408)),loading:"",replay:i.t(null,void 0,s(38822))},modeInterval:600,short:!1,shortLabelMap:r(),showTooltip:!0,tooltipType:"custom"},e);this._modeInterval=t.modeInterval||600,this._shortLabelMap=t.shortLabelMap||r(),super._init(t),this._render()}
_getValueFromData(e){let t;return t=void 0!==e.values&&void 0!==e.values.update_mode?e.values.update_mode:this.getValue(),a[t]||t}_updateValue(e,t){void 0!==e.values&&void 0!==e.values.update_mode_seconds&&(this._modeInterval=e.values.update_mode_seconds),super._updateValue(e,t)}}},600303:(e,t,s)=>{"use strict";s.d(t,{MarketStatusIndicator:()=>a});var i=s(444372),n=(s(972525),s(780792));const o={invalid:"tv-market-status--invalid",market:"tv-market-status--market",out_of_session:"tv-market-status--out-of-session",post_market:"tv-market-status--post-market",pre_market:"tv-market-status--pre-market",loading:"tv-market-status--loading",holiday:"tv-market-status--holiday",replay:"tv-market-status--replay",delisted:"tv-market-status--delisted"},r={invalid:"tv-market-status__icon--invalid",market:"tv-market-status__icon--market",out_of_session:"tv-market-status__icon--out-of-session",post_market:"tv-market-status__icon--post-market",pre_market:"tv-market-status__icon--pre-market",loading:"tv-market-status__icon--loading",holiday:"tv-market-status__icon--holiday",replay:"tv-market-status__icon--replay",delisted:"tv-market-status__icon--delisted"};class a extends n.AbstractIndicator{constructor(e){super(e),this._quoteSessionPrefix="market-status-indicator",this._componentClass="tv-market-status",this._extraTitle="",this._init(e)}setStatus(e,t){const s={values:{current_session:"delisted"===this.getValue()?"delisted":e}};this.update(s,t)}getTooltipText(){let e=super.getTooltipText();return""===e||""!==this._extraTitle&&(e=`${e}, ${this._extraTitle}`),e}setExtraTitle(e){this._extraTitle=e}reset(){this._clearClasses(),this._labelEl.textContent="",this._extraTitle="",this._el.setAttribute("title",""),this._value=""}enableShortMode(e=!0){void 0!==this._labelEl&&this._labelEl.classList.add("i-hidden"),super.enableShortMode()}disableShortMode(){void 0!==this._labelEl&&this._labelEl.classList.remove("i-hidden"),super.disableShortMode()}_renderLabel(){this._labelEl.textContent=this.getLabel()}_getValueFromData(e){return e.values?.typespecs?.includes("discontinued")?"delisted":void 0!==e.values?.current_session?e.values.current_session:this.getValue()}_render(){this._renderLabelElement(),this._sessionStatusIcon?this._renderIconElement():this._renderDotElement(),super._render()}_init(e){const t=Object.assign({},function(){const e={invalid:i.t(null,void 0,s(652969)),market:i.t(null,void 0,s(241410)),out_of_session:i.t(null,void 0,s(762464)),post_market:i.t(null,void 0,s(673897)),pre_market:i.t(null,void 0,s(236018)),loading:i.t(null,void 0,s(786726)),holiday:i.t(null,void 0,s(987845)),delisted:i.t(null,void 0,s(254602)),replay:""};return{classMap:o,iconClassMap:r,classSuffix:"",data:{},extraTitle:"",labelMap:e,short:!1,showTooltip:!0,tooltipType:"custom"}}(),e);super._init(t),this.setExtraTitle(t.extraTitle),this._render()}_renderLabelElement(){void 0===this._labelEl&&(this._labelEl=document.createElement("span"),this._labelEl.classList.add(`${this._componentClass}__label`),
this._labelEl.classList.add(`${this._componentClass}__label${this._classSuffix}`),this._el.appendChild(this._labelEl))}_renderDotElement(){this._el.contains(this._iconEl)&&this._el.removeChild(this._iconEl),void 0===this._dotEl&&(this._dotEl=document.createElement("span"),this._dotEl.classList.add(`${this._componentClass}__dot`),this._dotEl.classList.add(`${this._componentClass}__dot${this._classSuffix}`),this._el.appendChild(this._dotEl))}_renderIconElement(){this._el.contains(this._dotEl)&&this._el.removeChild(this._dotEl),void 0===this._iconEl&&this._value&&(this._iconEl=document.createElement("span"),this._iconEl.classList.add(`${this._componentClass}__icon`),this._iconEl.classList.add(`${this._componentClass}__icon${this._classSuffix}`),this._el.appendChild(this._iconEl))}}},719718:(e,t,s)=>{"use strict";s.d(t,{adwordsAnalyticsEnabled:()=>r,createImage:()=>n,marketingAnalyticsEnabled:()=>o});var i=s(125226);function n(e){const t=document.createElement("img");return t.src=e,t}function o(){return(0,i.isFeatureEnabled)("marketing-analytics")}function r(){return(0,i.isFeatureEnabled)("adwords-analytics")}},384295:(e,t,s)=>{"use strict";s.d(t,{CmEvent:()=>i,trackCmEvent:()=>r});var i,n=s(719718);!function(e){e.PageView="visit",e.RegistrationCompleted="signup",e.TrialSignUp="trial",e.PaidPlanAcquired="psub"}(i||(i={}));const o=(e,t)=>`https://ad.doubleclick.net/ddm/activity/src=13919399;type=${e===i.PaidPlanAcquired?"wsales":"wcount"};cat=${e};${t?`cost=${t};`:""}u27=${function(e="_sp_"){const t=new RegExp(e+"id\\.[a-f0-9]+=([^;]+);?"),s=document.cookie.match(t);return s&&s[1]?s[1].split(".")[0]:""}()};u28=${window.user.id};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=${1e3*Math.random()}?`;function r(e,t){(0,n.createImage)(o(e,t))}},641261:(e,t,s)=>{"use strict";s.d(t,{GTagEvent:()=>h,trackGTagAdsEvent:()=>_});var i=s(251954),n=s(261030),o=s(314802),r=s(638456),a=s(588948),l=s(691805),c=s(719718);const u=()=>`https://www.googletagmanager.com/gtag/js?id=${(0,a.getInitData)().gadwId}`;let d=!1;var h;function _(e,t={}){if(d||!(0,c.adwordsAnalyticsEnabled)()||(0,o.isOnMobileAppPage)("any")||r.CheckMobile.iOS()||(0,r.isSymphonyEmbed)()||((0,a.updateInitData)(),(0,a.getInitData)().gadwId&&(d=!0,(0,l.appendScript)(u()),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("consent","default",{ad_storage:(0,n.getCookieSetting)(n.CookieSettings.Advertising)?"granted":"denied"}),window.gtag("config",(0,a.getInitData)().gadwId),i.subscribe(n.cookieSettingsChangeEvent,((e,t)=>{e===n.CookieSettings.Advertising&&window.gtag("consent","update",{ad_storage:t?"granted":"denied"})}),null))),!d)return;const s=(0,a.getInitData)().gadwId;window.gtag("event","conversion",{send_to:`${s}/${e}`,user_id:window.user.id,...t})}!function(e){e.PageView="kwnRCP6AwqsBEOTvvuED",e.TrialSignUp="6_gCCOyejsACEK3sq6gB",e.RegistrationCompleted="JzYhCIOr578CEK3sq6gB",e.PaidPlanAcquired="ca8iCNrG578CEK3sq6gB"}(h||(h={}))},665343:(e,t,s)=>{"use strict"
;s.d(t,{TwitterEvent:()=>i,trackTwitterEvent:()=>a});var i,n=s(719718),o=s(261030);!function(e){e.SiteVisit="o2eg2",e.TrialSignUp="o1wjo",e.RegistrationCompleted="o1wjq",e.PaidPlanAcquired="o1wjr"}(i||(i={}));const r=e=>[`https://analytics.twitter.com/i/adsct?txn_id=${e}&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0`,`https://t.co/i/adsct?txn_id=${e}&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"`];function a(e){(0,n.marketingAnalyticsEnabled)()&&(0,o.getCookieSetting)(o.CookieSettings.Analytics)&&r(e).map(n.createImage)}},66974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{environment:()=>o,getEnvironmentByHost:()=>n,isDebug:()=>l,isLocal:()=>r,isProd:()=>a});const i=new Set(["battle","staging","test","local"]);function n(e){return-1!==["i18n.tradingview.com","partial.tradingview.com","www.tradingview.com","wwwcn.tradingview.com"].indexOf(e)||-1!==["d33t3vvu2t2yu5.cloudfront.net","dwq4do82y8xi7.cloudfront.net","s.tradingview.com","s3.tradingview.com"].indexOf(e)||e.match(/^[a-z]{2}\.tradingview\.com/)||e.match(/prod-[^.]+.tradingview.com/)?"battle":e.includes("tradingview.com")||e.includes("staging")?"staging":"local"}function o(){const e=self.environment;return function(e){i.has(e)||console.warn("Invalid environment "+e)}(e),e}function r(){return"local"===o()}function a(){return"battle"===o()}function l(){return!a()}},196726:(e,t,s)=>{"use strict";s.d(t,{preventDefault:()=>n,preventScrollByWheelClick:()=>r,wrapHandlerWithPreventEvent:()=>o});var i=s(638456);function n(e){e.cancelable&&e.preventDefault()}function o(e){return t=>{n(t),e(t)}}function r(e){i.isChrome&&e.addEventListener("mousedown",(e=>{if(1===e.button)return e.preventDefault(),!1}))}},40763:(e,t,s)=>{"use strict";function i(e){return e.endsWith("_dly")}function n(e){return!!e&&(!(void 0===e.symbolname||!i(e.symbolname))||Boolean("permission_denied"===e.status&&e.values&&void 0!==e.values.alternative&&i(e.values.alternative)))}s.d(t,{isSfQuoteData:()=>n})},31214:(e,t,s)=>{"use strict";s.d(t,{reloginOrGoPro:()=>c,runOrGoPro:()=>l,runOrGoProWithoutSync:()=>a});var i=s(526225),n=s(590508),o=s(456335),r=s(802588);function a(e,t,s,i){(0,o.featureCheck)(t,i)?e():(0,n.createGoProDialog)({...s,runOrGoproWithFeatureCheckOptions:{featureCheck:()=>(0,o.featureCheck)(t,i),signInSuccess:e}})}async function l(e,t,s,n={}){const o=window.is_authenticated;window.is_authenticated&&window.user.is_pro&&await(0,i.syncUserData)("gopro"),o===window.is_authenticated?a(e,t,s,n):(0,r.showSignModal)({source:s.goproSource,feature:s.feature,signinSuccess:e})}async function c(e){const t=window.is_authenticated;window.is_authenticated&&window.user.is_pro&&await(0,i.syncUserData)("gopro"),t===window.is_authenticated?(0,n.createGoProDialog)(e):(0,r.showSignModal)({source:e.goproSource,feature:e.feature})}},125226:(e,t,s)=>{"use strict";s.r(t),s.d(t,{FeatureToggle:()=>u,isFeatureEnabled:()=>m,onFeaturesStateChanged:()=>l});var i=s(49437),n=s(942634),o=s(855385),r=s.n(o);s(638456);const a=new n.Delegate,l=()=>a,c="forcefeaturetoggle.";const u=new class{enableFeature(e){
i.TVLocalStorage.setItem(c+e,"true"),a.fire(e)}disableFeature(e){i.TVLocalStorage.setItem(c+e,"false"),a.fire(e)}resetFeature(e){i.TVLocalStorage.removeItem(c+e),a.fire(e)}onFeaturesStateChanged(){return a}};window.TradingView.FeatureToggle=u;const d="featuretoggle_seed";function h(e){try{const t=r()(e+function(){if(window.user&&window.user.id)return window.user.id;const e=i.TVLocalStorage.getItem(d);if(null!==e)return e;const t=Math.floor(1e6*Math.random());return i.TVLocalStorage.setItem(d,`${t}`),t}()),s=new DataView(t);return s.getUint32(0,!0)/4294967296}catch(e){return.5}}function _(e,t){if(e[t]&&-1===e[t])return!1;if("true"===i.TVLocalStorage.getItem(c+t)||window.is_authenticated&&"true"===window.user?.settings?.[c+t])return!0;if("false"===i.TVLocalStorage.getItem(c+t)||window.is_authenticated&&"false"===window.user?.settings?.[c+t])return!1;if(!e[t])return!1;if(1===e[t])return!0;return h(t)<=e[t]}const m=(p=window.featureToggleState||{},window.TradingView.onWidget?.()||Promise.all([s.e(8592),s.e(34604)]).then(s.bind(s,8592)).then((e=>{e.pushStreamMultiplexer.on("featuretoggle",(e=>{const t=_(p,e.name);p[e.name]=e.state,t!==_(p,e.name)&&a.fire(e.name)}))})),_.bind(null,p));var p;window.TradingView.isFeatureEnabled=m},128327:(e,t,s)=>{"use strict";function i(e){if(e instanceof Error)return e.stack||e.message;try{return e.outerHTML.slice(0,1024)}catch{}try{if(void 0!==e)return JSON.stringify(e).slice(0,1024)}catch{}return String(e)}function n(){window.__tv_js_errors||(window.__tv_js_errors=[]),window.addEventListener("error",(e=>{const t=(new Date).toISOString();window.__tv_js_errors.push(`${t} ${e.message||"JS error"}. ${e.filename||"<unknown url>"}, line ${e.lineno}, col ${e.colno}.\nError: ${i(e.error)}`)}),!1),window.addEventListener("unhandledrejection",(e=>{const t=(new Date).toISOString();window.__tv_js_errors.push(`${t} Unhandled rejection.\nReason: ${i(e.reason)}`)}),!1),document.addEventListener("securitypolicyviolation",(e=>{if(String(e.sourceFile).startsWith("https://securepubads.g.doubleclick.net")&&String(e.blockedURI).startsWith("https://adservice.google."))return;const t=(new Date).toISOString(),s="report"===e.disposition?"CSP report-only":"CSP violation";window.__tv_js_errors.push(`${t} ${s}: ${e.violatedDirective||e.effectiveDirective}. ${e.sourceFile||"<unknown url>"}, line ${e.lineNumber}, col ${e.columnNumber}.\nBlocked URI: ${e.blockedURI}\nSample: ${e.sample}\nTarget: ${i(e.target)}`)}),!1)}s.d(t,{install:()=>n})},49437:(e,t,s)=>{"use strict";const{getLogger:i}=s(338619),n=i("TVLocalStorage");var o=function(){try{this.isAvailable=!0,this.localStorage=window.localStorage,this.localStorage.setItem("tvlocalstorage.available","true")}catch(e){delete this.isAvailable,delete this.localStorage}this._updateLength();try{this._report()}catch(e){}};o.prototype._report=function(){if(this.isAvailable){const e=10,t=[];for(let e=0;e<this.localStorage.length;e++){const s=this.key(e);t.push({key:s,length:String(this.getItem(s)).length})}t.sort(((e,t)=>t.length-e.length));const s=t.slice(0,e)
;t.sort(((e,t)=>t.key.length-e.key.length));const i=t.slice(0,e);n.logNormal(`Total amount of keys in Local Storage: ${this.length}`),n.logNormal(`Top ${e} keys with longest values: ${JSON.stringify(s)}`),n.logNormal(`Top ${e} longest key names: ${JSON.stringify(i)}`);try{navigator.storage.estimate().then((e=>{n.logNormal(`Storage estimate: ${JSON.stringify(e)}`)}))}catch(e){}}},o.prototype.length=0,o.prototype.isAvailable=!1,o.prototype.localStorage={"tvlocalstorage.available":"false"},o.prototype._updateLength=function(){if(this.isAvailable)this.length=this.localStorage.length;else{var e,t=0;for(e in this.localStorage)this.localStorage.hasOwnProperty(e)&&t++;this.length=t}},o.prototype.key=function(e){return this.isAvailable?this.localStorage.key(e):Object.keys(this.localStorage)[e]},o.prototype.getItem=function(e){return this.isAvailable?this.localStorage.getItem(e):void 0===this.localStorage[e]?null:this.localStorage[e]},o.prototype.setItem=function(e,t){this.isAvailable?this.localStorage.setItem(e,t):this.localStorage[e]=t,this._updateLength()},o.prototype.removeItem=function(e){this.isAvailable?this.localStorage.removeItem(e):delete this.localStorage[e],this._updateLength()},o.prototype.clear=function(){this.isAvailable?this.localStorage.clear():this.localStorage={},this._updateLength()},window.TVLocalStorage=new o,e.exports.TVLocalStorage=window.TVLocalStorage},603774:(e,t,s)=>{"use strict";s.d(t,{logPineMetaInfoIssues:()=>r});var i=s(79200),n=s(692558);function o(e,t,s){(0,i.getPersistentLogger)()?.addPersistentLogEntry(`Detected meta info (id: ${e.id}) issue: ${t}. Source: ${s}`,n.LOGLEVEL.ERROR,"PineMetaInfoValidation")}function r(e,t){t&&t.defaults&&t.defaults.inputs&&!t.defaults.inputs.text&&o(t,'no "defaults.inputs.text" value',e),t&&t.inputs&&(t.inputs.find((e=>"text"===e.id))||o(t,'no input with id "text"',e))}},197677:(e,t,s)=>{"use strict";s.d(t,{pineFacadeFetch:()=>_});var i=s(444372),n=s(702598),o=s(692558),r=s(881992),a=s(129586),l=s(175203),c=s(791488);const u=(0,o.getLogger)("Chart.Study.Versioning");function d(e,t){const s=new URL(function(e){return e.split("/").map((e=>encodeURIComponent(e))).join("/")}(e),(0,r.getPineFacadeUrl)());for(const e in t){const i=t[e];(0,a.isAbsentParam)(i)||s.searchParams.set(e,String(i))}return s.toString()}function h(e,t,s=!1){const i={method:e,mode:"cors"};return"POST"===e&&t&&(i.body=function(e){const t=new FormData;for(const s of Object.keys(e))t.append(s,e[s]);return t}(t)),s||(i.credentials="include"),i}async function _({urlPath:e,urlParams:t,data:o,withoutCredentials:r,method:a="GET"}){const _=d(e,t),m=h(a,o,r),p=function(e){u.logNormal(`Requesting pine facade scripts, url: ${e}`);const t=e.split("/")[0],s=c.pineTelemetryGroups.get(t),i=Date.now();return t=>{const n=Date.now()-i;if(l.telemetry.sendReport("pine",`${s}_group_time_frame`,{value:n}),t)return l.telemetry.sendReport("pine",`${s}_group_ok`),void u.logNormal(`Requesting pine facade scripts finished, url: ${e}`);l.telemetry.sendReport("pine",`${s}_group_error`),
u.logError(`Requesting pine facade scripts failed, url: ${e}`)}}(e);try{const e=await(0,n.fetch)(_,m);if(!e.ok)throw function(e){return e.status>=500?i.t(null,void 0,s(638449)):413===e.status?i.t(null,void 0,s(450240)):420===e.status?i.t(null,void 0,s(915141)):e.status>=400?i.t(null,void 0,s(982137)):i.t(null,void 0,s(201007))}(e);const t=await e.json();return p(!0),t}catch(e){throw p(!1),e}}},401843:(e,t,s)=>{"use strict";s.d(t,{PineCompileFailErrorImpl:()=>i});class i extends Error{constructor(e,t){super("Pine translation failed"),this.reason=e,this.metaInfo=t}}},934440:(e,t,s)=>{"use strict";const i=s(764829);window.TradingView=window.TradingView||{};var n,o,r,a,l,c,u,d=TradingView.postMessageWrapper=(o=Object.create(null),r=Object.create(null),a=Object.create(null),l=0,c=0,u="TradingView",window.addEventListener&&window.addEventListener("message",(function(e){var t;try{t=JSON.parse(e.data),i.enabled("charting_library_debug_mode")&&console.log(`${(new Date).toISOString()} PostMessage: incoming message: `+JSON.stringify(t))}catch(e){return}if(t&&t.provider&&t.provider===u)if("get"===t.type){if(!r[t.name])return;r[t.name].forEach((function(e){"function"==typeof e&&e.call(t,t.data,(function(e){var s={id:t.id,type:"on",name:t.name,client_id:t.client_id,data:e,provider:u};n.postMessage(JSON.stringify(s),"*")}))}))}else if("on"===t.type)o[t.client_id]&&o[t.client_id][t.id]&&(o[t.client_id][t.id].call(t,t.data),delete o[t.client_id][t.id]);else if("post"===t.type){if(!r[t.name])return;r[t.name].forEach((function(e){"function"==typeof e&&e.call(t,t.data,(function(){}))}))}})),function(e,t){o[t]=Object.create(null),a[t]=e,n=e;var s="";return{on:function(e,t,s){r[e]&&s||(r[e]=[]),r[e].push(t)},get:function(e,s,i){var n={id:l++,type:"get",name:e,client_id:t,data:s,provider:u};o[t][n.id]=i,a[t].postMessage(JSON.stringify(n),"*")},post:function(e,t,i){var n={id:c++,type:"post",name:t,client_id:s,data:i,provider:u};e&&"function"==typeof e.postMessage&&e.postMessage(JSON.stringify(n),"*")},setClientId:function(e){s=e}}});e.exports=d},416234:(e,t,s)=>{"use strict";s.d(t,{SymbolGroup:()=>i,getSymbolGroupData:()=>o});s(466281);var i,n=s(444372);function o(e){const t={[i.NseFlag]:{title:n.t(null,void 0,s(418926)),description:n.t(null,void 0,s(206416))}};return t[e]?t[e]:null}!function(e){e.NseFlag="nse_free",e.McxFlag="mcx_free"}(i||(i={}))},526225:(e,t,s)=>{"use strict";s.d(t,{syncUserConversionData:()=>d,syncUserData:()=>u});var i=s(338619),n=s(345848),o=s(702598),r=s(875385);const a=(0,i.getLogger)("User.Sync");function l(e){return`${e}_${window.user&&window.user.username||""}`}function c(e,t,s,i=!0){s!==window.user.pro_plan&&(window.user.pro_plan=s,window.user.is_pro=Boolean(s),(0,n.trackEvent)("Sync User Data","Different Pro Plan",l(e))),t!==window.is_authenticated&&(window.is_authenticated=t,i&&window.loginStateChange.fire(),(0,n.trackEvent)("Sync User Data","Different Auth",l(e)))}async function u(e){try{c(e,!0,(await(0,r.getProPlanDetailsForUser)()).pro_plan)}catch(t){!function(e,t){
403===t.status&&["not_authenticated","login_required"].includes(t.type||"")?c(e,!1,void 0):a.logError(t.message)}(e,t)}}async function d(e,t=!0){const s=new URL("/pricing/",window.location.origin),i=new URLSearchParams(window.location.search);i.has("_test_country")&&s.searchParams.append("_test_country",i.get("_test_country")??"");const n=await(0,o.fetch)(s.href),r=await n.json();return c(e,r.is_authenticated,r.user.pro_plan,t),r}},175203:(e,t,s)=>{"use strict";s.d(t,{telemetry:()=>u});var i=s(942634),n=s(702598),o=s(638456),r=s(314802);s(659863);const a=(0,s(338619).getLogger)("Common.Telemetry"),l={default:15e3,site:3e5},c=["before_websocket_connection_time_frame","websocket_connection_time_frame","first_series_full_time_frame","page_full_load_time_frame","page_load_time_frame"];const u=new class{constructor(){this.reportSent=new i.Delegate,this.timeCounters={series:{marks:[]},study:{},pine:{}},this._timeoutIds={},this._commonAdditionalData={cluster:null,userId:"0"},this._reportStash={}}setSessionInfo(e){const t=this._parseCluster(e);null!==t&&(this._commonAdditionalData.cluster=t)}sendReport(e,t,s){if(!this._isAbleToSendReport(t))return;const i=this._getSubserviceType(e),n=this._getHost(e,i);if(null!==n){if(s=void 0===s?{count:1}:s,this._addReportToStash(s,t,n),!this._timeoutIds[e]){const t=l[e]??l.default;this._timeoutIds[e]=setTimeout(this._sendTelemetryToService.bind(this,e,n),t)}}else a.logError(`Unable to get host for counter: ${t}, metric type: ${e}, serivce type: ${i}`)}sendChartReport(e,t,s=!0){this._sendServiceSpecifiedReport("charts",e,t,s)}sendLineToolsStorageReport(e,t,s=!0){this._sendServiceSpecifiedReport("line_tools_storage",e,t,s)}_sendServiceSpecifiedReport(e,t,s,i=!0){this._updateUserInfo(),s=void 0===s?{count:1}:s,i&&(s=this._appendCommonAdditionalInfo(s,["cluster","userId"])),this.sendReport(e,t,s)}_updateUserInfo(){const e="user"in window&&"id"in window.user?window.user.id:"0";this._commonAdditionalData.userId=String(e)}_isAbleToSendReport(e){const t=window.TELEMETRY_HOSTS,s=c.includes(e),i=Boolean(window.TradingView.onChartPage||(0,o.onWidget)());return t&&(!s||i)}_sendTelemetryToService(e,t){if(this._reportStash.hasOwnProperty(t)){const e=this._cropParams(this._reportStash[t]),s=this._renameAllParams(e),i={event:"report_stash",params:this._cleanAllParams(s)};a.logDebug(`Report to host: ${t}; stash: ${JSON.stringify(this._reportStash[t])}`),this.reportSent.fire(this._reportStash[t]),delete this._reportStash[t],(0,n.fetch)(`${t}/report`,{method:"POST",body:JSON.stringify(i)})}this._timeoutIds[e]=null}_getHost(e,t){const s=window.TELEMETRY_HOSTS,i=s[e]&&s[e][t];return Boolean(i)?i:null}_getSubserviceType(e){if(!["charts","site"].includes(e))return"all";let t="free";const s=window.user.is_pro;return"charts"===e&&(0,r.isOnMobileAppPage)("old")?t=s?"ios_pro":"ios_free":"charts"===e&&(0,r.isOnMobileAppPage)("new")?t=s?"android_pro":"android_free":(0,o.onWidget)()?t="widget":s&&(t="pro"),t}_parseCluster(e){let t;try{t=JSON.parse(e).session_id}catch(e){
return a.logError("Could not parse cluster id (session id)"),null}const s=/(.*@)(.*)/gi.exec(t);return null!==s&&s.length>=3?s[2]:null}_appendCommonAdditionalInfo(e,t){return t.forEach((t=>{t in this._commonAdditionalData&&(e.additional=e.additional||{},e.additional[t]=this._commonAdditionalData[t])})),e}_cropParams(e){for(const t in e)e.hasOwnProperty(t)&&e[t].length>1e3&&(e.too_much_metrics_frame=e.too_much_metrics_frame??[],e.too_much_metrics_frame.push({value:e[t].length,additional:{event:t}}),delete e[t]);return e}_renameAllParams(e){const t={};for(const s in e)e.hasOwnProperty(s)&&(t[s]=[],e[s].forEach((e=>{t[s].push(this._renameEntryParams(e))})));return t}_renameEntryParams(e){const t={count:"c",value:"v",text:"t",additional:"a"};return Object.keys(e).reduce(((s,i)=>(s[t[i]]=e[i],s)),{})}_cleanAllParams(e){const t={};for(const s in e)if(e.hasOwnProperty(s)){t[s]=[];const i={c:0};e[s].forEach((e=>{const n=this._cleanEntryParams(e),o=Object.keys(n).length;1===o&&void 0!==n.c?i.c+=n.c:o>0&&t[s].push(n)})),i.c>0&&t[s].push(i),0===t[s].length&&delete t[s]}return t}_cleanEntryParams(e){const t=Object.keys(e).reduce(((t,s)=>"c"!==s&&"t"!==s||e[s]?(t[s]=e[s],t):t),{});return"c"in t||"v"in t||"t"in t?t:{}}_addReportToStash(e,t,s){s in this._reportStash||(this._reportStash[s]={}),t in this._reportStash[s]||(this._reportStash[s][t]=[]),Object.keys(e).length>0&&this._reportStash[s][t].push(e)}}},86746:(e,t,s)=>{"use strict";s.d(t,{darkTheme:()=>c,getStdChartTheme:()=>d,getStdThemeNames:()=>u,lightTheme:()=>l,translateThemeName:()=>h});var i=s(444372),n=s(124829),o=s(753460),r=s(674131),a=s(61499);let l=(0,n.clone)(o.light),c=(0,n.clone)(r.dark);function u(){return[a.StdTheme.Light,a.StdTheme.Dark]}function d(e){return{[a.StdTheme.Light]:(0,n.clone)(l),[a.StdTheme.Dark]:(0,n.clone)(c)}[e]}function h(e){return{[a.StdTheme.Light]:i.t(null,{context:"colorThemeName"},s(696870)),[a.StdTheme.Dark]:i.t(null,{context:"colorThemeName"},s(185119))}[e]||e}},83871:(e,t,s)=>{"use strict";s.d(t,{SYMBOL_LIST_SERVICE:()=>i});const i={id:"SymbolListService"}},4535:e=>{e.exports={loaderContainer:"loaderContainer-UjjEDANi",loaderOrderContainer:"loaderOrderContainer-UjjEDANi",openAnimation:"openAnimation-UjjEDANi",openOrderAnimation:"openOrderAnimation-UjjEDANi"}},246255:(e,t,s)=>{"use strict";s.d(t,{ChartSession:()=>c});var i=s(942634),n=s(650151),o=s(375397),r=s(79342);const a=(0,s(338619).getLogger)("ChartApi.AbstractSession");class l{constructor(e,t,s){this._isConnected=new o.WatchedValue(!1),this._state=0,this._isConnectForbidden=!1,this._sessionId="",this._sessionIdChanged=new i.Delegate,this._chartApi=e,this._sessionPrefix=t,this._shouldReconnectAfterCriticalError=s}destroy(){this._logNormal("Destroying session"),this._isConnected.unsubscribe(),this.disconnect(),this._sessionIdChanged.destroy(),delete this._chartApi,this._logNormal("Session has been destroyed")}isConnected(){return this._isConnected}sessionId(){return this._sessionId}onSessionIdChanged(){return this._sessionIdChanged}connect(){0===this._state&&((0,
n.assert)(!this._isConnectForbidden,"Cannot call connect because it is forbidden at this moment"),this._setSessionId(`${this._sessionPrefix}_${(0,r.randomHash)()}`),this._logNormal("Connecting session - wait until transport stay connected"),this._state=1,this._chartApi.createSession(this._sessionId,this))}disconnect(){0!==this._state&&((0,n.assert)(""!==this._sessionId,"sessionId must not be invalid"),this._logNormal("Disconnecting session..."),this._forbidConnectWhile((()=>{this._chartApi.connected()&&this._sendRemoveSession(),this._processDestroyingOnServer()})))}onMessage(e){switch(e.method){case"connected":return void this._onChartApiConnected();case"disconnected":return void this._onChartApiDisconnected();case"critical_error":const t=String(e.params[0]),s=String(e.params[1]);return void this._onCriticalError(t,s)}this._onMessage(e)}serverTime(){return this._chartApi.serverTime()}_getChartApi(){return this._chartApi}_generateLogMessage(e){return`[${this._sessionId}] ${e}`}_onCriticalError(e,t){this._logError(`Critical error. Reason=${e}, info=${t}.`),this._forbidConnectWhile((()=>{this._processDestroyingOnServer()})),this._shouldReconnectAfterCriticalError?(this._logNormal("Reconnecting after critical error..."),this.connect()):this._logNormal("Reconnecting after critical error skipped")}_onChartApiConnected(){(0,n.assert)(1===this._state,"Session is not registered"),this._logNormal("Transport is connected. Creating session on the server"),this._sendCreateSession(),this._state=2,this._isConnected.setValue(!0)}_onChartApiDisconnected(){this._logNormal("Transport is disconnected. Reconnecting..."),this._forbidConnectWhile((()=>{this._processDestroyingOnServer()})),this.connect()}_setSessionId(e){const t=this._sessionId;this._logNormal(`Changing sessionId: old=${t}, new=${e}`),this._sessionId=e,this._sessionIdChanged.fire(e,t)}_logNormal(e){a.logNormal(this._generateLogMessage(e))}_logError(e){a.logError(this._generateLogMessage(e))}_processDestroyingOnServer(){this._state=0,this._isConnected.setValue(!1),this._chartApi.removeSession(this._sessionId),this._setSessionId("")}_forbidConnectWhile(e){this._isConnectForbidden=!0,e(),this._isConnectForbidden=!1}}class c extends l{constructor(e,t=!1){super(e,"cs",!1),this._sessionDisabled=!1,this._handler=null,this._criticalError=new i.Delegate,this._symbolResolveMap=new Map,this._lastSymbolResolveInfoMap=new Map,this._disableStatistics=t}destroy(){this._criticalError.destroy(),this._handler=null,this._symbolResolveMap.clear(),super.destroy()}switchTimezone(e){return this._getChartApi().switchTimezone(this.sessionId(),e)}defaultResolutions(){return this._getChartApi().defaultResolutions()}availableCurrencies(){return this._getChartApi().availableCurrencies()}availableUnits(){return this._getChartApi().availableUnits()}availablePriceSources(e){return this._getChartApi().availablePriceSources(e)}resolveSymbol(e,t,s){if(this._symbolResolveMap.has(t)){const[e,i]=this._symbolResolveMap.get(t);return Array.isArray(i)?i.push(s):i.then(s),e}{const i=[s]
;return this._getChartApi().resolveSymbol(this.sessionId(),e,t,(s=>{if("symbol_error"===s.method)this._symbolResolveMap.delete(t);else{this._symbolResolveMap.set(t,[e,Promise.resolve(s)]);const[,i]=s.params,n={pro_name:i.pro_name,ticker:i.ticker};this._lastSymbolResolveInfoMap.set(t,n),n.pro_name&&this._lastSymbolResolveInfoMap.set(n.pro_name,n),i.full_name&&this._lastSymbolResolveInfoMap.set(i.full_name,n),n.ticker&&this._lastSymbolResolveInfoMap.set(n.ticker,n)}i.forEach((e=>e(s)))})),this._symbolResolveMap.set(t,[e,i]),e}}requestFirstBarTime(e,t,s){return this._getChartApi().requestFirstBarTime(this.sessionId(),e,t,s)}lastSymbolResolveInfo(e){return this._lastSymbolResolveInfoMap.get(e)??null}createSeries(e,t,s,i,n,o,r){return this._getChartApi().createSeries(this.sessionId(),e,t,s,i,n,o,r)}modifySeries(e,t,s,i,n,o,r){return this._getChartApi().modifySeries(this.sessionId(),e,t,s,i,n,o,r)}removeSeries(e){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),e)}requestMoreData(e,t,s){return"number"==typeof e?this._getChartApi().requestMoreData(this.sessionId(),e):this._getChartApi().requestMoreData(this.sessionId(),e,t,s)}requestMoreTickmarks(e,t,s){return this._getChartApi().requestMoreTickmarks(this.sessionId(),e,t,s)}setFutureTickmarksMode(e){return this._getChartApi().setFutureTickmarksMode(this.sessionId(),e)}canCreateStudy(e,t){return this._getChartApi().canCreateStudy(this.sessionId(),e,t)}getStudyCounter(){return this._getChartApi().getStudyCounter(this.sessionId())}getFundamentalCounter(){return this._getChartApi().getFundamentalCounter(this.sessionId())}createStudy(e,t,s,i,n,o,r){return this._getChartApi().createStudy(this.sessionId(),e,t,s,i,n,o,r)}modifyStudy(e,t,s,i,n){return this._getChartApi().modifyStudy(this.sessionId(),e,t,s,i,n)}notifyStudy(e,t,s){return this._getChartApi().notifyStudy(this.sessionId(),e,t,s)}removeStudy(e){return this._getChartApi().removeStudy(this.sessionId(),e)}createPointset(e,t,s,i,n,o){return this._getChartApi().createPointset(this.sessionId(),e,t,s,i,n,o)}modifyPointset(e,t,s,i){return this._getChartApi().modifyPointset(this.sessionId(),e,t,s,i)}removePointset(e){return this._getChartApi().removePointset(this.sessionId(),e)}setVisibleTimeRange(e,t,s,i,n,o){0}criticalError(){return this._criticalError}connect(e=null){null!==e&&(this._handler=e),this._symbolResolveMap.clear(),super.connect()}setHandler(e){this._handler=e}connected(){return this.isConnected().value()&&!this._sessionDisabled}disable(){this._sessionDisabled=!0}chartApi(){return this._getChartApi()}_sendCreateSession(){Object.keys(this).forEach((e=>{/^(s|st|symbol_)\d+$/.test(e)&&delete this[e]})),this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)}_sendRemoveSession(){this._getChartApi().chartDeleteSession(this.sessionId())}_onMessage(e){this._handler&&this._handler(e)}_onCriticalError(e,t){this._criticalError.fire(e,t),super._onCriticalError(e,t)}}},625545:(e,t,s)=>{"use strict";s.r(t),s.d(t,{destroyQuoteSessions:()=>l,getQuoteSessionInstance:()=>o,
getQuoteSessionNoEnsure:()=>a,setQuoteSessionInstance:()=>r});var i=s(360451);const n={};function o(e="full"){return n[e]||r(e,new i(e)),n[e]}function r(e="full",t){n[e]=t}function a(e="full"){return n[e]}function l(){for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];void 0!==t&&t.destroy(),delete n[e]}}},264552:(e,t,s)=>{"use strict";s.d(t,{getServerInterval:()=>n});var i=s(378975);function n(e){return i.Interval.isRange(e)?"1":e}},307239:(e,t,s)=>{"use strict";function i(e){if(void 0===e)return null;const t=e.match(/(delayed_streaming)_(\d+)/);return null===t?null:{mode:t[1],interval:parseInt(t[2])}}function n(e){const t=i(e.update_mode);return null===t||(e.update_mode=t.mode,e.update_mode_seconds=t.interval),e}s.r(t),s.d(t,{normalizeUpdateMode:()=>n,parseUpdateMode:()=>i})},942634:(e,t,s)=>{"use strict";s.d(t,{Delegate:()=>o});const i=(0,s(692558).getLogger)("Common.Delegate");function n(e){return!e.singleShot}class o{constructor(){this.fire=this._fireImpl.bind(this),this._listeners=[]}subscribe(e,t,s){this._listeners.push({object:e,member:t,singleShot:!!s,skip:!1})}unsubscribe(e,t){for(let s=0;s<this._listeners.length;++s){const i=this._listeners[s];if(i.object===e&&i.member===t){i.skip=!0,this._listeners.splice(s,1);break}}}unsubscribeAll(e){for(let t=this._listeners.length-1;t>=0;--t){const s=this._listeners[t];s.object===e&&(s.skip=!0,this._listeners.splice(t,1))}}destroy(){this._listeners=[]}_fireImpl(...e){const t=this._listeners;this._listeners=this._listeners.filter(n);const s=t.length;for(let n=0;n<s;++n){const s=t[n];if(!s.skip)try{s.member.apply(s.object||null,e)}catch(e){i.logError(`${e&&(e.stack||e.message)}`)}}}}},692558:(e,t,s)=>{"use strict";s.d(t,{LOGLEVEL:()=>o,getLogHistory:()=>w,getLogLevel:()=>g,getLogger:()=>T,getRawLogHistory:()=>b,isHighRateEnabled:()=>f,loggingOff:()=>P,loggingOn:()=>C,serializeLogHistoryEntry:()=>y,setLogLevel:()=>v});const i="undefined"!=typeof window?window:{};let n=!1;try{localStorage.getItem(""),n=!0}catch(e){}var o;!function(e){e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO",e[e.NORMAL=4]="NORMAL",e[e.DEBUG=5]="DEBUG"}(o||(o={}));let r=0;const a="tv.logger.loglevel",l="tv.logger.logHighRate",c=[];let u=null,d=null,h=null,_=NaN,m=o.WARNING,p=!1;function g(){return m}function f(){return p}function v(e){e=Math.max(o.ERROR,Math.min(o.DEBUG,e)),m=e,I()}function b(e,t){let s=c.reduce(((e,t)=>e.concat(t)),[]);return s.sort(((e,t)=>e.id-t.id)),void 0!==t&&(s=s.filter((e=>e.subSystemId===t))),"number"==typeof e&&(s=s.slice(-e)),s}function y(e){return new Date(e.timestamp).toISOString()+":"+e.subSystemId+":"+e.message.replace(/"/g,"'")}const w=i.lget=(e,t)=>function(e,t){let s,i=0,n=0;for(s=e.length-1;s>=1&&(i+=8*(1+encodeURIComponent(e[s]).length),!(s-1>0&&(n=8*(1+encodeURIComponent(e[s-1]).length),i+n>t)));s--);return e.slice(s)}(b(e,t).map(y),75497472);function S(e,t,s,i){if(t===d&&i.id===h)return;const n=new Date;if(e<=o.NORMAL&&function(e,t,s,i,n){"function"==typeof structuredClone&&(t=structuredClone(t));const o={id:r,message:t,subSystemId:i,
timestamp:Number(e)};r+=1,s.push(o),void 0!==n&&s.length>n&&s.splice(0,1)}(n,t,s,i.id,i.maxCount),e<=m&&(!i.highRate||f())&&(!u||i.id.match(u))){const s=n.toISOString()+":"+i.id+":"+t;switch(e){case o.DEBUG:console.debug(s);break;case o.INFO:case o.NORMAL:i.color?console.log("%c"+s,"color: "+i.color):console.log(s);break;case o.WARNING:console.warn(s);break;case o.ERROR:console.error(s)}d=t,h=i.id,_&&clearTimeout(_),_=setTimeout((()=>{d=null,h=null,_=NaN}),1e3)}}function T(e,t={}){const s=[];c.push(s);const i=Object.assign(t,{id:e});function n(e){return t=>S(e,String(t),s,i)}return{logDebug:n(o.DEBUG),logError:n(o.ERROR),logInfo:n(o.INFO),logNormal:n(o.NORMAL),logWarn:n(o.WARNING)}}const E=T("logger"),C=i.lon=(e,t)=>{v(o.DEBUG),E.logNormal("Debug logging enabled"),p=Boolean(e),u=t||null,I()},P=i.loff=()=>{v(o.INFO),E.logInfo("Debug logging disabled")};function I(){try{n&&(localStorage.setItem(l,String(p)),localStorage.setItem(a,String(m)))}catch(e){E.logWarn(`Cannot save logger state (level: ${m}, high-rate: ${p}) to localStorage: ${e.message}`)}}!function(){p=!!n&&"true"===localStorage.getItem(l);let e=parseInt(n&&localStorage.getItem(a)||"");Number.isNaN(e)&&(e=o.WARNING),v(e),E.logNormal(`Init with settings - level: ${m}, high-rate: ${p}`)}(),i.performance&&i.performance.now?E.logNormal(`Sync logger and perf times, now is ${i.performance.now()}`):E.logWarn("Perf time is not available")},876610:(e,t,s)=>{"use strict";function i(e){return e.includes(":")?e.split(":"):["",e]}s.d(t,{splitSymbolName:()=>i})},468219:(e,t,s)=>{"use strict";s.d(t,{MouseClickAutoBlurHandler:()=>r,initMouseClickAutoBlurHandler:()=>a});var i=s(481251),n=s(184277);const o="data-mouse-click-auto-blur";class r{constructor(){this._handler=e=>{document.activeElement instanceof HTMLElement&&((0,n.isKeyboardClick)(e)||e.target instanceof Element&&"INPUT"!==document.activeElement.tagName&&null!==document.activeElement.closest(`[${o}]`)&&document.activeElement.blur())},window.addEventListener("click",this._handler,!0)}static attributes(e=!0){return e?{[o]:!0}:{}}}const a=(0,i.default)((()=>new r))},691371:(e,t,s)=>{"use strict";s.d(t,{Action:()=>a,Loader:()=>c,Separator:()=>l});var i=s(650151),n=s(470316),o=s(79342),r=s(599670);class a{constructor(e){this.type="action",this._destroyed=!1,this._loadOptionsPromise=null,this._customAction=null;const{actionId:t,options:s,optionsLoader:n,customActionOptions:l,customActionOptionsLoader:c,id:u=o.guid(),onStartListening:d}=e;(0,i.assert)(void 0!==t,"actionId must be defined"),this.id=u,this._onUpdate=new r.ActionDelegate(d),this._options={actionId:t,...s},this.update(s),this._loadOptionsGetter=n??null,this._loadOptionsGetter&&(this._options.loading=!0),l&&(this._customAction=new a({actionId:t,options:l,optionsLoader:c,id:u}))}custom(){return this._customAction}execute(){this._options.checkable&&this.update({checked:!this._options.checked}),this._options.onExecute&&this._options.onExecute(this)}getLabel(){return this._options.label||""}getSubItems(){return this._options.subItems||[]}isDisabled(){
return!0===this._options.disabled}isActive(){return!0===this._options.active}isCheckable(){return!0===this._options.checkable}isChecked(){return!0===this._options.checked}isLoading(){return!0===this._options.loading}loadOptions(){return this._loadOptionsPromise?this._loadOptionsPromise:this._loadOptionsGetter?(this._loadOptionsPromise=this._loadOptionsGetter().then((e=>this.update({...e,loading:!1}))),this._loadOptionsPromise):null}getSize(){return this._options.size??"normal"}getPayload(){return this._options.payload}update(e){this._destroyed||(this._unbindShortcut(),e.hotkeyHash&&(this._options.shortcutHint=(0,n.humanReadableHash)(e.hotkeyHash)),this._options=Object.assign(this._options,e),this._bindShortcut(),this._onUpdate.fire(this))}onUpdate(){return this._onUpdate}getState(){return this.loadOptions(),{actionId:this._options.actionId,label:this.getLabel(),styledLabel:this._options.styledLabel,disabled:this.isDisabled(),active:this.isActive(),subItems:this.getSubItems(),checkable:this.isCheckable(),checked:this.isChecked(),loading:this.isLoading(),size:this.getSize(),doNotCloseOnClick:this._options.doNotCloseOnClick||!1,shortcutHint:this._options.shortcutHint,hint:this._options.hint,icon:this._options.icon,iconId:this._options.iconId,iconChecked:this._options.iconChecked,toolbox:this._options.toolbox,showToolboxOnHover:this._options.showToolboxOnHover||!1,statName:this._options.statName,name:this._options.name,invisibleHotkey:this._options.invisibleHotkey,noInteractive:this._options.noInteractive,jsxLabel:"jsxLabel"in this._options?this._options.jsxLabel:void 0,isRepeatAccepted:this._options.isRepeatAccepted}}destroy(){this._destroyed=!0,this._onUpdate.destroy(),this._unbindShortcut(),this._options.onDestroy?.(),this._customAction?.destroy()}options(){return this._options}_bindShortcut(){if(!this._options.hotkeyGroup||!this._options.hotkeyHash)return;const e="string"==typeof this._options.label?this._options.label:this._options.name;this._hotkeyAction=this._options.hotkeyGroup.add({hotkey:this._options.hotkeyHash,isRepeatAccepted:this._options.isRepeatAccepted,desc:e,handler:()=>this.execute(),isDisabled:()=>this.isDisabled()})}_unbindShortcut(){this._hotkeyAction&&(this._hotkeyAction.destroy(),delete this._hotkeyAction)}}class l{constructor(e){this.type="separator",this.id=o.guid(),this._hint=e}getHint(){return this._hint}}class c extends a{constructor(e){super({actionId:e,options:{}})}isLoading(){return!0}getSize(){return"big"}}},621452:(e,t,s)=>{"use strict";s.d(t,{ContextMenuManager:()=>i});var i,n=s(828473),o=s(691371),r=s(224743);!function(e){let t=null,i=null;const a=[],l={createAction:e=>new o.Action({actionId:"Chart.CustomActionId",options:e}),createAsyncAction:e=>new o.Action({actionId:"Chart.CustomActionId",options:{},optionsLoader:e}),createSeparator:()=>new o.Separator};async function c(e,o={},r={menuName:""},c){null!==t&&(e=await t(e,l,r));let d=null;const h=()=>{const e=(0,n.indexOf)(a,(e=>e.renderer===d));-1!==e&&a.splice(e,1),void 0!==c&&c()};let _=!1;if(null!==i&&(d=await i(e,r,h)),d)_=!0,
u();else{const t=await Promise.all([s.e(19966),s.e(53953),s.e(46489),s.e(75826),s.e(29800),s.e(23141),s.e(7001),s.e(71329),s.e(44066),s.e(32736),s.e(1198),s.e(82321),s.e(72897),s.e(91584)]).then(s.bind(s,977957));d=new t.ContextMenuRenderer(e,o,h,u)}return a.push({renderer:d,isExternal:_}),d}function u(){(0,r.globalCloseMenu)(),a.forEach((e=>{e.isExternal&&e.renderer.isShown()&&e.renderer.hide()}))}e.createMenu=c,e.showMenu=function(e,t,s={},i,n){return c(e,s,i,n).then((e=>e.show(t)))},e.setCustomRendererFactory=function(e){i=e},e.setCustomItemsProcessor=function(e){t=e},e.hideAll=u,e.getShown=function(){for(let e=0;e<a.length;e++)if(a[e].renderer.isShown())return a[e].renderer;return null}}(i||(i={}))},188035:(e,t,s)=>{"use strict";s.d(t,{MouseEventHandler:()=>g,defaultPreventedHandler:()=>m,getClickPosition:()=>h,ignoreClickOrTapOnDblClickOrDblTapHandlers:()=>p,isTouchMouseEvent:()=>_});var i=s(481251),n=s(650151),o=s(638456),r=s(124829),a=s(196726),l=s(937713);let c=2;const u=o.isSafari?"click":"auxclick",d={treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!1,ignoreClickAndTapOnDblClickOrDblTap:!1};function h(e){if(_(e))return{x:e.clientX,y:e.clientY};if("touches"in(t=e)&&void 0!==t.touches){if(1===e.touches.length){const t=(0,n.ensureNotNull)(e.target).getBoundingClientRect(),s=e.touches[0];return{x:s.clientX-t.left,y:s.clientY-t.top}}return null}var t;return{x:e.offsetX,y:e.offsetY}}function _(e){return"isTouch"in e&&"stylus"in e}function m(e){return t=>{t.preventDefault(),e(t)}}function p(e){let t=!1;return{clickOrTap:(...s)=>{t=!1,setTimeout((()=>!t&&e.clickOrTap(...s)),501)},doubleClickOrDoubleTap:(...s)=>{t=!0,e.doubleClickOrDoubleTap?.(...s)}}}class g{constructor(e,t,s){if(this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartPosition=null,this._touchMoveStartPosition=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._pinchInfo=null,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!o.CheckMobile.iOS(),this._onFirefoxOutsideMouseUp=e=>{this._mouseUpHandler(e)},this._onMobileSafariDoubleClick=e=>{if(this._firesTouchEvents(e)){const t=this._makeCompatEvent(e);if(++this._tapCount,this._tapTimeoutId&&this._tapCount>1){const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(v(e),this._tapPosition);s<30&&!this._cancelTap&&this._processTouchEvent(t,this._handlers.doubleTapEvent),this._resetTapTimeout()}}else{const t=this._makeCompatEvent(e);if(++this._clickCount,
this._clickTimeoutId&&this._clickCount>1){const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(v(e),this._clickPosition);s<5&&!this._cancelClick&&this._processMouseEvent(t,this._handlers.mouseDoubleClickEvent),this._resetClickTimeout()}}},this._target=e,this._options=(0,r.merge)((0,r.clone)(d),s||{}),this._options.ignoreClickAndTapOnDblClickOrDblTap){if(t.mouseClickEvent&&t.mouseDoubleClickEvent){const e=p({clickOrTap:t.mouseClickEvent.bind(t),doubleClickOrDoubleTap:t.mouseDoubleClickEvent.bind(t)});t.mouseClickEvent=e.clickOrTap,t.mouseDoubleClickEvent=e.doubleClickOrDoubleTap}if(t.tapEvent&&t.doubleTapEvent){const e=p({clickOrTap:t.tapEvent.bind(t),doubleClickOrDoubleTap:t.doubleTapEvent.bind(t)});t.tapEvent=e.clickOrTap,t.doubleTapEvent=e.doubleClickOrDoubleTap}}this._handlers=t,this._init()}destroy(){null!==this._unsubscribeOutsideMouseEvents&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),null!==this._unsubscribeOutsideTouchEvents&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),null!==this._unsubscribeMobileSafariEvents&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()}_mouseEnterHandler(e){this._unsubscribeMousemove&&this._unsubscribeMousemove();const t=this._mouseMoveHandler.bind(this);if(this._unsubscribeMousemove=()=>{this._target.removeEventListener("mousemove",t)},this._target.addEventListener("mousemove",t),this._firesTouchEvents(e))return;const s=this._makeCompatEvent(e);this._processMouseEvent(s,this._handlers.mouseEnterEvent),this._acceptMouseLeave=!0}_resetClickTimeout(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}}_resetTapTimeout(){null!==this._tapTimeoutId&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}}_mouseMoveHandler(e){if(this._mousePressed||null!==this._touchMoveStartPosition)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.mouseMoveEvent),this._acceptMouseLeave=!0}_touchMoveHandler(e){const t=w(e.changedTouches,(0,n.ensureNotNull)(this._activeTouchId));if(null===t)return;if(this._lastTouchEventTimeStamp=y(e),null!==this._pinchInfo)return;if(this._preventTouchDragProcess)return;this._pinchPrevented=!0;const s=this._touchMouseMoveWithDownInfo(v(t),(0,n.ensureNotNull)(this._touchMoveStartPosition)),{xOffset:i,yOffset:o,manhattanDistance:r}=s;if(this._touchMoveExceededManhattanDistance||!(r<5)){
if(!this._touchMoveExceededManhattanDistance){const e=.5*i,t=o>=e&&!this._options.treatVertTouchDragAsPageScroll,s=e>o&&!this._options.treatHorzTouchDragAsPageScroll;t||s||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}if(!this._preventTouchDragProcess){const s=this._makeCompatEvent(e,t);this._processTouchEvent(s,this._handlers.touchMoveEvent),(0,a.preventDefault)(e)}}}_mouseMoveWithDownHandler(e){if(0!==e.button)return;const t=this._touchMouseMoveWithDownInfo(v(e),(0,n.ensureNotNull)(this._mouseMoveStartPosition)),{manhattanDistance:s}=t;if(s>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick){const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.pressedMouseMoveEvent)}}_touchMouseMoveWithDownInfo(e,t){const s=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return{xOffset:s,yOffset:i,manhattanDistance:s+i}}_touchEndHandler(e){let t=w(e.changedTouches,(0,n.ensureNotNull)(this._activeTouchId));if(null===t&&0===e.touches.length&&(t=e.changedTouches[0]),null===t)return;this._activeTouchId=null,this._lastTouchEventTimeStamp=y(e),this._clearLongTapTimeout(),this._touchMoveStartPosition=null,this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);const s=this._makeCompatEvent(e,t);if(this._processTouchEvent(s,this._handlers.touchEndEvent),++this._tapCount,this._tapTimeoutId&&this._tapCount>1){const{manhattanDistance:e}=this._touchMouseMoveWithDownInfo(v(t),this._tapPosition);e<30&&!this._cancelTap&&this._processTouchEvent(s,this._handlers.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processTouchEvent(s,this._handlers.tapEvent),this._handlers.tapEvent&&(0,a.preventDefault)(e));0===this._tapCount&&(0,a.preventDefault)(e),0===e.touches.length&&this._longTapActive&&(this._longTapActive=!1,(0,a.preventDefault)(e))}_touchCancelHandler(e){this._touchEndHandler(e)}_mouseUpHandler(e){if(0!==e.button)return;const t=this._makeCompatEvent(e);if(this._mouseMoveStartPosition=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),o.isFF){this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(e))if(this._processMouseEvent(t,this._handlers.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1){const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(v(e),this._clickPosition);s<5&&!this._cancelClick&&this._processMouseEvent(t,this._handlers.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processMouseEvent(t,this._handlers.mouseClickEvent)}_clearLongTapTimeout(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)}_touchStartHandler(e){if(null!==this._activeTouchId)return this._clearLongTapTimeout(),void this._resetTapTimeout();const t=e.changedTouches[0]
;this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=y(e);const s=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartPosition=v(t),this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{const t=this._touchMoveHandler.bind(this),i=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=()=>{s.removeEventListener("touchmove",t),s.removeEventListener("touchend",i)},s.addEventListener("touchmove",t,{passive:!1}),s.addEventListener("touchend",i,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),240)}const i=this._makeCompatEvent(e,t);this._processTouchEvent(i,this._handlers.touchStartEvent),this._tapTimeoutId||(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapPosition=v(t))}_wheelClickHandler(e){if(1!==e.button)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.wheelClickEvent)}_mouseDownHandler(e){if(0!==e.button)return;const t=this._target.ownerDocument.documentElement;o.isFF&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartPosition=v(e),this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{const e=this._mouseMoveWithDownHandler.bind(this),s=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=()=>{t.removeEventListener("mousemove",e),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",e),t.addEventListener("mouseup",s)}if(this._mousePressed=!0,this._firesTouchEvents(e))return;const s=this._makeCompatEvent(e);this._processMouseEvent(s,this._handlers.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickPosition=v(e))}_init(){this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._touchCancelHandler.bind(this));{const e=this._target.ownerDocument,t=e=>!e.target||!this._target.contains(e.target),s=e=>{if(!t(e))return;const s=e.changedTouches[0];this._lastTouchEventTimeStamp=y(e),this._processTouchEvent(this._makeCompatEvent(e,s),this._handlers.touchStartOutsideEvent)},i=e=>{t(e)&&!this._firesTouchEvents(e)&&this._processMouseEvent(this._makeCompatEvent(e),this._handlers.mouseDownOutsideEvent)};this._unsubscribeOutsideTouchEvents=()=>{e.removeEventListener("touchstart",s)},this._unsubscribeOutsideMouseEvents=()=>{e.removeEventListener("mousedown",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",s,{passive:!0})}o.CheckMobile.iOS()&&(this._unsubscribeMobileSafariEvents=()=>{this._target.removeEventListener("dblclick",this._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),
this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("contextmenu",this._contextMenuHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),(0,a.preventScrollByWheelClick)(this._target),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._target.addEventListener(u,this._wheelClickHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",(()=>{}),{passive:!1})}_initPinch(){void 0===this._handlers.pinchStartEvent&&void 0===this._handlers.pinchEvent&&void 0===this._handlers.pinchEndEvent||(this._target.addEventListener("touchstart",(e=>this._checkPinchState(e.touches)),{passive:!0}),this._target.addEventListener("touchmove",(e=>{if(null===this._pinchInfo)return;const t=w(e.touches,(0,n.ensureNotNull)(this._activeTouchId)),s=w(e.touches,this._pinchInfo.secondTouchId);if(t&&s&&void 0!==this._handlers.pinchEvent){const{startPinchDistance:i,startPinchMiddlePoint:n}=this._pinchInfo,o=b(t,s)/i,r=f(this._target);this._handlers.pinchEvent(n,{x:t.clientX-r.left,y:t.clientY-r.top},{x:s.clientX-r.left,y:s.clientY-r.top},o),(0,a.preventDefault)(e)}}),{passive:!1}),this._target.addEventListener("touchend",(e=>{this._checkPinchState(e.touches)})))}_checkPinchState(e){1===e.length&&(this._pinchPrevented=!1),2!==e.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)}_startPinch(e){if(void 0!==this._handlers.pinchStartEvent&&null===this._pinchInfo){const t=f(this._target);let s,i;e[0].identifier===this._activeTouchId?(s=e[0],i=e[1]):(s=e[1],i=e[0]);const n={x:s.clientX-t.left,y:s.clientY-t.top},o={x:i.clientX-t.left,y:i.clientY-t.top},r={x:(n.x+o.x)/2,y:(n.y+o.y)/2};this._handlers.pinchStartEvent(r,n,o,{bothPointsOnTargetElement:this._target.contains(i.target)})&&(this._pinchInfo={startPinchDistance:b(s,i),startPinchMiddlePoint:r,secondTouchId:i.identifier})}this._clearLongTapTimeout()}_stopPinch(){null!==this._pinchInfo&&(this._pinchInfo=null,this._handlers.pinchEndEvent?.())}_mouseLeaveHandler(e){if(this._unsubscribeMousemove&&this._unsubscribeMousemove(),this._firesTouchEvents(e))return;if(!this._acceptMouseLeave)return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.mouseLeaveEvent),this._acceptMouseLeave=!o.CheckMobile.iOS()}_longTapHandler(e){const t=w(e.touches,(0,n.ensureNotNull)(this._activeTouchId));if(null===t)return;const s=this._makeCompatEvent(e,t);this._processTouchEvent(s,this._handlers.longTapEvent),this._processTouchEvent(s,this._handlers.touchContextMenuEvent),this._cancelTap=!0,this._longTapActive=!0}_contextMenuHandler(e){if((0,a.preventDefault)(e),null!==this._touchMoveStartPosition)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.contextMenuEvent),this._cancelClick=!0}_firesTouchEvents(e){
return e.sourceCapabilities&&void 0!==e.sourceCapabilities.firesTouchEvents?e.sourceCapabilities.firesTouchEvents:y(e)<this._lastTouchEventTimeStamp+500}_processTouchEvent(e,t){(0,l.setLastMouseOrTouchEventInfo)(e),t&&t.call(this._handlers,e)}_processMouseEvent(e,t){window.TVD&&("mouseenter"===e.srcType||"mousemove"===e.srcType)&&c>0?c--:("mouseleave"!==e.srcType&&(0,l.setLastMouseOrTouchEventInfo)(e),t&&t.call(this._handlers,e))}_makeCompatEvent(e,t){const s=t||e,n=(0,i.default)((()=>this._target.getBoundingClientRect()||{left:0,top:0}));return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,get localX(){return s.clientX-n().left},get localY(){return s.clientY-n().top},ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,isTouch:!e.type.startsWith("mouse")&&"contextmenu"!==e.type&&"click"!==e.type,stylus:"stylus"===t?.touchType,srcType:e.type,target:s.target,view:e.view,preventDefault:()=>{"touchstart"!==e.type&&(0,a.preventDefault)(e)}}}}function f(e){return e.getBoundingClientRect()||{left:0,top:0}}function v(e){return{x:e.pageX,y:e.pageY}}function b(e,t){const s=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(s*s+i*i)}function y(e){return e.timeStamp||performance.now()}function w(e,t){for(let s=0;s<e.length;++s)if(e[s].identifier===t)return e[s];return null}},339709:(e,t,s)=>{"use strict";s.d(t,{customFormatters:()=>i});const i={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null,priceFormatterFactory:null,studyFormatterFactory:null}},246125:(e,t,s)=>{"use strict";s.d(t,{availableDateFormats:()=>b,dateFormatFunctions:()=>f,defaultDateFormat:()=>y,getDateFormatWithWeekday:()=>v,months:()=>r});var i=s(444372),n=s(39654),o=s(574313);const r={1:()=>i.t(null,void 0,s(562310)),2:()=>i.t(null,void 0,s(302507)),3:()=>i.t(null,void 0,s(92767)),4:()=>i.t(null,void 0,s(227072)),5:()=>i.t(null,{context:"short"},s(13132)),6:()=>i.t(null,void 0,s(800429)),7:()=>i.t(null,void 0,s(853786)),8:()=>i.t(null,void 0,s(546450)),9:()=>i.t(null,void 0,s(806816)),10:()=>i.t(null,void 0,s(912179)),11:()=>i.t(null,void 0,s(526899)),12:()=>i.t(null,void 0,s(532084))},a={1:()=>i.t(null,void 0,s(914568)),2:()=>i.t(null,void 0,s(913534)),3:()=>i.t(null,void 0,s(914530)),4:()=>i.t(null,void 0,s(903762))},l=(e,t)=>(t?e.getMonth():e.getUTCMonth())+1,c=(e,t)=>t?e.getFullYear():e.getUTCFullYear(),u=e=>e.toLocaleDateString(window.language?(0,n.getIsoLanguageCodeFromLanguage)(window.language):void 0,{weekday:"short",timeZone:"UTC"}),d=(e,t)=>a[((e,t)=>Math.floor((l(e,t)-1)/3)+1)(e,t)](),h=(e,t)=>(0,o.numberToStringWithLeadingZero)(((e,t)=>t?e.getDate():e.getUTCDate())(e,t),2),_=(e,t)=>r[l(e,t)](),m=(e,t)=>(0,o.numberToStringWithLeadingZero)(l(e,t),2),p=(e,t)=>(0,o.numberToStringWithLeadingZero)(c(e,t)%100,2),g=(e,t)=>(0,o.numberToStringWithLeadingZero)(c(e,t),4),f={"qq 'yy":(e,t)=>`${d(e,t)} '${p(e,t)}`,"dd MMM 'yy":(e,t)=>`${h(e,t)} ${_(e,t)} '${p(e,t)}`,"MMM 'yy":(e,t)=>`${_(e,t)} '${p(e,t)}`,"MMM dd, yyyy":(e,t)=>`${_(e,t)} ${h(e,t)}, ${g(e,t)}`,
"MMM yyyy":(e,t)=>`${_(e,t)} ${g(e,t)}`,"MMM dd":(e,t)=>`${_(e,t)} ${h(e,t)}`,"dd MMM":(e,t)=>`${h(e,t)} ${_(e,t)}`,"yyyy-MM-dd":(e,t)=>`${g(e,t)}-${m(e,t)}-${h(e,t)}`,"yy-MM-dd":(e,t)=>`${p(e,t)}-${m(e,t)}-${h(e,t)}`,"yy/MM/dd":(e,t)=>`${p(e,t)}/${m(e,t)}/${h(e,t)}`,"yyyy/MM/dd":(e,t)=>`${g(e,t)}/${m(e,t)}/${h(e,t)}`,"dd-MM-yyyy":(e,t)=>`${h(e,t)}-${m(e,t)}-${g(e,t)}`,"dd-MM-yy":(e,t)=>`${h(e,t)}-${m(e,t)}-${p(e,t)}`,"dd/MM/yy":(e,t)=>`${h(e,t)}/${m(e,t)}/${p(e,t)}`,"dd/MM/yyyy":(e,t)=>`${h(e,t)}/${m(e,t)}/${g(e,t)}`,"MM/dd/yy":(e,t)=>`${m(e,t)}/${h(e,t)}/${p(e,t)}`,"MM/dd/yyyy":(e,t)=>`${m(e,t)}/${h(e,t)}/${g(e,t)}`};function v(e){return"ja"===window.language?(t,s)=>`${f[e](t,s)} (${u(t)})`:(t,s)=>`${u(t)} ${f[e](t,s)}`}const b=Object.keys(f),y=()=>-1!==["ja","ko","zh","zh_TW"].indexOf(window.language||"")?"yyyy-MM-dd":"dd MMM 'yy"},319448:(e,t,s)=>{"use strict";s.d(t,{DateTimeFormatter:()=>r});var i=s(300484),n=s(553220);const o={dateFormat:"yyyy-MM-dd",withWeekday:!1,timeFormat:i.hourMinuteSecondFormat,dateTimeSeparator:" "};class r{constructor(e={}){const t=Object.assign({},o,e);this._dateFormatter=new n.DateFormatter(t.dateFormat,t.withWeekday),this._timeFormatter=new i.TimeFormatter(t.timeFormat),this._separator=t.dateTimeSeparator}format(e,t){const s=t?.dateTimeSeparator??this._separator;return`${this._dateFormatter.format(e)}${s}${this._timeFormatter.format(e)}`}formatLocal(e,t){const s=t?.dateTimeSeparator??this._separator;return`${this._dateFormatter.formatLocal(e)}${s}${this._timeFormatter.formatLocal(e)}`}}},359268:(e,t,s)=>{"use strict";s.d(t,{PriceColorer:()=>i});var i,n=s(930203),o=s(790188);!function(e){function t(e,t){return 0===e?t&&void 0!==t.neutral?t.neutral:n.color.black70:e>0?t&&void 0!==t.up?t.up:o.colorsPalette["color-success"]:t&&void 0!==t.down?t.down:o.colorsPalette["color-danger"]}e.formatSign=t,e.formatDiff=function(e,s){return t(s-e)},e.domDifference=function(e,t,s=0,i="",n=""){function o(e){const t=document.createElement("span");return t.innerHTML=e,t}const r=document.createElement("div");if(!s)return r.appendChild(o(e)),r;const a=e+"",l=t+"";let c=null;if(a.length===l.length){for(let e=0;e<a.length;e++)if(a.charAt(e)!==l.charAt(e)){c=e;break}}else c=Number("0");if(null===c)return r.appendChild(o(a)),r;const u=o(a.substring(0,c)),d=document.createElement("span");return d.className=s<0?i:n,d.appendChild(o(a.substring(c))),r.appendChild(u),r.appendChild(d),r}}(i||(i={}))},735211:(e,t,s)=>{"use strict";s.d(t,{PriceFormatter:()=>a});var i=s(801786),n=s(93500),o=s(124829),r=s(798791);class a{constructor(e={}){this.type="price";const{minMove2:t,fractional:s,variableMinTick:a,ignoreMinMove:l,ignoreLocaleNumberFormat:c}=e,u=!e.minMove||l?1:e.minMove,d=(0,o.isNumber)(e.priceScale)&&(0,o.isInteger)(e.priceScale)?e.priceScale:100,h=(0,r.calculateDecimal)(d,u,s,t),_={...e,minMove:u,priceScale:d,fractionalLength:h};if(d<0)throw new TypeError("invalid base");this._priceScale=d,this._minMove=u,this._minMove2=t,this._fractional=s,this._variableMinTick=a,this._ignoreMinMove=l,this._fractionalLength=h,
this._ignoreLocaleNumberFormat=c,this._implementation=s?new n.FractionalPriceFormatterImpl(_):new i.DecimalPriceFormatterImpl(_)}isFractional(){return!!this._fractional}state(){return{minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale,variableMinTick:this._variableMinTick,ignoreMinMove:this._ignoreMinMove,fractional:this._fractional}}formatChange(e,t,s){return this._implementation.formatImpl(e-t,{...s,variableMinTickDataPrice:Math.min(Math.abs(e),Math.abs(t))})}format(e,t){return this._implementation.formatImpl(e,t)}parse(e,t){return this._implementation.parse(e,t)}hasForexAdditionalPrecision(){return this._implementation.hasForexAdditionalPrecision()}static serialize(e){return e.state()}static deserialize(e){return new a(e)}}},411559:(e,t,s)=>{"use strict";s.d(t,{hourMinuteFormat:()=>r,hourMinuteNonZeroSecondFormat:()=>n,hourMinuteSecondFormat:()=>i,hourMinuteSecondMillisecFormat:()=>o,twelveHourMinuteFormat:()=>c,twelveHourMinuteNonZeroSecondFormat:()=>l,twelveHourMinuteSecondFormat:()=>a});const i="%h:%m:%s",n="%h:%m:%s+",o="%h:%m:%s.%ss+",r="%h:%m",a="%h:%m:%s %ampm",l="%h:%m:%s+ %ampm",c="%h:%m %ampm"},300484:(e,t,s)=>{"use strict";s.d(t,{TimeFormatter:()=>r,hourMinuteFormat:()=>o.hourMinuteFormat,hourMinuteNonZeroSecondFormat:()=>o.hourMinuteNonZeroSecondFormat,hourMinuteSecondFormat:()=>o.hourMinuteSecondFormat,hourMinuteSecondMillisecFormat:()=>o.hourMinuteSecondMillisecFormat,twelveHourMinuteFormat:()=>o.twelveHourMinuteFormat,twelveHourMinuteNonZeroSecondFormat:()=>o.twelveHourMinuteNonZeroSecondFormat,twelveHourMinuteSecondFormat:()=>o.twelveHourMinuteSecondFormat});var i=s(339709),n=s(574313),o=s(411559);class r{constructor(e){this._isTwelveHoursFormat=!1,this._valuesAndDelimeters=[];const t=e||o.hourMinuteSecondFormat,s=new RegExp("%h|%m|%s\\+|%ss\\+|%ss|%ampm|%s","g");let i=s.exec(t),n=0;for(;null!==i;){const e=i[0];"%ampm"===e&&(this._isTwelveHoursFormat=!0);const o=t.substring(n,i.index);""!==o&&this._valuesAndDelimeters.push(o),this._valuesAndDelimeters.push(e),n=i.index+e.length,i=s.exec(t)}}format(e){return i.customFormatters.timeFormatter?i.customFormatters.timeFormatter.format(e):this._formatTime(e,!1)}formatLocal(e){return i.customFormatters.timeFormatter?i.customFormatters.timeFormatter.formatLocal?i.customFormatters.timeFormatter.formatLocal(e):i.customFormatters.timeFormatter.format(e):this._formatTime(e,!0)}_formatTime(e,t){let s=t?e.getHours():e.getUTCHours();const i=t?e.getMinutes():e.getUTCMinutes(),o=t?e.getSeconds():e.getUTCSeconds(),r=t?e.getMilliseconds():e.getUTCMilliseconds();let a="";this._isTwelveHoursFormat&&(a=s>=12?"PM":"AM",s%=12,s=s||12);let l="",c=!1;for(let e=this._valuesAndDelimeters.length-1;e>=0;e--){const t=this._valuesAndDelimeters[e];let u;switch(t){case"%h":u=(0,n.numberToStringWithLeadingZero)(s,2);break;case"%m":u=(0,n.numberToStringWithLeadingZero)(i,2);break;case"%s+":0!==o?u=(0,n.numberToStringWithLeadingZero)(o,2):(u="",c=!0);break;case"%s":u=(0,n.numberToStringWithLeadingZero)(o,2);break;case"%ss":u=(0,
n.numberToStringWithLeadingZero)(r,3);break;case"%ss+":0!==r?u=(0,n.numberToStringWithLeadingZero)(r,3):(u="",c=!0);break;case"%ampm":u=a;break;default:if(c){c=!1;continue}u=t}l=u+l}return l}}},957365:(e,t,s)=>{"use strict";s.d(t,{PLACE_HOLDER:()=>r,VolumeFormatter:()=>c});var i=s(444372),n=s(397566),o=s(124829);const r="---",a=[{value:3,letter:"K"},{value:6,letter:"M"},{value:9,letter:"B"},{value:12,letter:"T"}];function l(e,t){const s=e-t;return a.find((e=>e.value>=s))??a[a.length-1]}class c{constructor(e={}){this.type="volume";const{precision:t=0,minPrecision:s=0,dimensionPrecision:i=2,dimensionMinPrecision:o=0,significantDigits:r=3,ignoreLocaleNumberFormat:a,removeSpaceBeforeDimension:l}=e;this._precision=t,this._formatter=new n.NumericFormatter({ignoreLocaleNumberFormat:a,precision:this._precision,minPrecision:s}),this._dimensionPrecision=i,this._dimensionFormatter=new n.NumericFormatter({ignoreLocaleNumberFormat:a,precision:this._dimensionPrecision,minPrecision:o}),this._significantDigits=r,this._fractionalValues=void 0!==t&&t>0,this._spaceBeforeDimension=l?"":"",this._options=e}state(){const{ignoreLocaleNumberFormat:e,...t}=this._options;return t}format(e,t){if(!(0,o.isNumber)(e))return r;if(Math.abs(e)>=1e100)return i.t(null,void 0,s(696935));let n="";Math.abs(e)<1&&(e=+e.toFixed(this._precision)),e<0?n="":e>0&&t?.signPositive&&(n="+"),e=Math.abs(e);const a=!!(t?.ignoreLocaleNumberFormat??this._options.ignoreLocaleNumberFormat);let c,u,d=Math.floor(Math.log10(e))+1;if(d<=this._significantDigits&&(e=+e.toFixed(this._precision),d=Math.floor(Math.log10(e))+1),d<=this._significantDigits)c=this._formatNumber(e,a,this._formatter);else{let t=l(d,this._significantDigits);const s=Math.pow(10,t.value);e=+(e/s).toFixed(this._dimensionPrecision)*s,t=l(Math.floor(Math.log10(e))+1,this._significantDigits),c=this._formatNumber(e/Math.pow(10,t.value),a,this._dimensionFormatter),u=t.letter}return u?`${n}${c}${this._spaceBeforeDimension}${u}`:`${n}${c}`}parse(e,t){if("---"===e)return{error:"not a number",res:!1,value:NaN};const s={K:1e3,M:1e6,B:1e9,T:1e12},i=(e=e.replace("","-")).slice(-1);if(s.hasOwnProperty(i)){const n=this._formatter.parse(e.slice(0,-1).trim(),t),r=n.res?n.value:NaN;return(0,o.isNumber)(r)?{res:!0,value:r*s[i]}:{error:"not a number",res:!1,value:NaN}}{const s=this._formatter.parse(e.trim(),t),i=s.res?s.value:NaN;return(0,o.isNumber)(i)?{res:!0,value:i}:{error:"not a number",res:!1,value:NaN}}}static serialize(e){return e.state()}static deserialize(e){return new c(e)}_formatNumber(e,t,s){if(this._fractionalValues&&0!==e){const t=14-Math.ceil(Math.log10(e)),s=Math.pow(10,t);e=Math.round(e*s)/s}return s.format(e,{ignoreLocaleNumberFormat:t})}}},518439:(e,t,s)=>{"use strict";var i;s.d(t,{PlotRowSearchMode:()=>i}),function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.Exact=0]="Exact",e[e.NearestRight=1]="NearestRight"}(i||(i={}))},124066:(e,t,s)=>{"use strict";var i;s.d(t,{SymbolErrorPermissionDeniedReason:()=>i,invalidSymbol:()=>o,permissionDenied:()=>n}),function(e){e.Symbol="symbol",e.GroupPermission="group"
}(i||(i={}));const n="permission denied",o="invalid symbol"},979351:(e,t,s)=>{"use strict";s.d(t,{unpackNonSeriesData:()=>a});var i=s(130551),n=s(650151);function o(e){if(!(0,i.isObject)(e))throw new Error("Graphics commands should be wrapped in an object");if((0,i.hasProperty)(e,"create"),(0,i.hasProperty)(e,"erase")){const t=e.erase;(0,n.assert)(Array.isArray(t),"Collection of erase commands should be array");for(const e of t){if(!(0,i.isObject)(e)||!(0,i.hasProperty)(e,"action"))throw new Error("Command should be an object with 'action' property");(0,n.assert)("all"===e.action||"one"===e.action,"Erase command action should be 'all' or 'one'")}}return e}async function r(e){{const[{inflateZlib:t,inflateRaw:i},{unpackImpl:n}]=await Promise.all(["function"==typeof DecompressionStream?s.e(95465).then(s.bind(s,23536)):Promise.all([s.e(84069),s.e(82170)]).then(s.bind(s,458140)),s.e(95465).then(s.bind(s,532152))]);return n(t,i,e)}}async function a(e){if(""===e)return null;const t=JSON.parse(e);if(!(0,i.isObject)(t)||"function"==typeof t)throw new Error("Non-object content in the non-series envelope");if((0,i.hasProperty)(t,"indexes_replace"))return{indexes_replace:!0};const s={indexes_replace:!1};if((0,i.hasProperty)(t,"offsets")&&(s.offsets=t.offsets),(0,i.hasProperty)(t,"isUpdate")){if("boolean"!=typeof t.isUpdate)throw new Error('Invalid type of "isUpdate" field');s.isUpdate=t.isUpdate}return(0,i.hasProperty)(t,"data")&&(s.data=t.data),(0,i.hasProperty)(t,"graphicsCmds")&&(s.graphicsCmds=o(t.graphicsCmds)),(0,i.hasProperty)(t,"dataCompressed")&&(s.data=await r(t.dataCompressed)),(0,i.hasProperty)(t,"graphicsCmdsCompressed")&&(s.graphicsCmds=o(await r(t.graphicsCmdsCompressed))),s}},368628:(e,t,s)=>{"use strict";s.d(t,{SeriesData:()=>_,barFunction:()=>u,seriesPlotFunctionMap:()=>c});var i,n=s(650151),o=s(55243),r=s(828473);!function(e){e[e.FromLeft=-1]="FromLeft",e[e.FromRight=1]="FromRight"}(i||(i={}));const a={open:e=>e[1],high:e=>e[2],low:e=>e[3],close:e=>e[4],hl2:e=>(e[2]+e[3])/2,hlc3:e=>(e[2]+e[3]+e[4])/3,ohlc4:e=>(e[1]+e[2]+e[3]+e[4])/4},l=["open","high","low","close","hl2","hlc3","ohlc4"];function c(){const e=new Map;return l.forEach(((t,s)=>{e.set(t,u(t))})),e}function u(e,t,s){const i=a[t??e],n=a[e],o=a[s??e];return(e,t)=>{switch(t){case 0:return i(e);case 2:return o(e);default:return n(e)}}}function d(e,t){return null==e[t]}const h=[{barsToMerge:10,forBarspacingLargerThen:.03},{barsToMerge:30,forBarspacingLargerThen:.01},{barsToMerge:100,forBarspacingLargerThen:.003},{barsToMerge:500,forBarspacingLargerThen:0}];class _{constructor(){this._pressedChunks={chunks:new Map,priceSource:"uninitialized"},this.m_bars=new o.PlotList(c(),d),this.m_nsBars=new o.PlotList(c(),d),this._clearPressedChunks()}bars(){return this.m_bars}nsBars(){return this.m_nsBars}pressedChunks(e,t){if(t!==this._pressedChunks.priceSource){this._pressedChunks.priceSource=t;const e=this.m_bars.first();e&&(this._clearPressedChunks(),this._rebuildPressedChunks(e))}const s=(0,n.ensureDefined)(h.find((t=>t.forBarspacingLargerThen<=e)));return(0,
n.ensureDefined)(this._pressedChunks.chunks.get(s.barsToMerge))}mergeRegularBars(e){const t=this.m_bars.size(),s=this.m_bars.merge(e);return s&&"uninitialized"!==this._pressedChunks.priceSource&&(t===this.m_bars.size()&&s.index===this.m_bars.lastIndex()?this._updateLatestChunks():this._rebuildPressedChunks(s)),s}size(){return this.m_bars.size()+this.m_nsBars.size()}each(e){this.m_bars.each(e),this.m_nsBars.each(e)}clear(){this.m_bars.clear(),this.m_nsBars.clear(),this.lastProjectionPrice=void 0,this._clearPressedChunks()}clone(){const e=new _;return e.lastProjectionPrice=this.lastProjectionPrice,e.boxSize=this.boxSize,e.reversalAmount=this.reversalAmount,e.m_bars=this.m_bars.clone(),e.m_nsBars=this.m_bars.clone(),e}isEmpty(){return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()}first(){return this.m_bars.isEmpty()?this.m_nsBars.first():this.m_bars.first()}last(){return this.m_nsBars.isEmpty()?this.m_bars.last():this.m_nsBars.last()}search(e,t,s){return this.nsBars().isEmpty()?this.bars().search(e,t,s):this.bars().isEmpty()||(0,n.ensureNotNull)(this.nsBars().firstIndex())<=e?this.nsBars().search(e,t,s):this.bars().search(e,t,s)}valueAt(e){const t=this.search(e);return null!==t?t.value:null}plotValueToTimePointIndex(e,t,s){if(s===i.FromRight){const s=(s,i)=>{const n=i[t];return null!=n&&e>=n},i=this.m_bars.findLast(s);if(null!==i)return i.index;const n=this.m_nsBars.findLast(s);return null!==n?n.index:this.m_bars.firstIndex()}if(s===i.FromLeft){const s=(s,i)=>{const n=i[t];return null!=n&&e<=n},i=this.m_bars.findFirst(s);if(null!==i)return i.index;const n=this.m_nsBars.findFirst(s);return null!==n?n.index:this.m_bars.lastIndex()}throw new Error("plotValueToTimePointIndex: unsupported search mode")}moveData(e){this.m_bars.move(e),this.m_nsBars.move(e),this.m_bars.size()>0&&this._rebuildPressedChunks((0,n.ensureNotNull)(this.m_bars.first()))}_rebuildPressedChunks(e){const t=this._pressedChunks.priceSource;if("uninitialized"===t)return;const s=e.index,i=a[t],o=(e,t,s)=>{let n=null;for(const o of e){const e=i(o.value);n&&o.index-n.startTime>=s.barsToMerge&&(t.push(n),n=null),n?(n.endTime=o.index,n.high=Math.max(n.high,e),n.low=Math.min(n.low,e),n.close=e):n={startTime:o.index,endTime:o.index,open:e,high:e,low:e,close:e}}n&&t.push(n)};h.forEach((e=>{const t=(0,n.ensureDefined)(this._pressedChunks.chunks.get(e.barsToMerge)),i=(0,r.lowerbound)(t,s,((e,t)=>e.endTime<t));if(0===i&&t.length>0){const s=t[0].startTime-1,i=(0,n.ensureNotNull)(this.m_bars.firstIndex()),r=this.m_bars.rangeIterator(i,s),a=[];o(r,a,e);const l=a.concat(t);this._pressedChunks.chunks.set(e.barsToMerge,l)}else{const s=(0,n.ensureNotNull)(this.m_bars.lastIndex());t.splice(i);let r=(0,n.ensureNotNull)(this.m_bars.firstIndex());t.length&&(r=t[t.length-1].endTime+1);const a=this.m_bars.rangeIterator(r,s);o(a,t,e)}}))}_updateLatestChunks(){const e=(0,n.ensureNotNull)(this.m_bars.last());h.forEach((t=>{const s=(0,n.ensureDefined)(this._pressedChunks.chunks.get(t.barsToMerge)),i=e.value[4],o=s[s.length-1];o.high=Math.max(o.high,i),o.low=Math.min(o.low,i),
o.close=i,o.endTime=e.index}))}_clearPressedChunks(){h.forEach((e=>this._pressedChunks.chunks.set(e.barsToMerge,[])))}}},320771:(e,t,s)=>{"use strict";s.d(t,{SeriesDataEvents:()=>n});var i=s(942634);class n{constructor(){this._created=new i.Delegate,this._modified=new i.Delegate,this._loading=new i.Delegate,this._completed=new i.Delegate,this._error=new i.Delegate,this._symbolError=new i.Delegate,this._symbolResolved=new i.Delegate,this._seriesError=new i.Delegate,this._symbolNotPermitted=new i.Delegate,this._symbolInvalid=new i.Delegate,this._symbolGroupNotPermitted=new i.Delegate,this._chartTypeNotPermitted=new i.Delegate,this._intradaySpreadNotPermitted=new i.Delegate,this._intradayExchangeNotPermitted=new i.Delegate,this._customIntervalNotPermitted=new i.Delegate,this._secondsIntervalNotPermitted=new i.Delegate,this._ticksIntervalNotPermitted=new i.Delegate,this._barReceived=new i.Delegate,this._seriesTimeFrame=new i.Delegate,this._dataUpdated=new i.Delegate,this._unsupportedResolutionRequested=new i.Delegate}destroy(){this._created.destroy(),this._modified.destroy(),this._loading.destroy(),this._completed.destroy(),this._error.destroy(),this._symbolError.destroy(),this._symbolResolved.destroy(),this._seriesError.destroy(),this._symbolInvalid.destroy(),this._symbolNotPermitted.destroy(),this._symbolGroupNotPermitted.destroy(),this._chartTypeNotPermitted.destroy(),this._intradaySpreadNotPermitted.destroy(),this._intradayExchangeNotPermitted.destroy(),this._customIntervalNotPermitted.destroy(),this._secondsIntervalNotPermitted.destroy(),this._ticksIntervalNotPermitted.destroy(),this._barReceived.destroy(),this._seriesTimeFrame.destroy(),this._dataUpdated.destroy(),this._unsupportedResolutionRequested.destroy()}created(){return this._created}modified(){return this._modified}loading(){return this._loading}completed(){return this._completed}error(){return this._error}symbolError(){return this._symbolError}symbolResolved(){return this._symbolResolved}seriesError(){return this._seriesError}symbolInvalid(){return this._symbolInvalid}symbolNotPermitted(){return this._symbolNotPermitted}symbolGroupNotPermitted(){return this._symbolGroupNotPermitted}chartTypeNotPermitted(){return this._chartTypeNotPermitted}intradaySpreadNotPermitted(){return this._intradaySpreadNotPermitted}intradayExchangeNotPermitted(){return this._intradayExchangeNotPermitted}customIntervalNotPermitted(){return this._customIntervalNotPermitted}secondsIntervalNotPermitted(){return this._secondsIntervalNotPermitted}ticksIntervalNotPermitted(){return this._ticksIntervalNotPermitted}barReceived(){return this._barReceived}seriesTimeFrame(){return this._seriesTimeFrame}dataUpdated(){return this._dataUpdated}unsupportedResolutionRequested(){return this._unsupportedResolutionRequested}fireCompleted(e){this._completed.fire(e)}fireCreated(e){this._created.fire(e)}fireModified(){this._modified.fire()}fireLoading(e){this._loading.fire(e)}fireError(){this._error.fire()}fireSymbolError(e){this._symbolError.fire(e),this.fireError()}fireSymbolResolved(e){
this._symbolResolved.fire(e)}fireSeriesError(e){this._seriesError.fire(e),this.fireError()}fireSymbolInvalid(){this._symbolInvalid.fire()}fireSymbolNotPermitted(e){this._symbolNotPermitted.fire(e)}fireSymbolGroupNotPermitted(e){this._symbolGroupNotPermitted.fire(e)}fireChartTypeNotPermitted(e){this._chartTypeNotPermitted.fire(e),this.fireError()}fireIntradaySpreadNotPermitted(){this._intradaySpreadNotPermitted.fire(),this.fireError()}fireIntradayExchangeNotPermitted(){this._intradayExchangeNotPermitted.fire(),this.fireError()}fireCustomIntervalNotPermitted(e){this._customIntervalNotPermitted.fire(e),this.fireError()}fireSecondsIntervalNotPermitted(){this._secondsIntervalNotPermitted.fire(),this.fireError()}fireTicksIntervalNotPermitted(){this._ticksIntervalNotPermitted.fire(),this.fireError()}fireBarReceived(e){this._barReceived.fire(e)}fireSeriesTimeFrame(e,t,s,i,n){this._seriesTimeFrame.fire(e,t,s,i,n)}fireDataUpdated(e,t,s,i){this._dataUpdated.fire(e,t,s,i)}fireUnsupportedResolutionRequested(){this._unsupportedResolutionRequested.fire()}}},501372:(e,t,s)=>{"use strict";s.d(t,{SeriesDataSource:()=>S,initialRequestOptionsToNumBars:()=>b,parseJapaneseProjectionBars:()=>T});var i=s(650151),n=s(124829),o=s(882782),r=s(378975),a=s(368628),l=s(979351),c=s(124066),u=s(320771),d=s(338619),h=s(975179),_=s(61625);const m=(0,d.getLogger)("Chart.SeriesDataSource");var p;!function(e){e[e.Idle=0]="Idle",e[e.AwaitingConnection=1]="AwaitingConnection",e[e.AwaitingFirstDataUpdate=2]="AwaitingFirstDataUpdate",e[e.Active=3]="Active"}(p||(p={}));let g=1;let f=1;const v=300;function b(e){return e.startDate?e.endDate||e.count?e.endDate?["from_to",e.startDate,e.endDate]:["bar_count",e.startDate,(0,i.ensure)(e.count)]:["from_to",e.startDate]:e.count||v}function y(e){return(0,n.isString)(e.symbol)?e.symbol:e.symbol.symbol}function w(e,t){(0,n.isString)(e.symbol)?e.symbol=t:e.symbol.symbol=t}class S{constructor(e,t,s,i){this._extSymbol=null,this._lastResolvedSymbol="",this._createSeriesOverriddenParams=0,this._instanceId=null,this._symbolInstanceId=null,this._resolution=null,this._timeFrame=null,this._data=new a.SeriesData,this._dataEvents=new u.SeriesDataEvents,this._status=p.Idle,this._turnaroundCounter=1,this._boundOnGatewayIsConnectedChanged=this._onGatewayIsConnectedChanged.bind(this),this._ongoingDataUpdate=Promise.resolve(),this._gateway=e,this._turnaroundPrefix=t,this._createSeriesParams=b(s??{count:v}),this._timeFrame=i||null,this._gateway.isConnected().subscribe(this._boundOnGatewayIsConnectedChanged)}destroy(){this.stop(),this._gateway.isConnected().unsubscribe(this._boundOnGatewayIsConnectedChanged)}modifySeries(e,t,s=null,o=!1,a=null){o&&(m.logNormal("Due to force flag clearing symbol & resolution to force re-requesting data."),this._extSymbol=null,this._resolution=null);const l=y(e),c=!this.symbolSameAsResolved(l);if(c&&(this._lastResolvedSymbol=""),this._extSymbol&&!c){w(e,y(this._extSymbol))}const u=this._extSymbol,d=this._resolution;if(this._extSymbol=e,this._resolution=t,
null===this._instanceId)return void(this._timeFrame=s);const h=!(0,n.deepEquals)(u,e)[0];h&&w(this._extSymbol,l);const _=null===d||!r.Interval.isEqual(d,t);(h||_||null!==s)&&(this._timeFrame=null,(h||_)&&this._turnaroundCounter++,h&&this._resolveSymbol(),this._gateway.modifySeries(this._instanceId,this.turnaround(),(0,i.ensureNotNull)(this._symbolInstanceId),this._resolution,a,s,this._onMessage.bind(this)),this._dataEvents.fireModified())}requestMoreData(e){null!==this._instanceId&&this._gateway.requestMoreData(this._instanceId,e,this._onMessage.bind(this))}requestMoreTickmarks(e){null!==this._instanceId&&this._gateway.requestMoreTickmarks(this._instanceId,e,this._onMessage.bind(this))}setFutureTickmarksMode(e){null!==this._instanceId&&this._gateway.setFutureTickmarksMode(e)}isStarted(){return this._status!==p.Idle}isActive(){return this._status===p.Active}resolution(){return this._resolution}start(){this.isStarted()?m.logNormal("start: data source is already started, nothing to do"):((0,i.assert)(null!==this._extSymbol,"symbol must be set before start"),(0,i.assert)(null!==this._resolution,"resolution must be set before start"),this._gateway.isConnected().value()?this._createSeries():this._changeStatusTo(p.AwaitingConnection))}stop(){this.isStarted()?(null!==this._instanceId&&(this._gateway.removeSeries(this._instanceId),this._instanceId=null),this._symbolInstanceId=null,this._changeStatusTo(p.Idle)):m.logNormal("stop: data source is already stopped, nothing to do")}instanceId(){return this._instanceId}data(){return this._data}setData(e){this._data=e}clearData(){this.isStarted()?this._enqueueUpdate((()=>this._clearDataImpl())):this._clearDataImpl()}dataEvents(){return this._dataEvents}turnaround(){return`${this._turnaroundPrefix}${this._turnaroundCounter}`}symbolInstanceId(){return this._symbolInstanceId}symbol(){return this._extSymbol}moveData(e){this._enqueueUpdate((()=>this._data.moveData(e)))}setInitialRequestOptions(e){this._createSeriesOverriddenParams=b(e)}symbolSameAsResolved(e){return null!==this._extSymbol&&(0,_.symbolSameAsResolved)(e,y(this._extSymbol),this._lastResolvedSymbol)}resolvedSymbol(){return null===this._extSymbol?null:y(this._extSymbol)}_resolveSymbol(){null!==this._extSymbol&&(this._symbolInstanceId=this._gateway.resolveSymbol("sds_sym_"+g++,(0,o.encodeExtendedSymbolOrGetSimpleSymbolString)(this._extSymbol),this._onMessage.bind(this)))}_clearDataImpl(){this._data.clear()}_changeStatusTo(e){(0,i.assert)(this._status!==e,"Source and destination status should be distinct"),m.logNormal(`Status changed from ${p[this._status]} to ${p[e]}`),this._status=e}_createSeries(){(0,i.assert)(this._status!==p.Active,'Status should not be "Active" when creating a study'),this._instanceId="sds_"+f++,this._resolveSymbol();const e=this._createSeriesOverriddenParams||this._createSeriesParams;this._createSeriesOverriddenParams&&(this._createSeriesOverriddenParams=0),this._gateway.createSeries(this._instanceId,this.turnaround(),(0,i.ensureNotNull)(this._symbolInstanceId),(0,
i.ensureNotNull)(this._resolution),e,this._timeFrame,this._onMessage.bind(this)),this._timeFrame=null,this._changeStatusTo(p.AwaitingFirstDataUpdate),this._dataEvents.fireCreated(this._instanceId)}_onGatewayIsConnectedChanged(e){e?this._onGatewayConnected():this._onGatewayDisconnected()}_onGatewayConnected(){this._status===p.AwaitingConnection&&this._createSeries()}_onGatewayDisconnected(){this._status!==p.Idle&&this._status!==p.AwaitingConnection&&(this._instanceId=null,this._changeStatusTo(p.AwaitingConnection)),this._turnaroundCounter=1}_onMessage(e){this._enqueueUpdate((()=>this._onMessageImpl(e)))}async _onMessageImpl(e){switch(e.method){case"symbol_resolved":{const[t,s]=e.params;if(t!==this._symbolInstanceId){null!==this._symbolInstanceId&&m.logNormal(`Resolve for old symbol, expected: ${this._symbolInstanceId}, actual ${e.params[0]}`);break}this._onSymbolResolved(s);break}case"symbol_error":if(e.params[0]!==this._symbolInstanceId){null!==this._symbolInstanceId&&m.logNormal(`Symbol error for old symbol, expected: ${this._symbolInstanceId}, actual ${e.params[0]}`);break}this._onSymbolError(e);break;case"series_timeframe":{const[t,s,i,n,o,r,a]=e.params;if(!this._checkTurnaround(t,s)){m.logNormal(`Time frame for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${s})`);break}this._onSeriesTimeFrame(i,n,o,r,a);break}case"series_error":{const[t,s]=e.params;if(!this._checkTurnaround(t,s)){m.logNormal(`Series error for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${s})`);break}this._onSeriesError(e.params[2]);break}case"series_loading":{const[t,s]=e.params;if(!this._checkTurnaround(t,s))break;this._onSeriesLoading(e.time);break}case"series_completed":{const[t,s,i,n]=e.params;if(!this._checkTurnaround(t,i)){m.logNormal(`Series completed for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${i})`);break}this._onSeriesCompleted(s,e.time,n);break}case"data_update":if(!this._checkTurnaround(e.params.customId,e.params.turnaround)){m.logNormal(`Data update for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${e.params.customId} (${e.params.turnaround})`);break}await this._onDataUpdate(e.params.plots,e.params.nonseries,e.params.lastBar);break;case"clear_data":if(e.params.turnaround!==this.turnaround()){m.logNormal(`Clear data for old data, expected: ${this.turnaround()}, actual ${e.params.turnaround}`);break}this._clearDataImpl(),this._dataEvents.fireDataUpdated(void 0,!1,null,!1)}}_onSeriesError(e){let t,s;if("string"==typeof e)s={error:e},t=e;else if(s=e,e.ctx){const s={};Object.entries(e.ctx).forEach((([e,t])=>{s[e]=t.toString()})),t=e.error.format(s)}else t=e.error;if(t.startsWith("study_not_auth:")){const e=t.split(":",2)[1].split("@",2)[0];if(["BarSetRenko","BarSetPriceBreak","BarSetKagi","BarSetPnF"].includes(e))this._dataEvents.fireChartTypeNotPermitted(e);else{if("BarSetSpread"===e)return void this._dataEvents.fireIntradaySpreadNotPermitted();if("BarSetRange"===e){const e=`${(0,
i.ensureNotNull)(this._extSymbol).inputs.range}R`;this._dataEvents.fireCustomIntervalNotPermitted(e)}}}else{if(t.startsWith("unsupported"))return void this._dataEvents.fireUnsupportedResolutionRequested();"resolution_not_entitled"===t?this._dataEvents.fireIntradayExchangeNotPermitted():"custom_resolution"===t?this._dataEvents.fireCustomIntervalNotPermitted((0,i.ensureNotNull)(this._resolution)):"seconds_not_entitled"===t?this._dataEvents.fireSecondsIntervalNotPermitted():"ticks_not_entitled"===t&&this._dataEvents.fireTicksIntervalNotPermitted()}this._dataEvents.fireSeriesError(s)}_onSeriesTimeFrame(e,t,s,i,n){this._dataEvents.fireSeriesTimeFrame(e,t,s,i??!0,n)}_onSymbolError(e){if(e.params[1]===c.permissionDenied)switch(e.params[2]){case c.SymbolErrorPermissionDeniedReason.Symbol:this._dataEvents.fireSymbolNotPermitted(e.params[3]);break;case c.SymbolErrorPermissionDeniedReason.GroupPermission:this._dataEvents.fireSymbolGroupNotPermitted(e.params[3]);break;default:this._dataEvents.fireSymbolNotPermitted(e.params[2])}else e.params[1]===c.invalidSymbol&&this._dataEvents.fireSymbolInvalid();this._dataEvents.fireSymbolError(e.params[1])}_onSymbolResolved(e){this._lastResolvedSymbol=(0,i.ensureNotNull)((0,h.extractSymbolNameFromSymbolInfo)(e,"")),this._dataEvents.fireSymbolResolved(e)}async _onDataUpdate(e,t,s){this._onDataUnpacked(e,s,await T(t))}_enqueueUpdate(e){return this._ongoingDataUpdate=this._ongoingDataUpdate.then(e,e),this._ongoingDataUpdate}_onDataUnpacked(e,t,s){if(this._status===p.Idle)return;this._status===p.AwaitingFirstDataUpdate&&(this._changeStatusTo(p.Active),this._clearDataImpl());const i=this._data.bars().size(),n=this._data.bars().firstIndex(),o=this._data.mergeRegularBars(e);null!==s&&(this._data.nsBars().clear(),this._data.nsBars().merge(s.projectionPlots),this._data.lastProjectionPrice=s.lastPrice,null!==s.boxSize&&(this._data.boxSize=s.boxSize),this._data.reversalAmount=s.reversalAmount);const r=null===n,a=r||null!==o&&o.index<n;this._dataEvents.fireDataUpdated(t,a,o,r),i!==this._data.bars().size()&&null!==o&&this._dataEvents.fireBarReceived(o)}_onSeriesLoading(e){this._dataEvents.fireLoading(e)}_onSeriesCompleted(e,t,s){this._dataEvents.fireCompleted({updateMode:e,time:t,flags:s})}_checkTurnaround(e,t){return this._instanceId===e&&(void 0===t||t===this.turnaround())}}async function T(e){if(void 0===e)return{projectionPlots:[],boxSize:null};if(""===e.d||"nochange"===e.indexes)return null;const t=await(0,l.unpackNonSeriesData)(e.d);if(null===t||t.indexes_replace)return null;const s=e.indexes,{bars:i,price:n,boxSize:o,reversalAmount:r}=t.data;return{lastPrice:n,projectionPlots:(i||[]).map((e=>{let t;return"factor"in e?t=e.factor:"additionalPrice"in e&&(t=e.additionalPrice),{index:s[e.time],value:[0,e.open,e.high,e.low,e.close,e.volume,t]}})),reversalAmount:r,boxSize:o}}},597461:(e,t,s)=>{"use strict";s.d(t,{DwgExtend:()=>i,convertPointsToScreenDimension:()=>a,doesItemAffectVisibleRange:()=>l,isExtendInSameDirection:()=>r});var i,n=s(650151);function o(e,t){
return e===i.None?t:t===i.None?e:e===i.Both||t===i.Both?i.Both:e===t?t:i.Both}function r(e,t){return e===i.Both||e===t}function a(e,t,s,r,a,l,c,u,d,h){let _,m;if(null===e&&null===s){if(a!==i.Right&&a!==i.Both)return null;a=i.Both,_=0,m=u}else null===e?(_=c.indexToCoordinate((0,n.ensureNotNull)(s)-1),a=o(a,i.Left)):_=c.indexToCoordinate(e),null===s?(m=c.indexToCoordinate((0,n.ensureNotNull)(e)-1),a=o(a,i.Right)):m=c.indexToCoordinate(s);const p=_,g=l.priceToCoordinate(t,d),f=m,v=l.priceToCoordinate(r,d);return void 0!==h?(h.x1=p,h.y1=g,h.x2=f,h.y2=v,h.extend=a,h):{x1:p,y1:g,x2:f,y2:v,extend:a}}function l(e,t,s,n,o){let r=!1;switch(s){case i.Both:r=!0;break;case i.Right:r=null===t||null===e||e<=o;break;case i.Left:r=null===t||t>=n;break;default:null!==e&&null!==t?r=(e>=n||t>=n)&&(e<=o||t<=o):null!==e&&null===t?r=e<=o:null===e&&null!==t&&(r=t>=n)}return r}!function(e){e.None="n",e.Left="l",e.Right="r",e.Both="b"}(i||(i={}))},577916:(e,t,s)=>{"use strict";var i,n,o;s.d(t,{HHistDirection:()=>i,HHistLocation:()=>n,HHistVolumeMode:()=>o}),function(e){e.LeftToRight="left_to_right",e.RightToLeft="right_to_left"}(i||(i={})),function(e){e.Relative="relative",e.Absolute="absolute"}(n||(n={})),function(e){e.UpDown="Up/Down",e.Total="Total",e.Delta="Delta"}(o||(o={}))},892686:(e,t,s)=>{"use strict";s.d(t,{containsTpoTimePointIndexes:()=>r,dematerializeTpo:()=>l,isTpoInBarsRange:()=>c,materializeTpo:()=>a});var i=s(650151),n=s(501571),o=s(585240);const r=!0;function a(e,t){if(e.firstBarTime>=t.length||e.lastBarTime>=t.length)return null;const s=t[e.firstBarTime],o=t[e.lastBarTime];return s===n.INVALID_TIME_POINT_INDEX||o===n.INVALID_TIME_POINT_INDEX?null:((0,i.assert)(s<=o,"firstBarTime should not exceed lastBarTime"),{id:e.id,firstBarTime:s,lastBarTime:o,priceRange:e.priceRange,times:e.times})}function l(e,t,s){return{id:t,firstBarTime:(0,o.ensureTimePointIndexIndex)(s.indexOf(e.firstBarTime)),lastBarTime:(0,o.ensureTimePointIndexIndex)(s.indexOf(e.lastBarTime)),priceRange:e.priceRange,times:e.times}}function c(e,t){return!(e.lastBarTime<t.firstBar()||e.firstBarTime>t.lastBar())}},675647:(e,t,s)=>{"use strict";function i(e,t){return`${e}@${t}`}function n(e){return e.replace(/(@[^-]+-[^-]+).*$/,"$1")}s.d(t,{extractStudyId:()=>n,studyIdString:()=>i})},61625:(e,t,s)=>{"use strict";function i(e,t,s){return e===t||e===s}s.d(t,{symbolSameAsResolved:()=>i})},501571:(e,t,s)=>{"use strict";s.d(t,{INVALID_TIME_POINT_INDEX:()=>i,UNPLOTTABLE_TIME_POINT_INDEX:()=>n});const i=-2e6,n=-1e6},69184:(e,t,s)=>{"use strict";s.d(t,{getHourMinuteFormat:()=>n,getHourMinuteSecondFormat:()=>o,getTimeFormatForInterval:()=>r});var i=s(300484);function n(e){return"12-hours"===e?i.twelveHourMinuteFormat:i.hourMinuteFormat}function o(e){return"12-hours"===e?i.twelveHourMinuteSecondFormat:i.hourMinuteSecondFormat}function r(e,t){if(e.isRange())return function(e){return"12-hours"===e?i.twelveHourMinuteNonZeroSecondFormat:i.hourMinuteNonZeroSecondFormat}(t);if(e.isTicks())return i.hourMinuteSecondMillisecFormat;return e.isSeconds()||e.isTicks()?o(t):n(t)}},
84804:(e,t,s)=>{"use strict";s.r(t);var i=s(226722),n=s(345848),o=s(702598),r=s(325579),a=s(79342),l=s(66974),c=s(49437),u=s(338619);const d=(0,u.getLogger)("Common.Evercookie");s(174763);const h=new window.evercookie({domain:(0,l.isProd)()?".tradingview.com":location.hostname,lso:!1}),_=(0,u.getLogger)("Common.Evercookie"),m=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;class p{constructor(){this._cookieName="tv_ecuid",this._env=null,this.check=()=>{if(this._isEcNotAvailable()||c.TVLocalStorage.getItem("_tv_ec_ignore_username")===window.user.username)return;const e=window.user.id;this._getEcUids().catch((e=>{_.logWarn(`Error thrown inside getEcUids(). Leave evercookie data untouched. User: ${window.user.username} (${window.user.id})\nActual error: ${e}`)})).then((t=>{if(void 0===t)return void _.logWarn(`getEcUids() returned no data. Leave evercookie data untouched. User: ${window.user.username} (${window.user.id})`);let i=t.localEcUid;const n=t.remoteEcUids;i&&m.test(i)||(i=(0,a.guid)(),h.set(this._cookieName,i));const r=t=>{t.subscription_canceled&&Promise.all([s.e(72043),s.e(75816),s.e(46445),s.e(33253),s.e(51499),s.e(94563),s.e(82321),s.e(18932)]).then(s.bind(s,914788)).then((e=>e.createTrialCanceledDialog())),e===window.user.id&&t.is_suspicious?c.TVLocalStorage.setItem("is_suspicious","1"):c.TVLocalStorage.removeItem("is_suspicious")};n&&0!==n.length&&-1!==n.indexOf(i)||e!==window.user.id||function(e){const t=new FormData;return t.append("ecuid",e),(0,o.fetch)("/accounts/set-ecuid/",{body:t,credentials:"include",method:"POST"}).then((e=>{if(e.ok)return e.json().catch((e=>{d.logWarn(`Error in reponse.json() of /accounts/set-ecuid/. User: ${window.user.username} (${window.user.id})\nActual error: ${e}`)}));throw new Error("Unable to set remote ecuids. Response was not OK")}))}(i).then(r)})).catch((e=>{_.logError(e.message+` User: ${window.user.username} (${window.user.id})`)}))},this._isEcNotAvailable()||(this._env=(0,l.environment)(),(0,l.isDebug)()&&(this._cookieName+="_"+this._env))}_isEcNotAvailable(){return TradingView.onWidget&&TradingView.onWidget()||!window.user}_getLocalEcUid(){return new Promise((e=>{h.get(this._cookieName,(t=>{e(t)}))}))}_getEcUids(){return new Promise(((e,t)=>{let s;this._getLocalEcUid().then((e=>(s=e,function(e){return new Promise(((t,s)=>{const i=new FormData;e&&i.append("local_ecuid",e),(0,o.fetch)("/accounts/get-ecuid/",{body:i,credentials:"include",method:"POST"}).then((e=>{if(e.ok)return e.json().catch((e=>{d.logWarn(`Error in reponse.json() of /accounts/get-ecuid/. User: ${window.user.username} (${window.user.id})\nActual error: ${e}`)}));throw new Error("Unable to get remote ecuids. Response was not OK")})).then((e=>{t(e)})).catch((e=>{s(e)}))}))}(e)))).then((t=>{if(void 0===t)throw new Error(`getRemoteEcUids() returned no response. User: ${window.user.username} (${window.user.id})`);e({localEcUid:s,remoteEcUids:t.ecuids})})).catch((e=>{t(e)}))}))}}var g=s(501601);document.addEventListener("DOMContentLoaded",(()=>{
document.addEventListener("click",(e=>{const t=e.target.closest(".js-profile-message");t instanceof HTMLElement&&(e.preventDefault(),function(e){const t=e.dataset.username;window.runOrSignIn((()=>(0,g.openPMDialog)(t)),{source:"Private message from broker popup",verifiedPhoneRequired:!0})}(t))}))}));var f=s(802588),v=s(638456),b=s(314802),y=s(799786),w=s(605244);var S=s(251954),T=s(673747),E=s(411963);function C(e,t="x"){let s=!1;return"x"!==t&&"both"!==t||(s=s||e.offsetWidth<e.scrollWidth),"y"!==t&&"both"!==t||(s=s||e.offsetHeight<e.scrollHeight),s}function P(e,t="x"){for(const s of Array.from(e.children))if(s instanceof HTMLElement&&(C(s,t)||P(s,t)))return!0;return!1}function I(e){let t="x";return e.matches(".apply-overflow-tooltip--direction_both")?t="both":e.matches(".apply-overflow-tooltip--direction_y")&&(t="y"),t}function N(e){const t=e.getAttribute("data-overflow-tooltip-text");let s="";return s=t||(e.matches&&e.matches(".apply-overflow-tooltip--allow-text")?e.textContent||"":Array.from(e.childNodes).reduce(((e,t)=>(t.nodeType===Node.TEXT_NODE&&e.push(t.textContent||""),e)),[]).join("").trim()),s}function k(e,t){let s=!1;const i=e.children;for(let e=0;e<i.length;e++){const n=i[e];if(n instanceof HTMLElement&&C(n,t)){s=!0;break}}return s}function x(e){const t=e.target;if(t instanceof HTMLElement&&(t.matches(".apply-overflow-tooltip-focus")||t.querySelector(".apply-overflow-tooltip-focus"))){const e=t.matches(".apply-overflow-tooltip")?t:t.querySelector(".apply-overflow-tooltip"),s=I(e);if(e.matches(".apply-overflow-tooltip--check-children-recursively")){if(!P(e,s))return}else if(e.matches(".apply-overflow-tooltip--check-children")){if(!k(e,s))return}else if(!C(e,s))return;(0,T.showOnElement)(t,{text:N(e)});const i=()=>{(0,T.hide)(),t.removeEventListener("blur",i),t.removeEventListener("active-descendant-blur",i)};t.addEventListener("blur",i),t.addEventListener("active-descendant-blur",i)}}(0,E.whenDocumentReady)((()=>{document.addEventListener("mouseenter",(e=>{const t=e.target;if(t instanceof HTMLElement&&t.matches(".apply-overflow-tooltip")){const e=I(t);if(t.matches(".apply-overflow-tooltip--check-children-recursively")){if(!P(t,e))return}else if(t.matches(".apply-overflow-tooltip--check-children")){if(!k(t,e))return}else if(!C(t,e))return;(0,T.showOnElement)(t,{text:N(t)});const s=()=>{(0,T.hide)(),["mouseleave","mousedown"].forEach((e=>t.removeEventListener(e,s)))};["mouseleave","mousedown"].forEach((e=>t.addEventListener(e,s)))}}),!0),document.addEventListener("focus",x,!0),document.addEventListener("active-descendant-focus",x,!0)}));var M=s(942634),D=s(702406),L=s(45003);function F(e){return()=>{e()}}var O=s(591800),A=s(593110),R=s(355734),$=s(873509);const U=(e=document.documentElement)=>(0,$.getSelectorTreeWalker)(e,R.FOCUSABLE_SELECTOR);const V=`[${A.FOCUS_TRAP_DATA_ATTRIBUTE}="true"]`;class H{constructor(){this._handleMouseDown=()=>{this._forwardTab=void 0},this._handleKeyDown=e=>{this._forwardTab=void 0,[9,O.Modifiers.Shift+9].includes((0,O.hashFromEvent)(e))&&(this._forwardTab=!e.shiftKey)},
this._handleFocus=e=>{const t=e.target;if(void 0===this._forwardTab||!(t instanceof HTMLElement))return;const s=this._findDeepestFocusTrapElement(document.documentElement);if(!(s instanceof HTMLElement)||!s||s.contains(t))return;e.preventDefault(),e.stopPropagation(),t.blur();const i=s.compareDocumentPosition(t);if(i&Node.DOCUMENT_POSITION_PRECEDING||i&Node.DOCUMENT_POSITION_FOLLOWING){const e=this._forwardTab?j(s):j(s,!0);e instanceof HTMLElement&&e.focus()}},document.documentElement.addEventListener("focus",this._handleFocus,{capture:!0}),document.documentElement.addEventListener("keydown",this._handleKeyDown,{capture:!0}),document.documentElement.addEventListener("mousedown",this._handleMouseDown,{capture:!0})}destroy(){document.documentElement.removeEventListener("focus",this._handleFocus,{capture:!0}),document.documentElement.removeEventListener("keydown",this._handleKeyDown,{capture:!0}),document.documentElement.removeEventListener("mousedown",this._handleMouseDown,{capture:!0})}_findDeepestFocusTrapElement(e){const t=e.querySelectorAll(V);let s=null,i=-1;return t.forEach((t=>{const n=this._calculateParentCount(t,e);n>i&&(i=n,s=t)})),s}_calculateParentCount(e,t){let s=0,i=e.parentElement;for(;i&&i!==t;)"true"===i.getAttribute(A.FOCUS_TRAP_DATA_ATTRIBUTE)&&s++,i=i.parentElement;return s}}const B=F((()=>new H));function j(e,t){return t?function(e){const t=U(e);return(0,$.getLastDescendant)(t)}(e):function(e){const t=U(e);return(0,$.getFirstDescendant)(t)}(e)}const G=F((()=>{B()}));var W=s(468219),q=s(111903);var z=s(469959),Y=s(641261),X=s(665343),J=s(384295),K=s(521126);let Z,Q;function ee(){if(window.initData.lfs){const e=document.getElementsByClassName("js-admin-warning")[0];document.body.removeChild(e)}let e=!0;[/^\/chart\//,/^\/share-your-love\//,/^\/pine\//].forEach((t=>{t.test(window.location.pathname)&&(e=!1)})),e&&window.location.reload()}function te(e){window.user=(0,L.deepExtend)({},e),window.TradingView.changeLoginState(!0)}function se(e){const t=window.user.available_offers||{};{const e=document.documentElement;e.classList.toggle("is-authenticated",window.is_authenticated),e.classList.toggle("is-not-authenticated",!window.is_authenticated)}window.TVSettings&&window.TVSettings.sync(window.user.settings),window.is_authenticated?(e&&!1!==window.user.profile_data_filled||void 0===Q||Q.check(),e||(Promise.all([s.e(24032),s.e(46565),s.e(82321),s.e(19158)]).then(s.bind(s,689985)).then((e=>e.offerButtonLoginStateChangeInit())),(0,v.onGoPro)()&&window.location.reload()),!1===window.user.profile_data_filled&&((0,v.checkPageType)("mobile")||(0,b.isOnMobileAppPage)("any")||window.location.pathname.startsWith("/privacy-policy")||window.location.pathname.startsWith("/policies")||(0,E.whenDocumentReady)((()=>{(0,f.showSignModal)({mode:"create-account",onUnmountEvent:()=>{window.user.social_registration?(s.e(22947).then(s.bind(s,113452)).then((({registrationEvent:e})=>{e("Social")})),(0,Y.trackGTagAdsEvent)(Y.GTagEvent.RegistrationCompleted),(0,X.trackTwitterEvent)(X.TwitterEvent.RegistrationCompleted),(0,
J.trackCmEvent)(J.CmEvent.RegistrationCompleted),delete window.user.social_registration):i.TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:window.is_authenticated,user:window.user}))}})}),!0),(0,n.trackEvent)("Conversion","First login"),delete window.user.profile_data_filled),window.TradingView.setTrialAvailiable((0,K.isTrialAvailableForUser)(window.user,window.is_authenticated))):(Object.keys(t).forEach((e=>{const s=e;t[s].available_for_anons||delete t[s]})),window.user={username:"Guest",following:"0",followers:"0",ignore_list:[],available_offers:t},c.TVLocalStorage.removeItem("trial_availiable"))}Z=window.loginStateChange?window.loginStateChange:window.loginStateChange=new M.Delegate,Z.subscribe(null,se),(0,y.createGroup)({desc:"Support"}).add({desc:"Open",hotkey:y.Modifiers.Mod+191,handler:()=>(0,w.showSupportDialog)({initialState:"shortcuts"})}),i.TVXWindowEvents.on("loginStateChange",(e=>{const t=JSON.parse(e);window.user=t.user,window.is_authenticated=!!t.is_authenticated,Z.fire()})),i.TVXWindowEvents.on("signOut",(()=>{ee()})),(()=>{const e="user-obj-changed",t={};window.crossTabSyncUserAttr=t=>{const s={};t instanceof Array?t.forEach((e=>{s[e]=window.user[e]})):s[t]=window.user[t],i.TVXWindowEvents.emit(e,JSON.stringify(s))},i.TVXWindowEvents.on(e,(e=>{const s=JSON.parse(e);let i;for(i in s)if(s.hasOwnProperty(i)){window.user[i]=s[i];(t[i]||[]).forEach((e=>{e.fire(s[i])}))}}))})(),window.TradingView.changeLoginState=e=>{window.is_authenticated=!!e,i.TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:window.is_authenticated,user:window.user})),window.is_authenticated&&S.emit(D.GLOBAL_EVENT_SIGN_IN_SUCCESS),Z.fire()},window.loginUser=te,window.addEventListener("storage",(e=>{"login_user"===e.key&&null!==e.newValue&&te(JSON.parse(e.newValue))})),window.TradingView.signOut=()=>{const e={...window.user};(0,o.fetch)("/accounts/logout/",{method:"POST",headers:{accept:"html"},credentials:"same-origin"}).then((()=>{window.TradingView.changeLoginState(!1),i.TVXWindowEvents.emit("signOut"),ee()})).catch((()=>{window.user=e,window.TradingView.changeLoginState(!0)}))},Q=new p,window.loginRequiredDelegate=new M.Delegate,window.runOrSignIn=(e,t)=>{t||(t={});const s=[];if(t.paidAccountCheck&&s.push((()=>(0,z.paidAccountCheck)({successButtonText:t.paidAccountSuccessButtonText}))),t.verifiedPhoneRequired){const e=()=>Promise.resolve((0,q.whenVerified)({showDialog:!0,source:t.source,doNotCheckSuspicious:t.doNotCheckSuspicious,doNotCheckSocialActivity:t.doNotCheckSocialActivity,customPhoneCheck:t.customPhoneCheck,doNotShowConfirmation:t.doNotShowConfirmation,isSuspiciousCountry:t.isSuspiciousCountry,afterAllCb:t.afterAllCb}));s.push(e)}window.is_authenticated?s.reduce(((e,t)=>e.then(t)),Promise.resolve()).then(e).catch((()=>{})):(0,f.showSignModal)({source:t.source,sourceMeta:t.sourceMeta,feature:t.feature,mode:t.mode,signinSuccess:e,startTrial:t.startTrial,onUnmountEvent:t.onUnmountEvent})},window.is_authenticated&&i.TVXWindowEvents.on("user-status-declared",(e=>{
window.user.declared_status=e})),window.onLoginStateChange=se,window.TradingView.setTrialAvailiable=e=>{c.TVLocalStorage.setItem("trial_availiable",e?"1":"0")},window.TradingView.notificationsChanged=new M.Delegate,(0,r.install)(),G(),(0,W.initMouseClickAutoBlurHandler)()},143281:(e,t,s)=>{"use strict";s.d(t,{getCountries:()=>r});var i=s(702598);const n="US";let o=null;async function r(){if(null!==o)return o;const e=await(0,i.fetch)("/accounts/countries/",{credentials:"include"});if(!e.ok){const t=await e.json();throw Error(String(t))}const t=await e.json();return o={...t,current_country_code:t.current_country_code??n},o}},640146:(e,t,s)=>{"use strict";s.d(t,{ActionButtonsLayout:()=>o,ContentAlign:()=>n,DialogTheme:()=>r,PredefinedAction:()=>i});var i,n,o,r;s(61499);!function(e){e.Close="close",e.OpenGopro="openGopro"}(i||(i={})),function(e){e.Center="center",e.Left="left"}(n||(n={})),function(e){e.Row="row",e.Column="column"}(o||(o={})),function(e){e.Offer="offer",e.Gopro="gopro"}(r||(r={}))},986049:(e,t,s)=>{"use strict";s.d(t,{initOrderDialogLoader:()=>o});var i=s(4535);let n=null;async function o(e=!1){if(n)return n;const t=document.querySelector("body"),o=document.createElement("div");t.classList.add("i-no-scroll"),o.classList.add(i.loaderContainer),e&&o.classList.add(i.loaderOrderContainer),t.appendChild(o);const{Spinner:r}=await s.e(78775).then(s.bind(s,941285)),a=new r;return a.spin(o),e?o.classList.add(i.openOrderAnimation):o.classList.add(i.openAnimation),n=()=>{a&&a.destroy(),o&&t.contains(o)&&t.removeChild(o),n=null},n}},330535:(e,t,s)=>{"use strict";async function i(e){(await Promise.all([s.e(85426),s.e(75816),s.e(93703),s.e(46445),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(22164),s.e(46489),s.e(99325),s.e(53799),s.e(65857),s.e(45621),s.e(36010),s.e(25480),s.e(29800),s.e(23141),s.e(72197),s.e(49742),s.e(29296),s.e(95083),s.e(73399),s.e(62234),s.e(22106),s.e(14742),s.e(30422),s.e(24125),s.e(21251),s.e(64797),s.e(3062),s.e(32175),s.e(30449),s.e(491),s.e(55057),s.e(22602),s.e(31234),s.e(91248),s.e(34693),s.e(15440),s.e(81397),s.e(29266),s.e(43602),s.e(21058),s.e(63029),s.e(46565),s.e(87271),s.e(16162),s.e(23618),s.e(13432),s.e(85309),s.e(54569),s.e(50783),s.e(95526),s.e(17189),s.e(82321),s.e(12831),s.e(71478),s.e(52382),s.e(24229),s.e(93749),s.e(69161),s.e(85208),s.e(87646),s.e(20022),s.e(38357),s.e(78703)]).then(s.bind(s,534924))).openPaymentOrderDialog(e)}s.d(t,{showPaymentOrderDialog:()=>i})},378870:(e,t,s)=>{"use strict";s.d(t,{check:()=>n});var i=s(143281);async function n(){const{is_restricted:e}=await(0,i.getCountries)();return e}},89617:(e,t,s)=>{"use strict";s.r(t),s.d(t,{showRestrictedCountryNotificationDialog:()=>o});var i=s(444372),n=s(779923);function o(){(0,n.showWarning)({title:i.t(null,void 0,s(813573)),text:i.t(null,void 0,s(269986))})}},501601:(e,t,s)=>{"use strict";function i(){
return Promise.all([s.e(32165),s.e(44178),s.e(44524),s.e(62564),s.e(58985),s.e(22164),s.e(49742),s.e(91797),s.e(87393),s.e(61135),s.e(52017),s.e(59355),s.e(81354),s.e(65508),s.e(82321),s.e(24951),s.e(94900),s.e(90384),s.e(42570),s.e(6534),s.e(40970),s.e(24025)]).then(s.t.bind(s,363652,19))}function n(e,t){i().then((s=>s.openPMDialog(e,t)))}function o(){i().then((e=>e.newPrivateChatDialog()))}s.d(t,{newPrivateChatDialog:()=>o,openPMDialog:()=>n})},702406:(e,t,s)=>{"use strict";s.d(t,{GLOBAL_EVENT_SIGN_IN_SUCCESS:()=>i,showEmailKey:()=>r,signupSource:()=>n,signupSourceMeta:()=>o});const i="GLOBAL_EVENT_SIGN_IN_SUCCESS";const n="signupSource",o="signupSourceMeta",r="auto-show-email-for-signin"},301104:(e,t,s)=>{"use strict";s.d(t,{showWithUserDeclarationDialog:()=>r});var i=s(663200),n=s(503679),o=s(930786);const r=e=>{const{callback:t,isExpertProduct:r,isCloseButtonShown:a,onClose:l}=e;return null===window.user.declared_status?((0,o.trackUserDeclarationEvent)("show_user_declaration",n.UserStatus.NonPro),async function(e,t,i,n=!0){Promise.all([s.e(93159),s.e(75816),s.e(93703),s.e(46445),s.e(62093),s.e(44524),s.e(21356),s.e(73399),s.e(64797),s.e(3062),s.e(22602),s.e(21058),s.e(23618),s.e(12593),s.e(82321),s.e(12831),s.e(62526),s.e(77683),s.e(79124)]).then(s.bind(s,173877)).then((({showDeclarationDialog:s})=>s(e,t,i,n)))}(t,l,r,void 0===a||a)):(e=>void 0!==e&&!e&&window.user?.declared_status===n.UserStatus.Pro&&!window.user?.is_expert&&Boolean(window.user?.is_pro))(r)?(0,i.showUpgradeToProDialog)({onClose:l}):t()}},663200:(e,t,s)=>{"use strict";async function i(e={}){Promise.all([s.e(53631),s.e(75816),s.e(93703),s.e(46445),s.e(62093),s.e(44524),s.e(21356),s.e(99325),s.e(49742),s.e(73399),s.e(14742),s.e(43311),s.e(21058),s.e(50783),s.e(49978),s.e(40728),s.e(82321),s.e(62526),s.e(24229),s.e(77683),s.e(15199)]).then(s.bind(s,718624)).then((({showUpgradeToProDialog:t})=>t(e)))}s.d(t,{showUpgradeToProDialog:()=>i})},930786:(e,t,s)=>{"use strict";s.d(t,{trackUserDeclarationEvent:()=>n});var i=s(776734);async function n(e,t){const s=await(0,i.getTracker)(),n={action:e,status:t};s&&s.trackUserDeclarationEvent(n)}},759475:(e,t,s)=>{"use strict";async function i(e){return(await Promise.all([s.e(41978),s.e(46445),s.e(44524),s.e(46489),s.e(99325),s.e(53799),s.e(25480),s.e(29296),s.e(62234),s.e(91797),s.e(42810),s.e(96645),s.e(10417),s.e(91248),s.e(51499),s.e(63029),s.e(60059),s.e(82321),s.e(25977),s.e(24377),s.e(86887),s.e(94231),s.e(46086),s.e(86009),s.e(68606)]).then(s.bind(s,412042))).createPhoneDialog(e)}async function n(e){return(await Promise.all([s.e(41978),s.e(46445),s.e(44524),s.e(46489),s.e(99325),s.e(53799),s.e(25480),s.e(29296),s.e(62234),s.e(91797),s.e(42810),s.e(96645),s.e(10417),s.e(91248),s.e(51499),s.e(63029),s.e(60059),s.e(82321),s.e(25977),s.e(24377),s.e(86887),s.e(94231),s.e(46086),s.e(86009),s.e(68606)]).then(s.bind(s,412042))).createEmailDialog(e)}s.d(t,{createPhoneDialog:()=>i,createSMSEmailDialog:()=>n})},325579:(e,t,s)=>{"use strict";async function i(e){if(!(e.target&&e.target instanceof Element))return
;const t=e.target.closest(".js-follow-user");if(!t)return;const{followUserHandler:i}=await Promise.all([s.e(3445),s.e(60048),s.e(45607)]).then(s.bind(s,521226));await i(t)}function n(){document.body.addEventListener("click",i)}s.d(t,{install:()=>n})},521126:(e,t,s)=>{"use strict";s.d(t,{isTrialAvailableForUser:()=>n});var i=s(754085);function n(e,t){const s=e.available_offers||{};return t&&void 0!==s[i.OFFERS.trial]}},111903:(e,t,s)=>{"use strict";s.d(t,{whenVerified:()=>_});var i=s(444372),n=s(345848),o=s(759475),r=s(49437),a=s(764829),l=s(486393);let c=l.Deferred();function u(e,t){var s=TVSettings.getBool("_phone_verif_dlg_initial",!0);TVSettings.setValue("_phone_verif_dlg_initial",!1),(0,n.trackEvent)("Phone verification",e+(s?" initial":""),t)}function d(e){const t=l.Deferred();return(0,o.createPhoneDialog)({featureSource:e.source,doNotShowConfirmation:e.doNotShowConfirmation}).then((s=>{s.on("afterOpen",(()=>u("Show dialog",e.source))).on("verification:success",(s=>{t.resolve(s),u("Verified",e.source)})).on("verification:cancel",(()=>{t.reject("cancelled"),u("Cancelled",e.source)})).on("verification:codeExpired",(()=>u("Show dialog",e.source))).open()})),t}function h(e={}){return new Promise((t=>{!window.is_authenticated||user.is_staff||user.is_superuser||user.is_pro||user.is_moderator?t([!1]):e.customPhoneCheck?e.customPhoneCheck()?t([!0,"date-joined"]):t([!1]):a.enabled("phone_verification")&&!user.has_phone?e.isSuspiciousCountry?t([!0]):!0!==e.doNotCheckSocialActivity?t([!0,"date-joined"]):(!0!==e.doNotCheckSuspicious&&t([Boolean(r.TVLocalStorage.getItem("is_suspicious")),"suspicious"]),t([!0,"default"])):t([!1])}))}function _(e={}){const t=l.Deferred();return h({doNotCheckSuspicious:e.doNotCheckSuspicious,doNotCheckSocialActivity:e.doNotCheckSocialActivity,customPhoneCheck:e.customPhoneCheck,isSuspiciousCountry:e.isSuspiciousCountry}).then((([n,o])=>{if(!n)return c.resolve(),t.resolve();if(n&&e.silentPhoneVerification)return t.reject("phone_verification_required");if(!e.showDialog)return c.done((()=>t.resolve()));const r={source:e.source,doNotShowConfirmation:e.doNotShowConfirmation};"suspicious"!==o&&(r.topMessage=i.t(null,void 0,s(220913))),d(r).done((()=>t.resolve())).always((()=>{t.reject("phone_verification_declined"),e.afterAllCb&&e.afterAllCb()}))})).catch((e=>e)),t.promise()}window.loginStateChange&&loginStateChange.subscribe(null,(()=>{window.is_authenticated&&(c=l.Deferred(),h().then((([e,t])=>{e||c.resolve()})))}))},875385:(e,t,s)=>{"use strict";s.d(t,{getProPlanDetailsForUser:()=>h,getProPlanWeight:()=>a,isExpertFeature:()=>d});var i=s(778016),n=s(549358),o=s(702598),r=s(296638);function a(e){return window.pro?"free"===e?-1:window.pro.getProduct((0,n.getProductForTrial)(e)).upgrade_weight:0}function l(e){return window.pro?window.pro.getProduct((0,n.getProductForTrial)(e)).upgrade_weight:0}function c(e){return function(e){return e.sort(((e,t)=>a(e)-a(t)))}((0,i.getProPlansWithFeature)(e).filter((e=>!(0,n.isTrialProduct)(e))))[0]||null}function u(e){return function(e){
return e.sort(((e,t)=>l(e)-l(t)))}((0,i.getExpertPlansWithFeature)(e))[0]||null}function d(e){const t=u(e),s=c(e);return Boolean(t)&&!Boolean(s)}async function h(){const e=await(0,o.fetch)("/pro-plans/profile/"),t=await e.json();if(e.ok)return t;if(403===e.status){const s=t;throw new r.ApiError(s.detail,e.status,s.code)}throw new Error(`Unable to handle unexpected response: ${String(e.text())}`)}},326988:(e,t,s)=>{"use strict";s.d(t,{Pro:()=>d});var i=s(702598),n=s(717317),o=s(776456),r=s(343823),a=s(942634),l=s(588948),c=s(338619);const u=(0,l.getFreshInitData)();class d{constructor(e){this.packagesUpdated=new a.Delegate,this.PRODUCT_TYPES={pro_plan:1,exchange:4,connection:6,coins:8},this._products={},this._invalidShopConf=!1,this._freeProductIds=["tv-scripting","tv-basicstudies","tv-prostudies","Script$USER","Script$EDGR","ESD$TV"],this._discounts={},this._offers=[],this._paidExchanges=[],this._logger=(0,c.getLogger)("Pro"),e&&(this._offers=e.offers??[],this._paidExchanges=e.paid_exchanges??[],this._invalidShopConf=!0,"undefined"!=typeof window&&window.loginStateChange.subscribe(this,this.onLoginStateChange))}isDiscountProductId(e){return e in this._discounts}hasPackage(e){return this._offers.includes(e)||this._freeProductIds.includes(e)}async updateShopConf(e=!1){return void 0!==this._shopConfPromise||(this._shopConfPromise=(0,i.fetch)("/market/shopconf/",{credentials:"include"}).then((async t=>{const s=await t.json();return this._products=s.all_products&&JSON.parse(s.all_products)||{},this._discounts=s.discounts&&JSON.parse(s.discounts)||{},this._offers=s.offers&&JSON.parse(s.offers)||[],this._paidExchanges=s.paid_exchanges&&JSON.parse(s.paid_exchanges)||[],this._invalidShopConf=!1,delete this._shopConfPromise,e||this.packagesUpdated.fire(),s})).catch((()=>{throw this._logger.logError("Update shopconf error"),delete this._shopConfPromise,Error("Update shopconf error")}))),this._shopConfPromise}invalidateShopConf(){this._invalidShopConf=!0}isInvalidShopConf(){return!!this._invalidShopConf}ensureValidShopConf(){return new Promise((e=>this.runOrUpdate(e)))}onLoginStateChange(e){e||this.updateShopConf()}runOrUpdate(e,t){this.isInvalidShopConf()?this.updateShopConf(t).then(e):e()}getIDCExchanges(e){const t=this._products;if(u)if(e){if(u.idc_delay_exchanges_list)return u.idc_delay_exchanges_list}else if(u.idc_exchanges_list)return u.idc_exchanges_list;return Object.keys(t).filter((s=>{const i=t[s];return!!(0,r.isExchange)(i)&&(e?i.idc_service_codes_delay:i.idc_service_codes)})).map((e=>t[e].exchange))}getProduct(e){if(e in this._products)return this._products[e];if(this.isDiscountProductId(e)){const t=this._discounts[e],s={discount_text_id:e,...this._products[t.product]};return void 0!==t.fixed_cost&&(s.fixed_cost=t.fixed_cost),void 0!==t.extra_days&&(s.extra_days=t.extra_days),void 0!==t.billing_cycle&&(s.billing_cycle=t.billing_cycle),void 0!==t.next_billing_cycle&&(s.next_billing_cycle=t.next_billing_cycle),s}return{}}async findProduct(e){if(this.isInvalidShopConf())try{await this.updateShopConf()}catch{}
return this.getProduct(e)}getDiscountProduct(e){return this._discounts[e]??{}}isOffer(e,t){return Object.keys(this._discounts).filter((e=>!this._discounts[e].expired&&this._discounts[e].offer_type===t)).includes(e)}getUserExchanges(){const e=window.pro?.offers();return e?e.map((e=>this.getProduct(e))).filter((e=>(0,r.isExchange)(e))):[]}getUserPaidExchanges(){const e=window.pro?.paidExchanges();return e?e.map((e=>this.getProduct(e))):[]}getUserExchangeByPerm(e){return this.getUserExchanges().find((t=>t.exchange===e))}getExchange(e){const t=this.getProductsByType(r.ProductType.Exchange);let s;for(let i=0;i<t.length;i+=1)if(s=t[i],s.exchange===e||s.included_exchanges&&s.included_exchanges.includes(e))return s;return{}}getProductsByType(e){return Object.keys(this._products).filter((t=>this._products[t].type===e)).map((e=>this.getProduct(e)))}getProPlanProducts(){return this.getProductsByType(r.ProductType.ProPlan).filter((e=>!e.is_expert))}getExpertPlanProducts(){return this.getProductsByType(r.ProductType.ProPlan).filter((e=>e.is_expert))}getPaidExchangesForProfessional(){return this.getProductsByType(r.ProductType.Exchange).filter((e=>e.paid_for_expert))}getProPlanProductsList(){return this.getProPlanProducts().map((e=>e.text_id))}getExpertPlanProductsList(){return this.getExpertPlanProducts().map((e=>e.text_id))}isExpertProduct(e){return this.getExpertPlanProductsList().includes(e)}isPro(){return(0,r.isPro)(window.user)}getSuperProduct(e){}getStudiesOrder(){return[]}userHasRealtimeForExchange(e){const t=(e??"").toLowerCase().replace("exchange-",""),s=this.getExchange(t);if(!(0,r.isProductDefined)(s))return!1;if(this._offers.includes("exchange-"+s.exchange))return!0;if(s.included_exchanges)for(let e=0;e<s.included_exchanges.length;e+=1)if(this._offers.includes("exchange-"+s.included_exchanges[e]))return!0;return!1}hasRealtimeForExchange(e,t){const s=this.getProductsByType(r.ProductType.Exchange),i=(e??"").toLowerCase();for(let e=0;e<s.length;e+=1){const n=s[e];if(n.exchange===i||(n.included_exchanges||[]).includes(i)){if(n.disabled&&!n.included_exchanges)return!1;if(!t)return!0;if(n.included_exchanges){let e;for(let s=0;s<n.included_exchanges.length;s+=1){const i=this.getProduct("exchange-"+n.included_exchanges[s]);if((0,r.isProductDefined)(i)&&(0,r.isExchange)(i)&&this._exHasRealtimeForType(i,t)){e=!0;break}}if(!e)return!1}else if(!this._exHasRealtimeForType(n,t))return!1;return!0}}return!1}visitExchangesPage(e={}){let t=o.BillingCycle.Monthly,s=!0;const i=window.user;i.is_trial||(t=i.pro_plan_billing_cycle??o.BillingCycle.OneYear,s=!1),(0,n.visitPaymentPage)(t,{exchangesOnly:!0,paymentMethod:e.paymentMethod,fixedCycle:s,selectedPackages:e.selectedPackages})}offers(){return this._offers}paidExchanges(){return this._paidExchanges}isSupportAvailable(){return Boolean(window.user?.is_support_available||u.is_support_available)}discounts(){return this._discounts}hash(){const e=this._offers.slice(0);e.sort();const t={offers:e};return JSON.stringify(t)}_exHasRealtimeForType(e,t){
return!("stock"===t&&!e.is_stocks)&&(!("index"===t&&!e.is_indices)&&!("futures"===t&&!e.is_futures))}}"undefined"!=typeof window&&window.TradingView&&(window.TradingView.Pro=d)},817099:(e,t,s)=>{"use strict";s.r(t),s.d(t,{QuoteTicker:()=>C});var i=s(45003),n=s(338619),o=s(124829),r=s(142567),a=s(359268),l=s(735211),c=s(957365),u=s(600303),d=s(719240),h=s(257288),_=s(621239),m=s(625545);var p=s(572570);function g(e,t,s){const i=(0,p.toNumberOrUndefined)(e);if("economic"===t?.type&&0===i||void 0===i)return;const n=s?.customPriceFormatter||"volume"===t.format&&new c.VolumeFormatter({precision:2})||new l.PriceFormatter({priceScale:t.pricescale||100,minMove:t.minmov||1,fractional:t.fractional,minMove2:t.minmove2}),o=void 0!==s?.signPositiveChange?s.signPositiveChange:s?.signPositive;return((e,t=!0)=>t?`(${e})`:e)(n.format(i,{signPositive:o,signNegative:s?.signNegative}),s?.changeInBrackets)}var f=s(444372);function v(e){return"PCTPAR"===e?f.t(null,{context:"_max_len_9"},s(46374)):e}var b=s(416234);function y(e){return e===b.SymbolGroup.McxFlag}var w=s(40763);const S=(0,n.getLogger)("QuoteTicker"),T={addDescriptionTitle:!0,changeDirectionDownClass:"down",changeDirectionUpClass:"up",changeDirectionNeutralClass:"neutral",changeInBrackets:!1,changePercentInBrackets:!1,lastPriceTimeInBrackets:!0,lastReleaseDateTimeInBrackets:!0,rtcTimeInBrackets:!0,clientName:"quote-ticker",dontDyePrice:!1,fallingBg:null,growingBg:null,lastFallingClass:"falling",lastGrowingClass:"growing",quoteSession:null,signNegative:!0,signPositive:!1,customPriceFormatter:null,customTimeFormatter:null,sessionStatusClassSuffix:"--for-ticker",dataModeClassSuffix:"--for-ticker",showInvalidSymbolStatus:!1,indicatorsTooltipType:"custom",lastPriceLastCharSup:!1,lastPriceHighlightDiffOnly:!1,initedHook:void 0,setStateHook:void 0,permissionDeniedHook:void 0,noSuchSymbolHook:void 0},E=/[KMBT]/;function C(e,t,s={}){this.enabled=!0,this._symbol=e,this._symbolOriginal=null,this._options=(0,i.deepExtend)({},T,s),!1!==this._options.signNegative&&!0!==this._options.signNegative&&delete this._options.signNegative,s.customPriceFormatter&&(this._customPriceFormatter=s.customPriceFormatter),s.customTimeFormatter&&(void 0!==s.customTimeFormatter.lastPrice||void 0!==s.customTimeFormatter.rtc?this._timeFormatter=s.customTimeFormatter:this._timeFormatter={lastPrice:s.customPriceFormatter,rtc:s.customPriceFormatter}),this._percentFormatter=new r.PercentageFormatter,this._defaultPriceFormatter=new l.PriceFormatter({priceScale:100}),this._priceFormatter=this._customPriceFormatter||this._defaultPriceFormatter,this._volumeFormatter=new c.VolumeFormatter({precision:2}),this._cache={},this._lastPrice=null,this._lastPriceFormatted="",this._elements={},this._textNodes={},this._changeVolumeLetter=this._getChangeVolumeLetterCallback(),this._setElements(t),this._highlighters={},this._initHighlighters(),this._options.setStateHook&&this.setStateHook(this._options.setStateHook),this.quoteSession=this._options.quoteSession||(0,m.getQuoteSessionInstance)("simple"),
this._quoteSessionEventHandler=this.onData.bind(this),this._connectTimeoutId=setTimeout(this.connect.bind(this),0)}function P(e){const t=e.search(E),s=t>=0?e.slice(t):"";return[t>0?e.substring(t,0):0===t?"":e,s]}function I(e,t,s,i,n){var o,r=null;function a(){if(o&&(clearTimeout(o),o=void 0),s||t)for(var r=0;r<e.length;r++)e[r].style.background="";if(!s||!t)for(r=0;r<e.length;r++)i&&e[r].classList.remove(i),n&&e[r].classList.remove(n)}return{show:function(l){var c=0;if(l!==r){if(null!==r&&null!==l&&(c=l-r),a(),o=setTimeout(a,750),0<c){if(t)for(var u=0;u<e.length;u++)e[u].style.background=t;else if(i)for(u=0;u<e.length;u++)e[u].classList.add(i)}else if(c<0)if(s)for(u=0;u<e.length;u++)e[u].style.background=s;else if(n)for(u=0;u<e.length;u++)e[u].classList.add(n);null!==l&&(r=l)}},hide:a}}C.prototype._setElements=function(e){this._container=e,this._elements.change=this._findElements(e,["js-symbol-change","symbol-change"]),this._elements.changeDirection=this._findElements(e,["js-symbol-change-direction","symbol-change-direction"]),this._elements.extHrsChangeDirection=this._findElements(e,["js-symbol-ext-hrs-change-direction"]),this._elements.changePercent=this._findElements(e,["js-symbol-change-pt","symbol-change-pt"]),this._elements.description=this._findElements(e,["js-symbol-description-name","symbol-description-name"]),this._elements.extHrsChange=this._findElements(e,"js-symbol-ext-hrs-change"),this._elements.extHrsChangePercent=this._findElements(e,"js-symbol-ext-hrs-change-pt"),this._elements.extHrsClose=this._findElements(e,"js-symbol-ext-hrs-close"),this._elements.industry=this._findElements(e,["js-symbol-industry","symbol-industry"]),this._elements.last=this._findElements(e,["js-symbol-last","symbol-last"]),this._elements.sector=this._findElements(e,["js-symbol-sector","symbol-sector"]),this._elements.sessionStatus=this._findElements(e,"js-symbol-session-status"),this._elements.shortName=this._findElements(e,["js-symbol-short-name","symbol-short-name"]),this._elements.updateMode=this._findElements(e,"js-data-mode"),this._elements.lastPeriod=this._findElements(e,"js-symbol-last-period"),this._elements.updateMode.forEach((e=>e.classList.add("i-hidden"))),this._textNodes.change=this._getOrCreateTextNodes(this._elements.change),this._textNodes.changePercent=this._getOrCreateTextNodes(this._elements.changePercent),this._textNodes.extHrsChange=this._getOrCreateTextNodes(this._elements.extHrsChange),this._textNodes.extHrsChangePercent=this._getOrCreateTextNodes(this._elements.extHrsChangePercent),this._textNodes.extHrsClose=this._getOrCreateTextNodes(this._elements.extHrsClose),this._textNodes.last=this._getOrCreateTextNodes(this._elements.last),this._textNodes.open=this._findTextNodes(e,"js-symbol-open"),this._textNodes.eps=this._findTextNodes(e,"js-symbol-eps"),this._textNodes.marketCap=this._findTextNodes(e,"js-symbol-market-cap"),this._textNodes.prevClose=this._findTextNodes(e,"js-symbol-prev-close"),this._textNodes.dividends=this._findTextNodes(e,"js-symbol-dividends"),
this._textNodes.priceEarnings=this._findTextNodes(e,"js-symbol-pe"),this._textNodes.volume=this._findTextNodes(e,"js-symbol-volume"),this._textNodes.high=this._findTextNodes(e,"js-symbol-high"),this._textNodes.low=this._findTextNodes(e,"js-symbol-low"),this._textNodes.currency=this._findTextNodes(e,"js-symbol-currency"),this._textNodes.lastPriceTime=this._findTextNodes(e,"js-symbol-lp-time"),this._textNodes.lastReleaseDate=this._findTextNodes(e,"js-symbol-last-release-date"),this._textNodes.rtcTime=this._findTextNodes(e,"js-symbol-rtc-time"),this._elements.lastHighlight=this._options.lastPriceHighlightDiffOnly?this._elements.last.map((e=>this._appendAndGetNewElement(e,"span"))):this._elements.last,this._textNodes.lastHighlight=this._getOrCreateTextNodes(this._elements.lastHighlight),this._elements.lastSup=this._options.lastPriceLastCharSup?this._elements.lastHighlight.map((e=>this._appendAndGetNewElement(e,"sup"))):[],this._textNodes.lastSup=this._getOrCreateTextNodes(this._elements.lastSup)},C.prototype._findElements=function(e,t){var s=(0,o.isArray)(t)?t:[t];return Array.prototype.concat.apply([],s.map((t=>Array.prototype.slice.call(e.getElementsByClassName(t)))))},C.prototype._findTextNodes=function(e,t){return this._getOrCreateTextNodes(this._findElements(e,t))},C.prototype._getOrCreateTextNodes=function(e){return e.map((e=>{var t=this._getFirstTextNode(e);return t||(t=e.ownerDocument.createTextNode(""),e.appendChild(t)),t}))},C.prototype._appendAndGetNewElement=function(e,t){const s=document.createElement(t);return e.appendChild(s),s},C.prototype._getFirstTextNode=function(e){for(var t=e.childNodes,s=t.length-1;s>=0;s--)if(3===t.item(s).nodeType)return t.item(s);return null},C.prototype.connect=function(e){this._subscribed||(this._subscribedSymbol=e||this._symbol,this.quoteSession.subscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!0)},C.prototype.disconnect=function(){clearTimeout(this._connectTimeoutId),this._subscribed&&(this.quoteSession.unsubscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!1)},C.prototype.onData=function(e,t){this.enabled&&("ok"===e.status?this.successData(e,t):"permission_denied"===e.status?this.onPermissionDenied(e):"error"===e.status&&this.errorData(e))},C.prototype.successData=function(e,t){e.values&&this.setState(e.values,e,t)},C.prototype.onPermissionDenied=function(e){(0,w.isSfQuoteData)(e)||function(e){return!!e&&(y(e.symbolname)||"permission_denied"===e.status&&y(e.values?.alternative))}(e)?this._options.permissionDeniedHook?this._options.permissionDeniedHook(e,this._symbolOriginal||this._symbol):this.errorData(e):this.downgradeData(e)},C.prototype.errorData=function(e){this._options.showInvalidSymbolStatus&&(this.setShortName(this._symbol),this._elements.sessionStatus.map((e=>new u.MarketStatusIndicator({classSuffix:this._options.sessionStatusClassSuffix,el:e,data:{values:{current_session:"invalid"}},tooltipType:this._options.indicatorsTooltipType})))),
this._options.noSuchSymbolHook?(this._symbolOriginal&&this.setShortName(this._symbolOriginal),this._options.noSuchSymbolHook.call(this,e,this._symbolOriginal||this._symbol)):S.logWarn("No data for: "+this._symbol)},C.prototype.downgradeData=function(e){{const t=e&&e.values&&e.values.alternative,s=this._symbol===t;if(!(t&&-1!==t.indexOf(":"))||s)return void this.errorData(e);this._symbolOriginal=this._symbol,this._symbol=t,this._subscribed=!1,this.connect()}},C.prototype.setState=function(e,t,i){const n=i.values;this._isVolumeFormat="volume"===e.format,null==n.pricescale&&null==n.minmov&&null==n.fractional&&null==n.minmove2||(this._priceFormatter=this._customPriceFormatter||this._isVolumeFormat&&this._volumeFormatter||new l.PriceFormatter({priceScale:e.pricescale||100,minMove:e.minmov||1,fractional:e.fractional,minMove2:e.minmove2}));const o=this._options,r=this._percentFormatter,a=this._priceFormatter,m=this._defaultPriceFormatter,p=this._volumeFormatter,f=(e,t=!0)=>t?`(${e})`:e,b=void 0!==o.signPositiveChange?o.signPositiveChange:o.signPositive,y=e=>g(e,n,o),w=e=>{const t=r.format(e,{signPositive:b,signNegative:o.signNegative});return f(t,o.changePercentInBrackets)},T=a.format.bind(a),E=m.format.bind(m),C=p.format.bind(p),P=e=>null==e?c.PLACE_HOLDER:E(e);o.disableChange||(this._setNodesValue(this._textNodes.change,n.change,y),this._setNodesValue(this._textNodes.changePercent,n.change_percent,w),null!=n.change&&(o.dontDyePrice||this._setChangeFontColor([].concat(this._elements.change,this._elements.changePercent),n.change,o.changeUpFontColor,o.changeDownFontColor,o.changeNeutralFontColor),this._setChangeDirection(this._elements.changeDirection,n.change)),this._setNodesValue(this._textNodes.extHrsChange,n.rch,y),this._setNodesValue(this._textNodes.extHrsChangePercent,n.rchp,w),null!=n.rch&&(o.dontDyePrice||this._setChangeFontColor([].concat(this._elements.extHrsChange,this._elements.extHrsChangePercent),n.rch,o.changeUpFontColor,o.changeDownFontColor,o.changeNeutralFontColor),this._setChangeDirection(this._elements.extHrsChangeDirection,n.rch))),this._setNodesValue(this._textNodes.prevClose,n.prev_close_price,T),this._setNodesValue(this._textNodes.dividends,e.dividends_yield,(e=>null==e?c.PLACE_HOLDER:r.format(e,{signPositive:o.signPositive,signNegative:o.signNegative})),!0);let I=(0,h.getTranslatedSymbolDescription)(n);if(I&&(I=this._prepareSymbolDescription(I),this._setTextsContent(this._elements.description,I),this._options.addDescriptionTitle))for(var N=0;N<this._elements.description.length;N++)this._elements.description[N].setAttribute("title",I);if((null!=n.short_name||null!=n.exchange)&&e.short_name){var k=e.short_name;"QUANDL"===e.exchange&&void 0!==e.short_name.split("/")[1]&&(k=e.short_name.split("/")[1]+", "+e.short_name.split("/")[0]),this.setShortName(k)}e["reference-last-period"]&&this._elements.lastPeriod.length&&Promise.all([s.e(43878),s.e(3844)]).then(s.bind(s,800620)).then((t=>{this._setTextsContent(this._elements.lastPeriod,t.periodFormatter(e["reference-last-period"]))})),
this._elements.lastPeriod.length&&void 0===e["reference-last-period"]&&this._setTextsContent(this._elements.lastPeriod,""),this._setLastValue(n.last_price,T),this._setNodesValue(this._textNodes.extHrsClose,n.rtc,T),n.rtc&&this._highlighters.extHrsClose.show(n.rtc),n.industry&&this._setTextsContent(this._elements.industry,e.industry,(e=>e)),n.sector&&this._setTextsContent(this._elements.sector,e.sector),this._elements.sessionStatus&&n.current_session&&(this._sessionStatusInstances?this._sessionStatusInstances.forEach((e=>e.setStatus(n.current_session))):this._sessionStatusInstances=this._elements.sessionStatus.map((t=>new u.MarketStatusIndicator({classSuffix:this._options.sessionStatusClassSuffix,el:t,short:!0,data:{values:n},quoteSession:this.quoteSession,symbol:e.original_name,manualUpdate:!0,tooltipType:this._options.indicatorsTooltipType,sessionStatusIcon:this._options.sessionStatusIcon})))),this._setNodesValue(this._textNodes.open,n.open_price,T),this._setNodesValue(this._textNodes.high,n.high_price,T),this._setNodesValue(this._textNodes.low,n.low_price,T),this._setNodesValue(this._textNodes.eps,e.earnings_per_share_basic_ttm,P,!0),this._setNodesValue(this._textNodes.priceEarnings,e.price_earnings_ttm,P,!0),this._setNodesValue(this._textNodes.marketCap,e.market_cap_basic,C,!0),this._setNodesValue(this._textNodes.volume,e.volume,C,!0);const x=(0,_.prepareCurrencyValue)(n);if(x&&this._setNodesValue(this._textNodes.currency,x,v,!0),(n.lp_time||e.lp_time)&&this._textNodes.lastPriceTime.length&&(this._timeFormatter&&this._timeFormatter.lastPrice?this._setNodesValue(this._textNodes.lastPriceTime,f(this._timeFormatter.lastPrice(e.lp_time,e.current_session),this._options.lastPriceTimeInBrackets)):S.logError("last price time field requested with no formatter provided")),(n.last_release_date||e.last_release_date)&&this._textNodes.lastReleaseDate.length&&(this._timeFormatter&&this._timeFormatter.lastReleaseDate?this._setNodesValue(this._textNodes.lastReleaseDate,f(this._timeFormatter.lastReleaseDate(e.last_release_date,e.current_session),this._options.lastReleaseDateTimeInBrackets)):S.logError("lastReleaseDate time field requested with no formatter provided")),(n.rtc_time||e.rtc_time)&&this._textNodes.rtcTime.length&&(this._timeFormatter&&this._timeFormatter.rtc?this._setNodesValue(this._textNodes.rtcTime,f(this._timeFormatter.rtc(e.rtc_time,e.current_session),this._options.rtcTimeInBrackets)):S.logError("rtc time field requested with no formatter provided")),null!=n.last_price)for(N=0;N<this._elements.updateMode.length;N++)this._elements.updateMode[N].classList.remove("i-hidden");this._elements.updateMode&&(n.update_mode||n.update_mode_seconds)&&(this._updateModeInstances?this._updateModeInstances.forEach((t=>t.update({values:e}))):this._updateModeInstances=this._elements.updateMode.map((t=>new d.DataModeIndicator({classSuffix:this._options.dataModeClassSuffix,el:t,data:{values:e},modeInterval:e.update_mode_seconds,short:!0,tooltipType:this._options.indicatorsTooltipType})))),
this._setStateHook&&this._setStateHook(t.values,i.values,t.complete,this.getOptions()),this._lastPrice?this._highlighters.last.show(e.last_price):null===this._lastPrice&&(this._container.classList.add("quote-ticker-inited"),"function"==typeof this._options.initedHook&&this._options.initedHook("last_price"in e)),this._lastPrice=e.last_price},C.prototype._setNodesValue=function(e,t,s,i){if(null!=t||i)for(var n="function"==typeof s?s(t):t,o=0;o<e.length;o++)e[o].nodeValue=n},C.prototype._setTextsContent=function(e,t,s){if(e&&e.length&&t)for(var i="function"==typeof s?s(t):t,n=0;n<e.length;n++)e[n].textContent=i},C.prototype._setLastValue=function(e,t){if(null==e)return;const s="function"==typeof t?t(e):String(e);if(s===this._lastPriceFormatted)return;const[i,n,o]=this._options.lastPriceHighlightDiffOnly?this._getLastValueStringDiff(this._lastPriceFormatted,s):["",s,""],r=i,[a,l]=this._options.lastPriceLastCharSup?[n.slice(0,-1),n.slice(-1)]:[n,""];this._options.lastPriceHighlightDiffOnly&&(this._isVolumeFormat&&this._changeVolumeLetter.call(this,o),this._setNodesValue(this._textNodes.last,r)),this._setNodesValue(this._textNodes.lastHighlight,a),this._setNodesValue(this._textNodes.lastSup,l),this._lastPriceFormatted=s},C.prototype._getChangeVolumeLetterCallback=function(){let e;return function(t){t!==e&&(e=t,this._elements.last.forEach((t=>{3!==t.childNodes.length?t.appendChild(document.createTextNode(e)):t.childNodes[2].nodeValue=e})))}},C.prototype._getLastValueStringDiff=function(e,t){if(e===t){const[e,s]=P(t);return[e,"",s]}let s=0;for(;e[s]===t[s];)s++;const[i,n]=P(t.slice(s));return[t.slice(0,s),i,n]},C.prototype._setChangeFontColor=function(e,t,s,i,n){for(var o=a.PriceColorer.formatSign(t,{up:s,down:i,neutral:n}),r=0;r<e.length;r++)e[r].style.color=o},C.prototype._setChangeDirection=function(e,t){for(var s=0;s<e.length;s++){var i=e[s].classList;i.toggle(this._options.changeDirectionUpClass,t>0),i.toggle(this._options.changeDirectionDownClass,t<0),i.toggle(this._options.changeDirectionNeutralClass,0===t)}},C.prototype.setShortName=function(e=""){this._setTextsContent(this._elements.shortName,e)},C.prototype._prepareSymbolDescription=function(e){var t=this._getCache("symbol-description:"+e);return t||(t=e,this._setCache("symbol-description:"+e,t),t)},C.prototype._initHighlighters=function(){this._highlighters.last=new I(this._elements.lastHighlight,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass),this._highlighters.extHrsClose=new I(this._elements.extHrsClose,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass)},C.prototype.disable=function(){this.enabled=!1,this.disconnect()},C.prototype.enable=function(){this.enabled=!0,this.connect()},C.prototype.setStateHook=function(e){null===e&&this._setStateHook?delete this._setStateHook:"function"==typeof e&&(this._setStateHook=e)},C.prototype._setCache=function(e,t){null==t?delete this._cache[e]:this._cache[e]=t},C.prototype._getCache=function(e){
return this._cache&&this._cache[e]},C.prototype.getOptions=function(){return this._options}},829075:(e,t,s)=>{"use strict";var i=s(590508).createGoProDialog,n=s(802588).showSignModal;window.TVDialogs={showSignInDialog:function(e){return n(e)},showGoProDialog:function(e){i(e)}}},547777:(e,t,s)=>{"use strict";function i(e){return e+""}s.d(t,{appendEllipsis:()=>i})},621239:(e,t,s)=>{"use strict";s.d(t,{prepareCurrencyValue:()=>n});var i=s(444372);function n(e){let t=[];const n=function(e){switch(e){case"PCT":return"%";case"PCTPAR":return i.t(null,{context:"_max_len_9"},s(46374));case"PCTGDP":return i.t(null,{context:"_max_len_9"},s(421685));default:return e}}(e.currency_code||e.value_unit_id||"");switch(e.measure){case"price":case"unit":t=[n,e.unit_id];break;default:t=[n]}return t.filter(Boolean).join("/")}},717317:(e,t,s)=>{"use strict";s.d(t,{visitPaymentPage:()=>d});var i=s(444372),n=s(330535),o=s(776456),r=s(378870),a=s(89617),l=s(986049),c=s(226057),u=s(301104);function d(e="y",t={},d){const h=t.productName??"pro",_="bitcoin"===(t.paymentMethod||"paypal")?"Bitcoin payment":"Paypal payment",m=d??(0,l.initOrderDialogLoader)();window.runOrSignIn((async()=>{if(await(0,r.check)())return void(0,a.showRestrictedCountryNotificationDialog)();if("function"==typeof t.canVisit&&!t.canVisit())return void(t.reloadIfCantVisit?location.reload():location.href="/");const{coupon:i,coupon_billing_cycle:l}=(0,c.getUrlParams)(),{updateConversionData:d}=await Promise.all([s.e(94251),s.e(19434)]).then(s.bind(s,305487)),h=await d("gopro-payment-dialog"),_=()=>(0,n.showPaymentOrderDialog)({productId:t.productName,billingCycle:t.exchangesOnly?o.BillingCycle.Monthly:e,fixedCycle:t.fixedCycle,exchanges:t.selectedPackages,coupon:Boolean(l)?i:void 0,planStatus:t.planStatus,initialSelectedPackageName:t.initialSelectedPackageName,initialState:{user:h.user,state:h.state}});window.pro?.runOrUpdate((()=>{const e=Boolean(t.productName&&window.pro?.isExpertProduct(t.productName));return t.isPromoOrder?_().then((async()=>(await m)())):(0,u.showWithUserDeclarationDialog)({callback:_,isExpertProduct:e}).then((async()=>{(await m)()}))}))}),{source:_,paidAccountCheck:window.pro&&window.pro.getProduct(h).type===window.pro.PRODUCT_TYPES.pro_plan,paidAccountSuccessButtonText:i.t(null,void 0,s(845683)),onUnmountEvent:async()=>{d?d():(await m)()}})}},861814:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M15.08 5.75a5.07 5.07 0 0 1 7.17 7.17l-3.23 3.23-.7-.7 3.22-3.24a4.07 4.07 0 1 0-5.75-5.75l-3.23 3.23-.7-.71 3.22-3.23Zm-9.33 9.33a5.07 5.07 0 1 0 7.17 7.17l3.23-3.23-.7-.7-3.24 3.22a4.07 4.07 0 1 1-5.75-5.75l3.23-3.23-.71-.7-3.23 3.22Zm10.77-4.3-5.74 5.74.7.7 5.75-5.74-.71-.7Z"/></svg>'}}]);