(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[5780,47365],{57761:(e,t,s)=>{"use strict";s.d(t,{OptionsDialogController:()=>o});var i=s(999138);let r;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}static getInstance(){return r||(r=new o),r}_load(e){return Promise.all([s.e(56316),s.e(13229),s.e(75816),s.e(93703),s.e(46445),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(62564),s.e(58985),s.e(59258),s.e(82421),s.e(67158),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(85758),s.e(28101),s.e(84984),s.e(94799),s.e(75638),s.e(82321),s.e(31057),s.e(52318),s.e(62526),s.e(52181),s.e(64198)]).then(s.bind(s,834302)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.OptionsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},250378:(e,t,s)=>{"use strict";s.d(t,{BadRequestErrorResponse:()=>r});var i=s(867023);class r extends i.ErrorResponse{constructor(e){super(e),this.name="BadRequestError",e.error?this.message=e.error:this.message="unknown error"}}},867023:(e,t,s)=>{"use strict";s.d(t,{ErrorResponse:()=>i});class i{constructor(e){this._status=e.status,this._statusText=e.statusText||""}getInfo(){return{name:this.name,status:this._status,statusText:this._statusText,message:this.message}}}},685503:(e,t,s)=>{"use strict";s.d(t,{HttpErrorResponse:()=>r});var i=s(867023);class r extends i.ErrorResponse{constructor(e){super(e),this.name="HttpErrorResponse",this._status>=200&&this._status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`}}},159954:(e,t,s)=>{"use strict";s.d(t,{SymbolDoesNotExistErrorResponse:()=>r});var i=s(867023);class r extends i.ErrorResponse{constructor(e){super(e),this.name="SymbolDoesNotExistError",this.message=e.error||"symbol does not exist"}}},438874:(e,t,s)=>{"use strict";function i(){return window.SCREENER_HOST||"https://scanner.tradingview.com"}function r(e,t){const s=i();return t?`${s}/${t}/`:1===e.length?`${s}/${e[0]}/`:`${s}/global/`}function o(e,t,s,r,o){const l=i(),n={symbol:e,fields:t};r&&(n.no_404="true"),o&&(n.price_conversion="disabled"),s&&(n["label-product"]=s);const a=new URL(`${l}/symbol`);return Object.keys(n).forEach((e=>{a.searchParams.append(e,n[e])})),a.toString()}s.d(t,{getBackendUrl:()=>r,getSymbolDataUrl:()=>o})},163482:(e,t,s)=>{"use strict";s.d(t,{TECHNICALS_QS_FIELDS:()=>i,TECHNICALS_SCREENER_COLUMNS:()=>a,requiredMAColumns:()=>l,requiredOscColumns:()=>o,requiredPivotsColumns:()=>n,requiredRecommendColumns:()=>r})
;const i=["type","listed_exchange","pricescale","typespecs","pro_name","short_name"],r=["Recommend.Other","Recommend.All","Recommend.MA"],o=["RSI","Stoch.K","CCI20","ADX","AO","Mom","MACD.macd","Stoch.RSI.K","W.R","BBPower","UO"],l=["EMA10","SMA10","EMA20","SMA20","EMA30","SMA30","EMA50","SMA50","EMA100","SMA100","EMA200","SMA200","Ichimoku.BLine","VWMA","HullMA9"],n=["Pivot.M.Classic.R3","Pivot.M.Classic.R2","Pivot.M.Classic.R1","Pivot.M.Classic.Middle","Pivot.M.Classic.S1","Pivot.M.Classic.S2","Pivot.M.Classic.S3","Pivot.M.Fibonacci.R3","Pivot.M.Fibonacci.R2","Pivot.M.Fibonacci.R1","Pivot.M.Fibonacci.Middle","Pivot.M.Fibonacci.S1","Pivot.M.Fibonacci.S2","Pivot.M.Fibonacci.S3","Pivot.M.Camarilla.R3","Pivot.M.Camarilla.R2","Pivot.M.Camarilla.R1","Pivot.M.Camarilla.Middle","Pivot.M.Camarilla.S1","Pivot.M.Camarilla.S2","Pivot.M.Camarilla.S3","Pivot.M.Woodie.R3","Pivot.M.Woodie.R2","Pivot.M.Woodie.R1","Pivot.M.Woodie.Middle","Pivot.M.Woodie.S1","Pivot.M.Woodie.S2","Pivot.M.Woodie.S3","Pivot.M.Demark.R1","Pivot.M.Demark.Middle","Pivot.M.Demark.S1"],a=[...r,...o,...l,...n]},719885:(e,t,s)=>{"use strict";s.d(t,{TechnicalsDialogController:()=>c});var i=s(583912),r=s(999138),o=s(729030),l=s(254526),n=s(163482);let a;class c extends r.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}async show(e){const t=e?.symbol?e.symbol:i.linking.proSymbol.value();if(e?.snapshot){const{snapshot:s}=e,i=await this._loadModule();this._getDialog(i,{...e,symbol:t,...s,exchange:s.listed_exchange}).show()}else{const i=async()=>{const{snapshoter:e}=await s.e(51030).then(s.bind(s,795394));return e().getSnapshot(t,new Set(n.TECHNICALS_QS_FIELDS))},[r,o]=await Promise.all([this._loadModule(),i()]);if("error"===o.status)return void this._getDialog(r,{...e,symbol:t}).show();this._getDialog(r,{...e,symbol:t,...o.values,exchange:o.values.listed_exchange}).show()}}async canBeShown(e){const t=e||i.linking.proSymbol.value();if(!t)return!1;const r=new Set([...n.TECHNICALS_QS_FIELDS,"description"]),a=await(async()=>{const{snapshoter:e}=await s.e(51030).then(s.bind(s,795394));return e().getSnapshot(t,r)})();if("error"===a.status)return!1;const{values:{type:c,listed_exchange:h,description:d}}=a;if(!l.SYMBOL_TYPE_BLACK_LIST.has(c))try{const e=await(0,o.getSymbolData)(null,t,["Recommend.All"]);return Boolean(e&&0!==Object.keys(e).length&&d&&h&&c)}catch(e){return!1}return!1}hide(){this._dialog?.hide()}static getInstance(){return a||(a=new c),a}_getDialog(e,t){return this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new e.TechnicalsDialogRenderer(t),this._dialog.visible().subscribe(this._subscribe),this._dialog}_loadModule(){
return Promise.all([s.e(7056),s.e(75816),s.e(93703),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(53953),s.e(49481),s.e(58985),s.e(59258),s.e(82421),s.e(67158),s.e(65857),s.e(45621),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(85758),s.e(28101),s.e(6633),s.e(89259),s.e(31234),s.e(84984),s.e(96589),s.e(73131),s.e(96312),s.e(47479),s.e(51661),s.e(82321),s.e(52181),s.e(90183),s.e(90226),s.e(71138)]).then(s.bind(s,168218))}}},589026:(e,t,s)=>{"use strict";s.d(t,{BondYieldCurveDialogController:()=>o});var i=s(999138);let r;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}static getInstance(){return r||(r=new o),r}_load(e){return Promise.all([s.e(56316),s.e(43006),s.e(75816),s.e(93703),s.e(46445),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(62564),s.e(58985),s.e(59258),s.e(82421),s.e(67158),s.e(29800),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(85758),s.e(28101),s.e(84984),s.e(43848),s.e(82256),s.e(82321),s.e(62526),s.e(52181),s.e(15678)]).then(s.bind(s,229519)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.BondYieldCurveDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},273058:(e,t,s)=>{"use strict";s.d(t,{EtfAnalysisDialogController:()=>o});var i=s(999138);let r;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}static getInstance(){return r||(r=new o),r}_load(e){return Promise.all([s.e(35665),s.e(78753),s.e(75816),s.e(93703),s.e(46445),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(62564),s.e(58985),s.e(59258),s.e(22164),s.e(82421),s.e(67158),s.e(65857),s.e(36010),s.e(73399),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(98734),s.e(85758),s.e(28101),s.e(74729),s.e(30449),s.e(68827),s.e(17762),s.e(13427),s.e(56657),s.e(84984),s.e(83715),s.e(94799),s.e(70125),s.e(91954),s.e(87445),s.e(66764),s.e(71938),s.e(86314),s.e(92069),s.e(79874),s.e(39705),s.e(57415),s.e(78915),s.e(54862),s.e(73349),s.e(82321),s.e(12831),s.e(68122),s.e(52181),s.e(44694),s.e(8458),s.e(74461),s.e(97347),s.e(62613),s.e(14348),s.e(58534)]).then(s.bind(s,141078)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.EtfAnalysisDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},232650:(e,t,s)=>{"use strict";s.d(t,{openFinancialsWebview:()=>d});var i=s(92651),r=s(675128),o=s(476047),l=s(176637)
;const n=new Set(["number_of_employees","web_site_url","founded","ceo","market_cap_basic","dividends_yield","price_earnings_ttm","earnings_per_share_basic_ttm","currency_code","fundamental_currency_code","float_shares_outstanding","total_shares_outstanding","total_revenue_fy_h","total_revenue_fq_h","total_revenue_fh_h","net_income_fy_h","net_income_fq_h","net_income_fh_h","total_assets_fy_h","total_assets_fq_h","total_assets_fh_h","total_liabilities_fy_h","total_liabilities_fq_h","total_liabilities_fh_h","cash_f_operating_activities_fy_h","cash_f_operating_activities_fq_h","cash_f_operating_activities_fh_h","cash_f_investing_activities_fy_h","cash_f_investing_activities_fq_h","cash_f_investing_activities_fh_h","cash_f_financing_activities_fy_h","cash_f_financing_activities_fq_h","cash_f_financing_activities_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","interest_income_fy_h","interest_income_fq_h","interest_income_fh_h","non_interest_income_fy_h","non_interest_income_fq_h","non_interest_income_fh_h","earnings_release_date_fq_h","earnings_release_date_fy_h","earnings_release_date_fh_h","earnings_release_next_date_fq","earnings_release_next_date_fy","earnings_release_next_date_fh","earnings_release_next_time","earnings_release_next_date","is_next_earnings_release_date_estimated","earnings_per_share_forecast_next_fq","earnings_per_share_forecast_next_fy","earnings_per_share_forecast_next_fh","earnings_per_share_forecast_fq_h","earnings_per_share_forecast_fy_h","earnings_per_share_forecast_fh_h","earnings_per_share_fq_h","earnings_per_share_fy_h","earnings_per_share_fh_h","earnings_fiscal_period_fq_h","earnings_fiscal_period_fy_h","earnings_fiscal_period_fh_h","next_earnings_fiscal_period_fq","next_earnings_fiscal_period_fy","next_earnings_fiscal_period_fh","revenue_fq_h","revenue_fy_h","revenue_fh_h","revenue_forecast_fq_h","revenue_forecast_fy_h","revenue_forecast_fh_h","revenue_forecast_next_fq","revenue_forecast_next_fy","revenue_forecast_next_fh","fundamental_currency_code","dividend_payout_ratio_ttm","dividends_yield_current","dividend_ex_date_upcoming","dividend_amount_upcoming","dividend_amount_recent","dividend_ex_date_recent","dividend_amount_h","total_revenue_fy","gross_profit_fy","ebitda_fy","ebit_fy","net_income_fy","fiscal_period_fy","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","total_debt_fy_h","total_debt_fq_h","total_debt_fh_h","free_cash_flow_fy_h","free_cash_flow_fq_h","free_cash_flow_fh_h","cash_n_equivalents_fy_h","cash_n_equivalents_fq_h","cash_n_equivalents_fh_h","loans_net_fy_h","loans_net_fq_h","loans_net_fh_h","total_deposits_fy_h","total_deposits_fq_h","total_deposits_fh_h","loan_loss_allowances_fy_h","loan_loss_allowances_fq_h","loan_loss_allowances_fh_h","insurance_reserves_fy_h","insurance_reserves_fq_h","insurance_reserves_fh_h","policy_claims_fy_h","policy_claims_fq_h","policy_claims_fh_h","premiums_earned_fy_h","premiums_earned_fq_h","premiums_earned_fh_h","common_equity_tier1_ratio_fy_h","common_equity_tier1_ratio_fq_h","common_equity_tier1_ratio_fh_h","tier1_capital_ratio_fy_h","tier1_capital_ratio_fq_h","tier1_capital_ratio_fh_h","total_capital_ratio_fy_h","total_capital_ratio_fq_h","total_capital_ratio_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","reserve_to_total_capital_fy_h","reserve_to_total_capital_fq_h","reserve_to_total_capital_fh_h","unearned_premium_to_total_capital_fy_h","unearned_premium_to_total_capital_fq_h","unearned_premium_to_total_capital_fh_h","fundamental_currency_code","total_current_assets_fy","total_current_assets_fq","total_current_assets_fh","total_current_liabilities_fy","total_current_liabilities_fq","total_current_liabilities_fh","total_non_current_assets_fy","total_non_current_assets_fq","total_non_current_assets_fh","total_non_current_liabilities_fy","total_non_current_liabilities_fq","total_non_current_liabilities_fh","fiscal_period_fy","fiscal_period_fq","fiscal_period_fh","fundamental_currency_code","price_earnings_fq_h","price_earnings_fy_h","price_earnings_fh_h","price_sales_fq_h","price_sales_fy_h","price_sales_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","market_cap_basic","diluted_net_income_ttm","total_revenue_ttm","price_earnings_current","price_sales_current","fundamental_currency_code","revenue_seg_by_business_h","revenue_seg_by_region_h","fiscal_period_fy","interest_income_fy","interest_income_fq","interest_income_fh","non_interest_income_fy","non_interest_income_fq","non_interest_income_fh","interest_expense_fy","interest_expense_fq","interest_expense_fh","loan_loss_provision_fy","loan_loss_provision_fq","loan_loss_provision_fh","non_interest_expense_fy","non_interest_expense_fq","non_interest_expense_fh","non_oper_income_fy","non_oper_income_fq","non_oper_income_fh","unusual_expense_inc_fy","unusual_expense_inc_fq","unusual_expense_inc_fh","pretax_income_fy","pretax_income_fq","pretax_income_fh","total_revenue_fy","total_revenue_fq","total_revenue_fh","gross_profit_fy","gross_profit_fq","gross_profit_fh","net_income_fy","net_income_fq","net_income_fh","cost_of_goods_fy","cost_of_goods_fq","cost_of_goods_fh","operating_expenses_fy","operating_expenses_fq","operating_expenses_fh","oper_income_fy","oper_income_fq","oper_income_fh","total_non_oper_income_fy","total_non_oper_income_fq","total_non_oper_income_fh","income_tax_fy","income_tax_fq","income_tax_fh","after_tax_other_income_fy","after_tax_other_income_fq","after_tax_other_income_fh","fiscal_period_fy","fiscal_period_fq","fiscal_period_fh","equity_in_earnings_fy","equity_in_earnings_fq","equity_in_earnings_fh","minority_interest_exp_fy","minority_interest_exp_fq","minority_interest_exp_fh","discontinued_operations_fy","discontinued_operations_fq","discontinued_operations_fh","fundamental_currency_code","fund_view_mode"]),a=(0,
r.lazyValue)((()=>new o.QuoteSessionSnapshoter({name:"financials-webview-quotes",fields:[...n]})));let c;class h extends i.WebviewControllerBase{open(e){const t=this._createOpenRequest(i.WebviewPageName.Financials,e);a().getSnapshot(t.symbol(),n);t.execute().ChartQuoteSnapshotProvider={getQuoteSnapshot(){const e=l.QUOTE_FIELDS_CACHE.get(t.symbol());return e?.values??{}}}}static getInstance(){return c||(c=new h),c}}function d(e){h.getInstance().open(e)}},110723:(e,t,s)=>{"use strict";s.d(t,{corporateBondsDialogController:()=>l});var i=s(999138),r=s(481251);class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}_load(e){return Promise.all([s.e(35665),s.e(30598),s.e(75816),s.e(93703),s.e(46445),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(59258),s.e(22164),s.e(82421),s.e(67158),s.e(65857),s.e(45621),s.e(36010),s.e(72197),s.e(73399),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(98734),s.e(24125),s.e(85758),s.e(28101),s.e(74729),s.e(6633),s.e(89259),s.e(30449),s.e(80774),s.e(2220),s.e(68827),s.e(17762),s.e(13427),s.e(84984),s.e(83715),s.e(94799),s.e(70125),s.e(91954),s.e(87445),s.e(66764),s.e(71938),s.e(86314),s.e(92069),s.e(39705),s.e(57415),s.e(51014),s.e(28673),s.e(78915),s.e(53408),s.e(3580),s.e(82321),s.e(12831),s.e(68122),s.e(52382),s.e(43052),s.e(52181),s.e(44694),s.e(8458),s.e(74461),s.e(62613),s.e(19452),s.e(14348),s.e(18220)]).then(s.bind(s,752868)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.CorporateBondsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}const l=(0,r.default)((()=>new o))},713931:(e,t,s)=>{"use strict";s.d(t,{hideDetailsDialogs:()=>d});var i=s(57761),r=s(719885),o=s(988534),l=s(316478),n=s(273058),a=s(589026),c=s(110723),h=s(858554);function d(e){"forecast"!==e&&function(){const e=l.ForecastDialogController.getInstance();e.visible()&&e.hide()}(),"technicals"!==e&&function(){const e=r.TechnicalsDialogController.getInstance();e.visible()&&e.hide()}(),"financials"!==e&&function(){const e=o.FinancialsDialogController.getInstance();e.visible()&&e.hide()}(),"corporate-bonds"!==e&&function(){const e=(0,c.corporateBondsDialogController)();e.visible()&&e.hide()}(),"options"!==e&&function(){const e=i.OptionsDialogController.getInstance();e.visible()&&e.hide()}(),"etf-analysis"!==e&&function(){const e=n.EtfAnalysisDialogController.getInstance();e.visible()&&e.hide()}(),"bond-yield-curve"!==e&&function(){const e=a.BondYieldCurveDialogController.getInstance();e.visible()&&e.hide()}(),"seasonals"!==e&&function(){const e=h.SeasonalsDialogController.getInstance();e.visible()&&e.hide()}()}},988534:(e,t,s)=>{"use strict";s.d(t,{FinancialsDialogController:()=>o});var i=s(999138);let r;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){
this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}static getInstance(){return r||(r=new o),r}_load(e){return Promise.all([s.e(35665),s.e(5271),s.e(75816),s.e(93703),s.e(46445),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(59258),s.e(22164),s.e(82421),s.e(46489),s.e(67158),s.e(99325),s.e(53799),s.e(65857),s.e(45621),s.e(36010),s.e(25480),s.e(72197),s.e(49742),s.e(16190),s.e(62234),s.e(3782),s.e(77280),s.e(49162),s.e(22106),s.e(30422),s.e(98734),s.e(24125),s.e(93523),s.e(85758),s.e(28101),s.e(74729),s.e(6633),s.e(89259),s.e(44066),s.e(30449),s.e(80774),s.e(8222),s.e(2220),s.e(68827),s.e(17762),s.e(13427),s.e(84984),s.e(83715),s.e(39967),s.e(94799),s.e(70125),s.e(91954),s.e(87445),s.e(66764),s.e(71938),s.e(86314),s.e(92069),s.e(39705),s.e(62584),s.e(29145),s.e(24056),s.e(28673),s.e(53408),s.e(54862),s.e(97022),s.e(82321),s.e(12831),s.e(68122),s.e(52382),s.e(43052),s.e(52181),s.e(44694),s.e(8458),s.e(62613),s.e(2190),s.e(19452),s.e(24878)]).then(s.bind(s,681057)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.FinancialsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},700134:(e,t,s)=>{"use strict";s.d(t,{showFinancialsDialog:()=>o});var i=s(988534),r=s(713931);function o(e){i.FinancialsDialogController.getInstance().show({...e,onOpen:()=>{(0,r.hideDetailsDialogs)("financials")}})}},316478:(e,t,s)=>{"use strict";s.d(t,{ForecastDialogController:()=>l});var i=s(999138),r=s(583912);let o;class l extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}async canBeShown(e){const t=e||r.linking.proSymbol.value(),i=new Set(["recommendation_mark","pro_name"]),o=await(async()=>{const{snapshoter:e}=await s.e(62495).then(s.bind(s,960669));return e().getSnapshot(t,i)})();return!("error"===o.status||!o.values.recommendation_mark)}static getInstance(){return o||(o=new l),o}_load(e){return Promise.all([s.e(35665),s.e(27602),s.e(75816),s.e(93703),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(59258),s.e(22164),s.e(82421),s.e(67158),s.e(65857),s.e(45621),s.e(40142),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(92115),s.e(98734),s.e(85758),s.e(28101),s.e(74729),s.e(6633),s.e(89259),s.e(30449),s.e(31234),s.e(17762),s.e(13427),s.e(84984),s.e(83715),s.e(94799),s.e(91954),s.e(96589),s.e(73131),s.e(86314),s.e(92069),s.e(39705),s.e(55773),s.e(86873),s.e(28673),s.e(66285),s.e(82321),s.e(12831),s.e(52181),s.e(44694),s.e(8458),s.e(90183),s.e(90226),s.e(85080)]).then(s.bind(s,113564)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.ForecastDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},858554:(e,t,s)=>{"use strict";s.d(t,{SeasonalsDialogController:()=>o});var i=s(999138);let r;class o extends i.DialogRenderer{constructor(){
super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}static getInstance(){return r||(r=new o),r}async _load(e){const t=await Promise.all([s.e(95872),s.e(75816),s.e(93703),s.e(62093),s.e(44178),s.e(44524),s.e(21356),s.e(62564),s.e(58985),s.e(59258),s.e(82421),s.e(67158),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(85758),s.e(28101),s.e(81397),s.e(56657),s.e(84984),s.e(75919),s.e(36073),s.e(82321),s.e(12831),s.e(24377),s.e(31057),s.e(23699),s.e(62526),s.e(52181),s.e(38639)]).then(s.bind(s,282816));return this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.SeasonalsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog}}},999138:(e,t,s)=>{"use strict";s.d(t,{DialogRenderer:()=>r});var i=s(375397);class r{constructor(){this._container=document.createElement("div"),this._visibility=new i.WatchedValue(!1),this._rootInstance=null}visible(){return this._visibility.readonly()}_setVisibility(e){this._visibility.setValue(e)}}},92651:(e,t,s)=>{"use strict";s.d(t,{WebviewControllerBase:()=>o,WebviewPageName:()=>i});var i,r=s(583912);!function(e){e.Financials="financials",e.Forecast="forecast",e.Details="details",e.Technicals="technicals",e.EtfAnalysis="etf-analysis",e.CorporateBonds="corporate-bonds",e.Seasonals="seasonals"}(i||(i={}));class o{_createOpenRequest(e,t=new URLSearchParams){const s=t.get("symbol")??r.linking.symbol.value();return t.set("symbol",s),{execute(){const s=new URL(`webview/${e}/`,location.origin);return s.search=t.toString(),window.open(s,"_blank")},symbol:()=>s}}}},293269:(e,t,s)=>{"use strict";s.d(t,{barFunctionByStyle:()=>r});var i=s(368628);function r(e,t){switch(e){case 12:return(0,i.barFunction)("low","low","close");case 2:case 18:case 20:case 14:case 15:case 3:case 10:case 13:return(0,i.barFunction)(t??"close");default:return(0,i.barFunction)("close","open")}}},129968:(e,t,s)=>{"use strict";s.d(t,{CustomSourceBase:()=>i});class i{constructor(e,t){this._id=e,this._model=t}id(){return this._id}isHoveredEnabled(){return!0}isSelectionEnabled(){return!1}priceScale(){return null}paneViews(e){return[]}labelPaneViews(e){return[]}priceAxisViews(e,t){return[]}updateViewsForPane(e,t){e.containsMainSeries()&&this.updateAllViews(t)}}},35403:(e,t,s)=>{"use strict";s.d(t,{getDataVendorString:()=>r});var i=s(764829);function r(e){return null==e||i.enabled("bovespa_widget")?null:"QUANDL"===e.exchange?"Quandl.com":["BMFBOVESPA","BME","NAG","TSE","TFX","NZX","BCBA","TWSE","TASE","EURONEXT","TOCOM","BMV","SIX","SGX","GPW","SWB","BCS","WB","SZSE","BELEX","BAHRAIN","EGX","TADAWUL","BVL","LUXSE","DFM","BVC","NSENG","IDX","HSI","QSE","OSE"].includes(e.exchange)?"ICE Data Services":null}},546608:(e,t,s)=>{"use strict";s.d(t,{alwaysShowLastPriceAndLastDayChange:()=>i,lastDayChangeAvailable:()=>r});s(764829);const i=!1,r=!0},613438:(e,t,s)=>{"use strict";s.d(t,{fromIndexedTo100:()=>h,fromLog:()=>b,fromPercent:()=>n,getCurrentModePriceText:()=>y,
getOppositeModePriceText:()=>g,logFormulaForBase:()=>p,logFormulasAreSame:()=>m,toIndexedTo100:()=>d,toIndexedTo100Range:()=>_,toLog:()=>u,toPercent:()=>a,toPercentRange:()=>c});var i=s(704670),r=s(750139);const o={logicalOffset:4,coordOffset:1e-4},l=305;function n(e,t){return t<0&&(e=-e),e/100*t+t}function a(e,t){const s=100*(e-t)/(t||1);return t<0?-s:s}function c(e,t){const s=a(e.minValue(),t),r=a(e.maxValue(),t);return new i.PriceRange(s,r)}function h(e,t){return t<0&&(e=-e),(e-=100)/100*t+t}function d(e,t){const s=100*(e-t)/t+100;return t<0?-s:s}function _(e,t){const s=d(e.minValue(),t),r=d(e.maxValue(),t);return new i.PriceRange(s,r)}function u(e,t){const s=Math.min(10**l-t.coordOffset,Math.abs(e));if(s<1e-25)return 0;const i=(0,r.log10)(s+t.coordOffset)+t.logicalOffset;return e<0?-i:i}function b(e,t){const s=Math.abs(e);if(s<1e-15)return 0;const i=Math.pow(10,Math.min(s-t.logicalOffset,l))-t.coordOffset;return e<0?-i:i}function p(e){if(null===e)return o;const t=1/e;if(t>=o.coordOffset||t<1e-15)return o;const s=Math.abs(Math.log10(e));return{logicalOffset:s,coordOffset:1/Math.pow(10,s)}}function m(e,t){return e.logicalOffset===t.logicalOffset&&e.coordOffset===t.coordOffset}function y(e,t){return e.isPercentage()?t.formattedPricePercentage:e.isIndexedTo100()?t.formattedPriceIndexedTo100:t.formattedPriceAbsolute}function g(e,t){return e.isPercentage()||e.isIndexedTo100()?t.formattedPriceAbsolute:t.formattedPricePercentage}},463246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{QuotesProvider:()=>l});var i=s(625545),r=s(942634),o=s(79342);class l{constructor(e="full",t){this._quotes=null,this._quoteSessionSymbol=null,this._quoteSessionClientId="",this._pausedQuoteSessionSymbol=null,this._quotesUpdate=new r.Delegate,this._quoteSymbolChanged=new r.Delegate,this._multiplexerType=e,this._hibernated=t,this._hibernated?.subscribe((e=>{e?this.pause():this.resume()}))}setQuotesSessionSymbol(e){this._quoteSessionSymbol!==e&&(this._pausedQuoteSessionSymbol=null,this._quoteSessionClientId||(this._quoteSessionClientId="series-"+(0,o.guid)()),this._unsubscribeQuoteSession(),this._quoteSessionSymbol=e,this._quoteSymbolChanged.fire(),e&&this._subscribeQuoteSession(e))}symbol(){return this._quoteSessionSymbol}quotesUpdate(){return this._quotesUpdate}quoteSymbolChanged(){return this._quoteSymbolChanged}quotes(){return this._quotes}async quotesSnapshot(e){return(0,i.getQuoteSessionInstance)("simple").snapshot(e)}isPaused(){return null!==this._pausedQuoteSessionSymbol}pause(){null===this._pausedQuoteSessionSymbol&&(this._pausedQuoteSessionSymbol=this._quoteSessionSymbol,this._unsubscribeQuoteSession())}resume(){null!==this._pausedQuoteSessionSymbol&&(this._subscribeQuoteSession(this._pausedQuoteSessionSymbol),this._pausedQuoteSessionSymbol=null)}destroy(){this._unsubscribeQuoteSession(),this._hibernated?.release()}_onUpdate(e,t){this._quotes=e&&e.values||null,t&&t.values&&this._quotesUpdate.fire(e,t)}_subscribeQuoteSession(e){this._quoteSessionSymbol=e,(0,
i.getQuoteSessionInstance)(this._multiplexerType).subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,this._onUpdate.bind(this))}_unsubscribeQuoteSession(){this._quoteSessionSymbol&&((0,i.getQuoteSessionInstance)(this._multiplexerType).unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=null,this._quotes=null)}}},269734:(e,t,s)=>{"use strict";s.d(t,{SeriesBarColorer:()=>b});var i=s(790188),r=s(650151),o=s(725356),l=s(518439),n=s(200441);const a=(0,i.getHexColorByName)("color-minty-green-500"),c=(0,i.getHexColorByName)("color-ripe-red-500");function h(e){return{barColor:e.upColor.value(),barBorderColor:e.borderUpColor?e.borderUpColor.value():e.borderColor.value()}}function d(e){return{barColor:e.downColor.value(),barBorderColor:e.borderDownColor?e.borderDownColor.value():e.borderColor.value()}}function _(e,t){return e.borderUpColorProjection&&e.borderUpColor?{barColor:t?e.upColorProjection.value():e.upColor.value(),barBorderColor:t?e.borderUpColorProjection.value():e.borderUpColor.value()}:{barColor:t?e.upColorProjection.value():e.upColor.value()}}function u(e,t){return e.borderDownColorProjection&&e.borderDownColor?{barColor:t?e.downColorProjection.value():e.downColor.value(),barBorderColor:t?e.borderDownColorProjection.value():e.borderDownColor.value()}:{barColor:t?e.downColorProjection.value():e.downColor.value()}}class b extends n.AbstractBarColorer{constructor(e){super(),this._series=e}applyBarStyle(e,t,s,i){const r=s;r.barColor=void 0,r.barBorderColor=void 0,r.barWickColor=void 0,r.isBarHollow=void 0,r.isBarUp=void 0,r.upColor=void 0,r.downColor=void 0,r.isTwoColorBar=void 0,r.isMergedBar=void 0;const o=this._series.properties();switch(o.childs().style.value()){case 2:case 18:case 14:case 15:this._applyLineStyle(s,o);break;case 3:this._applyAreaStyle(s,o);break;case 16:this._applyHLCAreaStyle(e,t,s,i,o);break;case 0:this._applyBarStyle(e,s,i,o);break;case 17:case 1:case 19:this._applyCandleStyle(e,s,i,o);break;case 9:this._applyHollowCandleStyle(e,s,i,o);break;case 8:this._applyHAStyle(e,t,s,i,o);break;case 10:this._applyBaseLineStyle(e,t,s,i,o);break;case 12:this._applyHiLoStyle(t,s,o);break;case 13:this._applyColumnStyle(e,s,i,o);break;case 4:this._applyRenkoStyle(e,t,s,i,o);break;case 7:this._applyPBStyle(e,t,s,i,o);break;case 5:this._applyKagiStyle(e,t,s,i,o);break;case 6:this._applyPnfStyle(e,t,s,i,o);break;case 11:this._applyRangeStyle(e,t,s,i,o);break;case 20:this._applySVPStyle(e,s,i,o)}return s}static upColor(e,t){const s=e.childs(),i=s.style.value();switch(i){case 18:return{barColor:s.tpoStyle.childs().color.value()};case 20:return{barColor:s.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 2:return{barColor:s.lineStyle.childs().color.value()};case 14:return{barColor:s.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:s.steplineStyle.childs().color.value()};case 3:return{barColor:s.areaStyle.childs().linecolor.value()};case 16:return{barColor:s.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:a};case 0:
return{barColor:s.barStyle.childs().upColor.value()};case 17:return h(s.volFootprintStyle.childs());case 19:return h(s.volCandlesStyle.childs());case 1:return h(s.candleStyle.childs());case 9:return h(s.hollowCandleStyle.childs());case 8:return h(s.haStyle.childs());case 10:return{barColor:s.baselineStyle.childs().topLineColor.value()};case 12:return{barColor:s.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:s.columnStyle.childs().upColor.value()};case 4:return _(s.renkoStyle.childs(),t);case 7:return _(s.pbStyle.childs(),t);case 5:return _(s.kagiStyle.childs(),t);case 6:return _(s.pnfStyle.childs(),t);case 11:0;const i=s.rangeStyle.childs(),r=i.barStyle.value()===o.RangeBarStyle.Bars;return{barColor:t?i.upColorProjection.value():r?i.upColor.value():i.candlesUpColor.value(),barBorderColor:t?i.upColorProjection.value():r?i.upColor.value():i.candlesBorderUpColor.value()}}(0,r.ensureNever)(i)}static downColor(e,t){const s=e.childs(),i=s.style.value();switch(i){case 2:return{barColor:s.lineStyle.childs().color.value()};case 18:return{barColor:s.tpoStyle.childs().color.value()};case 20:return{barColor:s.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 14:return{barColor:s.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:s.steplineStyle.childs().color.value()};case 3:return{barColor:s.areaStyle.childs().linecolor.value()};case 16:return{barColor:s.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:c};case 0:return{barColor:s.barStyle.childs().downColor.value()};case 17:return d(s.volFootprintStyle.childs());case 1:return d(s.candleStyle.childs());case 19:return d(s.volCandlesStyle.childs());case 9:return d(s.hollowCandleStyle.childs());case 8:return d(s.haStyle.childs());case 10:return{barColor:s.baselineStyle.childs().bottomLineColor.value()};case 12:return{barColor:s.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:s.columnStyle.childs().downColor.value()};case 4:return u(s.renkoStyle.childs(),t);case 7:return u(s.pbStyle.childs(),t);case 5:return u(s.kagiStyle.childs(),t);case 6:return u(s.pnfStyle.childs(),t);case 11:0;const i=s.rangeStyle.childs(),r=i.barStyle.value()===o.RangeBarStyle.Bars;return{barColor:t?i.downColorProjection.value():r?i.downColor.value():i.candlesDownColor.value(),barBorderColor:t?i.downColorProjection.value():r?i.downColor.value():i.candlesBorderDownColor.value()}}(0,r.ensureNever)(i)}_applyLineStyle(e,t){e.barColor=b.upColor(t).barColor}_applyAreaStyle(e,t){e.barColor=b.upColor(t).barColor}_applyHLCAreaStyle(e,t,s,i,r){const o=this._isUp(e,!1,i,this._series.data().first()?.index!==e)?b.upColor(r,t):b.downColor(r,t);s.barColor=o.barColor,s.barBorderColor=o.barBorderColor}_applyBarStyle(e,t,s,i){const r=this._isUp(e,!1,s,i.childs().barStyle.childs().barColorsOnPrevClose.value())?b.upColor(i):b.downColor(i);t.barColor=r.barColor,t.barBorderColor=r.barBorderColor}_applyCandleStyle(e,t,s,i){
const r=i.childs(),o=1===r.style.value()?r.candleStyle.childs():19===r.style.value()?r.volCandlesStyle.childs():r.volFootprintStyle.childs(),l=this._isUp(e,!1,s,o.barColorsOnPrevClose.value()&&this._series.data().first()?.index!==e),n=l?b.upColor(i):b.downColor(i);t.barColor=n.barColor,t.barBorderColor=n.barBorderColor,t.barWickColor=l?o.wickUpColor?o.wickUpColor.value():o.wickColor.value():o.wickDownColor?o.wickDownColor.value():o.wickColor.value()}_applyHollowCandleStyle(e,t,s,i){const r=i.childs().hollowCandleStyle.childs(),o=this._isUp(e,!1,s,this._series.data().first()?.index!==e),l=o?b.upColor(i):b.downColor(i);t.barColor=l.barColor,t.barBorderColor=l.barBorderColor,t.barWickColor=o?r.wickUpColor?r.wickUpColor.value():r.wickColor.value():r.wickDownColor?r.wickDownColor.value():r.wickColor.value();const n=this._findBar(e,!1,s);t.isBarHollow=n[1]<=n[4]}_applyHAStyle(e,t,s,i,r){const o=r.childs().haStyle.childs(),l=this._isUp(e,t,i,o.barColorsOnPrevClose.value()),n=l?b.upColor(r):b.downColor(r);s.barColor=n.barColor,s.barBorderColor=n.barBorderColor,s.barWickColor=l?o.wickUpColor.value():o.wickDownColor.value()}_applyBaseLineStyle(e,t,s,i,o){const l=this._findBar(e,t,i),n=o.childs().baselineStyle.childs(),a=this._series.priceScale(),c=Math.round(a.height()*(Math.abs(100-n.baseLevelPercentage.value())/100)),h=(0,r.ensureNotNull)(this._series.firstValue()),d=a.coordinateToPrice(c,h);l[4]>d?s.barColor=b.upColor(o,t).barColor:s.barColor=b.downColor(o,t).barColor}_applyHiLoStyle(e,t,s){const i=b.upColor(s,e);t.barColor=i.barColor,t.barBorderColor=i.barBorderColor}_applyColumnStyle(e,t,s,i){const r=i.childs().columnStyle.childs(),o=this._isUp(e,!1,s,r.barColorsOnPrevClose.value())?b.upColor(i):b.downColor(i);t.color=o.barColor,t.barColor=t.color}_applyRenkoStyle(e,t,s,i,r){const o=r.childs().renkoStyle.childs(),l=this._isUp(e,t,i,!1),n=l?b.upColor(r,t):b.downColor(r,t);s.barColor=n.barColor,s.barBorderColor=n.barBorderColor,s.barWickColor=l?o.wickUpColor.value():o.wickDownColor.value(),s.isBarUp=l}_applyPBStyle(e,t,s,i,r){const o=this._isUp(e,t,i,!1),l=o?b.upColor(r,t):b.downColor(r,t);s.barColor=l.barColor,s.barBorderColor=l.barBorderColor,s.isBarUp=o}_applyKagiStyle(e,t,s,i,r){let o;s.upColor=b.upColor(r,t).barColor,s.downColor=b.downColor(r,t).barColor;const l=this._findBar(e,t,i);l[3]<l[6]&&l[6]<l[2]?(o=l[1]<=l[4],s.isTwoColorBar=!0):(o=l[1]<=l[4]?l[1]===l[6]:l[1]!==l[6],s.isTwoColorBar=!1),s.barColor=o?s.upColor:s.downColor,s.isBarUp=l[1]<=l[4]}_applyPnfStyle(e,t,s,i,r){const o=this._findBar(e,t,i)[6],l=o>0,n=b.upColor(r,t),a=b.downColor(r,t);s.isBarUp=l,s.isMergedBar=2===Math.abs(o),s.upColor=n.barColor,s.downColor=a.barColor,s.barColor=l?n.barColor:a.barColor}_applyRangeStyle(e,t,s,i,r){const l=r.childs().rangeStyle.childs(),n=l.barStyle.value()===o.RangeBarStyle.Bars,a=this._isUp(e,!1,i,!1),c=a?b.upColor(r,t):b.downColor(r,t),h=a?t?l.upColorProjection.value():n?void 0:l.candlesWickUpColor.value():t?l.downColorProjection.value():n?void 0:l.candlesWickDownColor.value();s.barColor=c.barColor,
s.barBorderColor=c.barBorderColor,s.wickColor=h,s.barWickColor=h}_applySVPStyle(e,t,s,i){const r=this._isUp(e,!1,s,!1)?b.upColor(i,!1):b.downColor(i,!1);t.barColor=r.barColor,t.barBorderColor=r.barBorderColor}_findBar(e,t,s){return s?s.value:this._getSeriesBars(t).valueAt(e)||[]}_findPrevBar(e,t,s){if(s&&s.previousValue)return s.previousValue;const i=this._series.bars().search(e-1,l.PlotRowSearchMode.NearestLeft,4);return null!==i?i.value:[]}_getSeriesBars(e){return e?this._series.nsBars():this._series.bars()}_isUp(e,t,s,i){const r=this._findBar(e,t,s);if(i){return this._findPrevBar(e,t,s)[4]<=r[4]}return r[1]<=r[4]}}},314218:(e,t,s)=>{"use strict";s.d(t,{SeriesAreaPaneView:()=>a});var i=s(432059),r=s(403862),o=s(982949),l=s(112377),n=s(98069);class a extends n.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().areaStyle.childs(),s=t.transparency.value(),n={simpleMode:!1,barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:t.linecolor.value(),lineStyle:t.linestyle.value(),lineWidth:t.linewidth.value(),isSeries:!0,withMarkers:!1,bottom:e.height(),color1:(0,i.generateColor)(t.color1.value(),s),color2:(0,i.generateColor)(t.color2.value(),s),skipHoles:!0},a=new o.CompositeRenderer;return a.append(new r.PaneRendererArea(n)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&a.append(new l.SelectionRenderer(this._selectionData)),a}}},309152:(e,t,s)=>{"use strict";s.d(t,{SeriesBarsPaneView:()=>n});var i=s(982949),r=s(112377),o=s(841698),l=s(449524);class n extends o.SeriesBarCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:e.barStyle.childs().dontDrawOpen.value(),thinBars:11===e.style.value()?e.rangeStyle.childs().thinBars.value():e.barStyle.childs().thinBars.value()},s=new i.CompositeRenderer;return s.append(new l.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&s.append(new r.SelectionRenderer(this._selectionData)),s}_createItem(e,t,s){const i={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:s.barColor,left:NaN,right:NaN,timePointIndex:e};return(0,o.baseBarCandlesUpdater)(t,i)?i:null}}},856122:(e,t,s)=>{"use strict";s.d(t,{SeriesBaselinePaneView:()=>p});var i=s(432059),r=s(982949),o=s(86441),l=s(5531),n=s(204652),a=s(286436),c=s(828473),h=s(367637),d=s(509078);class _ extends h.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null}setData(e){this._data=e}hitTest(e){if(null===this._data)return null;const{items:t,topLineWidth:s,bottomLineWidth:i}=this._data,r=(0,a.interactionTolerance)().series+(s+i)/4,l=(0,c.lowerbound)(t,e,((e,t)=>e.center<=t.x)),h=Math.max(1,l-1),_=Math.min(t.length-1,l+1);for(let s=h;s<=_;++s){const i=t[s-1],l=t[s],{distance:a}=(0,n.distanceToSegment)((0,o.point)(i.center,i.y),(0,
o.point)(l.center,l.y),(0,o.point)(e.x,e.y));if(a<=r)return new d.HitTestResult(d.HitTarget.Regular)}return null}_drawImpl(e){if(null===this._data)return;const{items:t,baseLevelCoordinate:s,bottom:i,bottomFillColor1:r,bottomFillColor2:n,topFillColor1:c,topFillColor2:h,topLineColor:d,bottomLineColor:_,topLineWidth:u,bottomLineWidth:b}=this._data;if(!function(e){if(0===e.length)return!1;const t=e.findIndex((e=>(0,a.coordinateIsValid)(e.y)));if(-1===t)return!1;let s=e.length-1;for(;s>t&&!(0,a.coordinateIsValid)(e[s].y);)s--;return!(t>s)}(t))return;const p=e.context,{topItems:m,bottomItems:y}=function(e,t){const s=[],i=[];let r=null;for(let n=0;n<e.length;n++){let c=e[n];const h=e[n+1]||{};if((0,a.coordinateIsValid)(c.y))c.y<=t&&s.push(c),c.y>=t&&i.push(c),r=c;else{if(null===r)continue;c=r}if((0,a.coordinateIsValid)(h.y)&&(c.y>t&&h.y<t||c.y<t&&h.y>t))if(Math.abs(c.center-h.center)<1){const e={center:c.center,y:t};s.push(e),i.push(e)}else{const e=(0,l.intersectLineSegments)((0,o.point)(c.center,c.y),(0,o.point)(h.center,h.y),(0,o.point)(c.center,t),(0,o.point)(h.center,t));if(null!==e){const t={center:c.center+(h.center-c.center)*e,y:c.y+(h.y-c.y)*e};s.push(t),i.push(t)}}}return{topItems:s,bottomItems:i}}(t,s);p.lineCap="round",p.lineJoin="round",0!==m.length&&(p.beginPath(),p.moveTo(m[0].center,s),this._makeLine(p,m,!0,0),p.closePath(),p.fillStyle=this._makeLinearGradient(p,c,h,s-i,s),p.fill(),p.beginPath(),this._makeLine(p,m,!1,0),p.lineWidth=u,p.strokeStyle=d,p.stroke()),0!==y.length&&(p.beginPath(),p.moveTo(y[0].center,s),this._makeLine(p,y,!0,1),p.closePath(),p.fillStyle=this._makeLinearGradient(p,r,n,s,s+i),p.fill(),p.beginPath(),this._makeLine(p,y,!1,1),p.lineWidth=b,p.strokeStyle=_,p.stroke())}_makeLine(e,t,s,i){if(null===this._data)return;const r=t.findIndex((e=>(0,a.coordinateIsValid)(e.y)));if(-1===r)return;const{barSpacing:o,baseLevelCoordinate:l}=this._data,n=.25*o;let c;const h=t.length;for(let o=r;o<h;o++){const h=t[o],d=t[o+1]||{};if((0,a.coordinateIsValid)(h.y)){if(0===i){if(c&&c.y>=l&&h.y>=l){e.moveTo(h.center,h.y);continue}}else if(c&&c.y<=l&&h.y<=l){e.moveTo(h.center,h.y);continue}if(c&&(0,a.coordinateIsValid)(c.y))e.lineTo(h.center,h.y),s&&!(0,a.coordinateIsValid)(d.y)&&e.lineTo(h.center,l);else if(d&&(0,a.coordinateIsValid)(d.y))s?(o!==r&&e.lineTo(h.center,l),e.lineTo(h.center,h.y)):e.moveTo(h.center,h.y);else if(s){if(0===o)continue;o!==r&&e.lineTo(h.center-n,l),e.lineTo(h.center-n,h.y),e.lineTo(h.center+n,h.y),e.lineTo(h.center+n,l)}else e.moveTo(h.center-n,h.y),e.lineTo(h.center+n,h.y);c=h}}}_makeLinearGradient(e,t,s,i,r){const o=e.createLinearGradient(0,i,0,r);return o.addColorStop(0,t),o.addColorStop(1,s),o}}var u=s(112377),b=s(98069);class p extends b.SeriesSingleLinePaneView{constructor(){super(...arguments),this._renderer=new _,this._topFillColor1="",this._topFillColor2="",this._bottomFillColor1="",this._bottomFillColor2="",this._topLineColor="",this._bottomLineColor="",this._topLineWidth=0,this._bottomLineWidth=0,this._barSpacing=0,this._bottom=0,this._baseLevelCoordinate=0}renderer(){
this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this._items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});const e=new r.CompositeRenderer;return e.append(this._renderer),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&e.append(new u.SelectionRenderer(this._selectionData)),e}_updateImpl(){super._updateImpl();const e=this._source.priceScale();if(!e)return;const t=this._source.properties().childs().baselineStyle.childs(),s=t.transparency.value();this._topFillColor1=(0,i.generateColor)(t.topFillColor1.value(),s),this._topFillColor2=(0,i.generateColor)(t.topFillColor2.value(),s),this._bottomFillColor1=(0,i.generateColor)(t.bottomFillColor1.value(),s),this._bottomFillColor2=(0,i.generateColor)(t.bottomFillColor2.value(),s),this._topLineColor=t.topLineColor.value(),this._bottomLineColor=t.bottomLineColor.value(),this._topLineWidth=t.topLineWidth.value(),this._bottomLineWidth=t.bottomLineWidth.value(),this._barSpacing=this._model.timeScale().barSpacing(),this._bottom=e.height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-t.baseLevelPercentage.value())/100))}}},483275:(e,t,s)=>{"use strict";s.d(t,{SeriesWaterlinePaneView:()=>n});var i=s(345159),r=s(86e3),o=s(509078),l=s(666574);class n extends i.HorizontalLinePaneView{constructor(e){super(),this._getters=e;const t={cursorType:r.PaneCursorType.VerticalResize,activeItem:0,areaName:o.AreaName.SourceItemMove};this._lineRenderer.setHitTest(new o.HitTestResult(o.HitTarget.MovePoint,t)),this._lineRendererData.visible=!0,this._lineRendererData.linestyle=l.LINESTYLE_SPARSE_DOTTED}_updateImpl(){const{baseLevelPercentage:e,paneHeight:t,color:s}=this._getters,i=Math.abs(100-e());this._lineRendererData.y=Math.round(t()*(i/100)),this._lineRendererData.color=s()}}},88854:(e,t,s)=>{"use strict";s.d(t,{SeriesCandlesPaneView:()=>a});var i=s(982949),r=s(286436),o=s(112377),l=s(841698),n=s(559327);class a extends l.SeriesBarCandlesPaneView{constructor(e,t,s=1){super(e,t),this._scaleCoeff=1,this._scaleCoeff=s}renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs(),s=1===t.style.value()?t.candleStyle.childs():19===t.style.value()?t.volCandlesStyle.childs():t.volFootprintStyle.childs(),l=this._model.timeScale().barSpacing(),a={bars:this._bars,barSpacing:l,bodyVisible:s.drawBody.value(),borderVisible:s.drawBorder.value(),borderColor:s.borderColor.value(),wickColor:s.wickColor.value(),barWidth:(0,r.optimalBarWidth)(l),wickVisible:s.drawWick.value(),isPriceScaleInverted:e.isInverted(),scaleCoeff:this._scaleCoeff},c=new i.CompositeRenderer
;return c.append(new n.PaneRendererCandles(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&c.append(new o.SelectionRenderer(this._selectionData)),c}_createItem(e,t,s){const i={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,left:NaN,right:NaN,timePointIndex:e,color:s.barColor,borderColor:s.barBorderColor,wickColor:s.barWickColor,hollow:s.isBarHollow};return(0,l.baseBarCandlesUpdater)(t,i)?i:null}}},315641:(e,t,s)=>{"use strict";s.d(t,{SeriesColumnsPaneView:()=>u});var i=s(650151),r=s(86441),o=s(764829),l=s(569708),n=s(509078),a=s(982949),c=s(518439),h=s(836687),d=s(112377),_=s(559678);s(613438);class u{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,o.enabled)("source_selection_markers"),this._selectionData=null,this._histogramBase=0,this._source=e,this._model=t,this._selectionIndexer=new h.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:"",histogramBase:this._histogramBase},t=new a.CompositeRenderer;return t.append(new _.PaneRendererColumns(e)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new d.SelectionRenderer(this._selectionData)),t}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const s=e.visibleBarsStrictRange();if(null===s)return;if(0===this._source.bars().size())return;const o=this._source.nearestIndex(s.firstBar(),c.PlotRowSearchMode.NearestRight),a=this._source.nearestIndex(s.lastBar(),c.PlotRowSearchMode.NearestLeft);if(void 0===o||void 0===a)return;const h=this._source.barColorer(),d={},_=this._source.barFunction();for(const{index:e,value:t}of this._source.bars().rangeIterator(o,a)){const s=_(t);if(!(0,l.default)(s))continue;d.value=t;let i=this._source.precomputedBarStyle(t);void 0===i&&(i=h.barStyle(e,!1,d),this._source.setPrecomputedBarStyle(t,i)),this._items.push({timePointIndex:e,left:NaN,center:NaN,right:NaN,y:s,style:i}),d.previousValue=t}const u=this._source.firstValue();if(null===u)return;t.pointsArrayToCoordinates(this._items,u),e.fillBarBorders(this._items);this._source.properties().childs().columnStyle.childs().baselinePosition?.value();if(this._histogramBase=t.isInverted()?0:t.height(),this._model.selection().isSelected(this._source)){const s=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:n.HitTarget.Regular};const o=(0,i.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=n.HitTarget.Regular;for(let i=0;i<s.length;i++){const l=s[i],n=this._source.bars().valueAt(l);if(null===n)continue;const a=_(n),c=e.indexToCoordinate(l),h=t.priceToCoordinate(a,u);this._selectionData.points.push({point:new r.Point(c,h)}),
this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(h/o))}}else this._selectionIndexer.clear()}}},733828:(e,t,s)=>{"use strict";s.d(t,{SeriesHiLoPaneView:()=>m});var i=s(259332),r=s(694852),o=s(828473),l=s(286436),n=s(509078),a=s(367637);class c extends a.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._barWidth=null}setData(e){this._data=e,this._barWidth=Math.max(1,Math.round((0,l.optimalHiLoWidth)(e.barSpacing)))}hitTest(e){if(null===this._data||null===this._barWidth)return null;const t=this._data.bars,s=.5*this._data.barSpacing;if(0===t.length)return null;if(e.x<t[0].center-s)return null;if(e.x>t[t.length-1].center+s)return null;const i=t[(0,o.lowerbound)(t,e.x-s,((e,t)=>e.center<t))];if(e.x<i.center-s||e.x>i.center+s)return null;const r=(0,l.interactionTolerance)().series+this._barWidth/2,a=Math.min(i.high,i.low),c=Math.max(i.high,i.low),h=this._data.fontSize;return a-r-h<=e.y&&e.y<=a+r||c-r<=e.y&&e.y<=c+r+h?new n.HitTestResult(n.HitTarget.Regular):null}_drawImpl(e){if(null===this._data||null===this._barWidth)return;const{font:t,fontSize:s,labelColor:i,bars:o,inverted:l,labelsPadding:n}=this._data,a=e.context;a.textAlign="center",a.fillStyle=i,a.font=(0,r.makeFont)(s,t);for(let e=0;e<o.length;++e){const t=o[e],s=Math.round(Math.min(t.high,t.low)),i=Math.round(Math.max(t.high,t.low)),r=Math.round(t.center);a.textBaseline="alphabetic",a.fillText(l?t.lowLabel:t.highLabel,r,s-n),a.textBaseline="top",a.fillText(l?t.highLabel:t.lowLabel,r,i+n)}}}var h=s(982949),d=s(112377),_=s(511275),u=s(631088),b=s(559327),p=s(841698);class m extends p.SeriesBarCandlesPaneView{constructor(e,t){super(e,t),this._labelsRenderer=new c,this._candlesRenderer=new b.PaneRendererCandles,this._maxLengthLabel="",this._calculateFontSize=(0,i.default)(((e,t)=>Math.max(1,(0,o.lowerboundExt)((e=>e+1),null,(s=>{const i=(0,r.makeFont)(s,_.CHART_FONT_FAMILY);return(0,u.measureText)(e,i).width<=t}),7,36))),((e,t)=>`${e}/${t}`))}renderer(){const e=this._source.priceScale();if(!e||e.isEmpty())return null;const t=new h.CompositeRenderer,s=this._needLabels(),i=this._source.properties().childs().hiloStyle.childs(),r=this._model.timeScale().barSpacing();if(this._invalidated){const e=this._source.formatter();this._maxLengthLabel="",this._updateImpl({generateLabels:s,formatter:e}),this._invalidated=!1}if(this._candlesRenderer.setData({bars:this._bars,wickVisible:!1,bodyVisible:i.drawBody.value(),barSpacing:r,borderVisible:i.showBorders.value(),barWidth:(0,l.optimalHiLoWidth)(r),isPriceScaleInverted:e.isInverted()}),t.append(this._candlesRenderer),s){const s=this._calculateLabelFontSize();s&&s>=8&&(this._labelsRenderer.setData({bars:this._bars,barSpacing:r,font:_.CHART_FONT_FAMILY,fontSize:s,labelColor:i.labelColor.value(),inverted:e.isInverted(),labelsPadding:.4*s}),t.append(this._labelsRenderer))}return this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new d.SelectionRenderer(this._selectionData)),t}topPixelMargin(){return this._margin()}
bottomPixelMargin(){return this._margin()}_createItem(e,t,s,i){const r={center:NaN,left:NaN,right:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:s.barColor,borderColor:s.barBorderColor,hollow:!1,highLabel:"",lowLabel:"",timePointIndex:e};if(!(0,p.baseBarCandlesUpdater)(t,r))return null;if(r.open=r.high,r.close=r.low,i.generateLabels){const e=i.formatter.format(r.high),t=i.formatter.format(r.low);r.highLabel=e,r.lowLabel=t;const s=(e.length>t.length?e:t).replace(/\d/g,"0");s.length>this._maxLengthLabel.length&&(this._maxLengthLabel=s)}return r}_margin(){if(this._needLabels()){const e=this._calculateLabelFontSize();if(e&&e>=8)return 1.4*e}return 0}_calculateLabelFontSize(){return""===this._maxLengthLabel?null:this._calculateFontSize(this._maxLengthLabel,Math.floor(this._model.timeScale().barSpacing())-2)}_needLabels(){const e=this._source.properties().childs().hiloStyle.childs().showLabels.value(),t=this._model.timeScale().barSpacing();return e&&t>5}}},836835:(e,t,s)=>{"use strict";s.d(t,{SeriesHLCAreaPaneView:()=>m});var i=s(86441),r=s(650151),o=s(764829),l=s(114555),n=s(836687),a=s(112377),c=s(518439),h=s(286436),d=s(982949),_=s(509078),u=s(708698),b=s(117908);class p extends b.ObjectValuesCache{_newObject(){return{high:void 0,close:void 0,low:void 0}}_clearObject(e){e.high=void 0,e.close=void 0,e.low=void 0}}class m{constructor(e,t){this._isMarkersEnabled=(0,o.enabled)("source_selection_markers"),this._hlcAreaCache=new p,this._highPoints=new b.CachedContainer,this._closePoints=new b.CachedContainer,this._lowPoints=new b.CachedContainer,this._barsBorders=new b.CachedContainer,this._filledAreas=new l.CachedMap,this._renderer=new d.CompositeRenderer,this._invalidated=!0,this._source=e,this._model=t,this._selectionIndexer=new n.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer}_updateImpl(){this._renderer.clear();const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const s=e.visibleBarsStrictRange();if(null===s)return;if(0===this._source.bars().size())return;const o=this._source.firstValue();if(null===o)return;const n=this._source.nearestIndex(s.firstBar()-1,c.PlotRowSearchMode.NearestLeft)??s.firstBar()-1,d=this._source.nearestIndex(s.lastBar()+1,c.PlotRowSearchMode.NearestRight)??s.lastBar()+1;this._hlcAreaCache.invalidateCache(),this._hlcAreaCache.setStartIndex(n),this._barsBorders.invalidateCache(),this._highPoints.invalidateCache(),this._lowPoints.invalidateCache(),this._closePoints.invalidateCache(),this._filledAreas.invalidateCache();let b,p,m;this._source.bars().range(n,d).each(((e,t)=>{if(this._hlcAreaCache.isValidIndex(e)){const s=this._hlcAreaCache.at(e);s.close=t[4],s.high=t[2],s.low=t[3]}return!1}));const y=new Map,g=n+this._hlcAreaCache.length();for(let e=n;e<g;e++){const t=this._hlcAreaCache.at(e),s=t.close??null,i=t.high??null,r=t.low??null;(null!==s||null!==i||null!==r||Number.isFinite(b)||Number.isFinite(p)||Number.isFinite(m))&&(b=s,p=i,m=r,
this._highPoints.push(i),this._closePoints.push(s),this._lowPoints.push(r),this._barsBorders.push({timePointIndex:e,left:NaN,center:NaN,right:NaN}),y.set(e,this._barsBorders.length()-1))}t.pricesArrayToCoordinates(this._highPoints.data(),o,this._highPoints.length()),t.pricesArrayToCoordinates(this._closePoints.data(),o,this._closePoints.length()),t.pricesArrayToCoordinates(this._lowPoints.data(),o,this._lowPoints.length()),e.fillBarBorders(this._barsBorders.data(),{startItemIndex:0,endItemIndex:this._barsBorders.length()});const f=this._source.properties().childs().hlcAreaStyle.childs(),v=f.highCloseFillColor.value(),C=f.closeLowFillColor.value(),S=this._filledAreas.get(v)??new l.AreaBackgroundItemsGroup({type:0,color:v}),w=S.newItem()??new l.AreaBackgroundItem;S.push(w),this._filledAreas.set(v,S);const P=this._filledAreas.get(C)??new l.AreaBackgroundItemsGroup({type:0,color:C}),x=P.newItem()??new l.AreaBackgroundItem;P.push(x),this._filledAreas.set(C,P);const I=[],B=[],L=[],R=this._barsBorders.length();for(let e=0;e<R;e++){const t=this._closePoints.at(e),s=this._highPoints.at(e),i=this._lowPoints.at(e),r=this._barsBorders.at(e),o=r.center,l=(0,h.coordinateIsValid)(t),n=(0,h.coordinateIsValid)(s),a=(0,h.coordinateIsValid)(i);l&&n&&a&&(w.addPoints1Point(o,s),w.addPoints2Point(o,t),x.addPoints1Point(o,t),x.addPoints2Point(o,i),I.push({y:s,...r}),B.push({y:t,...r}),L.push({y:i,...r}))}const T=e.barSpacing();if(this._renderer.append(new l.AreaBackgroundRenderer({barSpacing:T,colorAreas:this._filledAreas})),this._renderer.append(new u.PaneRendererLine({barSpacing:T,items:L,simpleMode:!0,withMarkers:!1,lineColor:f.lowLineColor.value(),lineStyle:f.lowLineStyle.value(),lineWidth:f.lowLineWidth.value(),skipHoles:!0})),this._renderer.append(new u.PaneRendererLine({barSpacing:T,items:I,simpleMode:!0,withMarkers:!1,lineColor:f.highLineColor.value(),lineStyle:f.highLineStyle.value(),lineWidth:f.highLineWidth.value(),skipHoles:!0})),this._renderer.append(new u.PaneRendererLine({barSpacing:T,items:B,simpleMode:!0,withMarkers:!1,lineColor:f.closeLineColor.value(),lineStyle:f.closeLineStyle.value(),lineWidth:f.closeLineWidth.value(),skipHoles:!0})),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled){const t=this._selectionIndexer.indexes(),s=[],o=[],l=(0,r.ensureNotNull)(this._model.paneForSource(this._source)).height();for(let e=0;e<t.length;e++){const r=t[e],n=y.get(r);if(void 0===n)continue;const a=this._closePoints.at(n),c=this._barsBorders.at(n).center;s.push({point:new i.Point(c,a)}),o.push(this._model.backgroundColorAtYPercentFromTop(a/l))}this._renderer.append(new a.SelectionRenderer({bgColors:o,points:s,visible:!0,barSpacing:e.barSpacing(),hittestResult:_.HitTarget.Regular}))}else this._selectionIndexer.clear()}}},649171:(e,t,s)=>{"use strict";s.d(t,{SeriesHollowCandlesPaneView:()=>a});var i=s(982949),r=s(286436),o=s(112377),l=s(559327),n=s(88854);class a extends n.SeriesCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale()
;if(!e)return null;const t=this._source.properties().childs().hollowCandleStyle.childs(),s=this._model.timeScale().barSpacing(),n={bars:this._bars,barSpacing:s,bodyVisible:t.drawBody.value(),borderVisible:t.drawBorder.value(),borderColor:t.borderColor.value(),wickColor:t.wickColor.value(),barWidth:(0,r.optimalBarWidth)(s),wickVisible:t.drawWick.value(),isPriceScaleInverted:e.isInverted()},a=new i.CompositeRenderer;return a.append(new l.PaneRendererCandles(n)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&a.append(new o.SelectionRenderer(this._selectionData)),a}}},452647:(e,t,s)=>{"use strict";s.d(t,{SeriesLinePaneView:()=>c});var i=s(509078),r=s(982949),o=s(708698),l=s(810873),n=s(112377),a=s(98069);class c extends a.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.properties().childs(),t=e.style.value();let s,a=!1;2===t?s=e.lineStyle.childs():14===t?(s=e.lineWithMarkersStyle.childs(),a=!0):15===t?s=e.steplineStyle.childs():18===t&&(s=e.tpoStyle.childs());const c={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:s.color.value(),lineStyle:s.linestyle.value(),withMarkers:a,lineWidth:s.linewidth.value(),simpleMode:!0,hitTestResult:i.HitTarget.Regular,skipHoles:!0};let h,d;if(h=15===t?new l.PaneRendererStepLine(c):new o.PaneRendererLine(c),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData){const e=new r.CompositeRenderer;e.append(h),e.append(new n.SelectionRenderer(this._selectionData)),d=e}else d=h;return d}}},841698:(e,t,s)=>{"use strict";s.d(t,{SeriesBarCandlesPaneView:()=>h,baseBarCandlesUpdater:()=>c});var i=s(86441),r=s(764829),o=s(836687),l=s(518439),n=s(509078);function a(e){return null!=e}function c(e,t){const s=e[1],i=e[2],r=e[3],o=e[4];return!!(a(s)&&a(i)&&a(r)&&a(o))&&(t.open=s,t.high=i,t.low=r,t.close=o,!0)}class h{constructor(e,t){this._bars=[],this._invalidated=!0,this._isMarkersEnabled=(0,r.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new o.SelectionIndexes(t.timeScale())}items(){return this._bars}update(){this._invalidated=!0}_updateImpl(e){const t=this._model.timeScale(),s=this._source.priceScale();if(this._bars=[],t.isEmpty()||!s||s.isEmpty())return;const r=t.visibleBarsStrictRange();if(null===r)return;if(0===this._source.bars().size())return;let o=this._source.nearestIndex(r.firstBar(),l.PlotRowSearchMode.NearestRight);const a=this._source.nearestIndex(r.lastBar(),l.PlotRowSearchMode.NearestLeft);if(void 0===o||void 0===a)return;for(;o<=a;o++){if(null!==this._source.bars().valueAt(o))break}if(o>a)return;const c=this._source.bars().range(o,a),h=this._source.barColorer(),d={};if(c.each(((t,s)=>{d.value=s;const i=h.firstColoredBar(t);let r;null!==i&&i>=t?this._source.setPrecomputedBarStyle(s,void 0):r=this._source.precomputedBarStyle(s),void 0===r&&(r=h.barStyle(t,!1,d),this._source.setPrecomputedBarStyle(s,r));const o=this._createItem(t,s,r,e)
;return!!o&&(d.previousValue=s,this._bars.push(o),!1)})),0===this._bars.length)return;const _=this._source.firstValue();if(null!==_)if(s.barPricesToCoordinates(this._bars,_),t.fillBarBorders(this._bars),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,hittestResult:n.HitTarget.Regular,barSpacing:t.barSpacing()};const r=this._model.paneForSource(this._source);if(!r)return;const o=r.height();for(let r=0;r<e.length;r++){const l=e[r],n=this._source.bars().valueAt(l);if(null===n)continue;const a=n[1],c=n[4];if(null==a||null==c)continue;const h=.5*(a+c),d=t.indexToCoordinate(l),u=s.priceToCoordinate(h,_);this._selectionData.points.push({point:new i.Point(d,u)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(u/o))}}else this._selectionIndexer.clear()}}},98069:(e,t,s)=>{"use strict";s.d(t,{SeriesSingleLinePaneView:()=>d});var i=s(569708),r=s(86441),o=s(650151),l=s(764829),n=s(836687),a=s(518439),c=s(509078),h=s(828473);class d{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,l.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new n.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const s=e.visibleBarsStrictRange();if(null===s)return;if(0===this._source.bars().size())return;const l=this._source.nearestIndex(s.firstBar()-1,a.PlotRowSearchMode.NearestLeft)??s.firstBar()-1,n=this._source.nearestIndex(s.lastBar()+1,a.PlotRowSearchMode.NearestRight)??s.lastBar()+1,d=this._source.barFunction(),_=this._model.timeScale().barSpacing();if(_<.1&&this._source.supportsPressedChunks()){const e=this._source.pressedChunks(_,(0,o.ensureNotNull)(this._source.priceSource())),t=(0,h.lowerbound)(e,l,((e,t)=>e.startTime<t)),s=Math.min(e.length-1,(0,h.lowerbound)(e,n,((e,t)=>e.endTime<t)));for(let i=t;i<=s;i++){const t=e[i];[t.open,t.high,t.low,t.close].forEach((e=>{this._items.push({timePointIndex:t.startTime,y:e,left:NaN,center:NaN,right:NaN})}))}}else for(const{index:e,value:t}of this._source.bars().rangeIterator(l,n)){const s=d(t);(0,i.default)(s)&&this._items.push({timePointIndex:e,y:s,left:NaN,center:NaN,right:NaN})}const u=this._source.firstValue();if(null!==u)if(t.pointsArrayToCoordinates(this._items,u),e.fillBarBorders(this._items),this._model.selection().isSelected(this._source)){const s=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:c.HitTarget.Regular};const i=(0,o.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=c.HitTarget.Regular;for(let o=0;o<s.length;o++){const l=s[o],n=this._source.bars().valueAt(l);if(null===n)continue;const a=d(n),c=e.indexToCoordinate(l),h=t.priceToCoordinate(a,u);this._selectionData.points.push({point:new r.Point(c,h)}),
this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(h/i))}}else this._selectionIndexer.clear();else this._items=[]}}},65905:(e,t,s)=>{"use strict";s.d(t,{SeriesValuesProvider:()=>I,calculateColor:()=>P,changesData:()=>x});var i=s(650151),r=s(150335),o=s(724377),l=s(444372),n=s(638456),a=s(432059),c=s(881025),h=s(518439),d=s(419283),_=s(627183),u=s(269734);function b(e,t){return 100*(t-e)/Math.abs(e||1)}var p=s(498830),m=s(627620),y=s(581899),g=s(546608);const f=g.lastDayChangeAvailable||g.alwaysShowLastPriceAndLastDayChange,v=n.CheckMobile.any(),C=(0,_.getPercentageFormatter)(),S=(0,_.getVolumeFormatter)(2),w=`${y.notAvailable} (${y.notAvailable}%)`;function P(e,t){const s=(0,o.parseRgb)(t),i=(0,o.parseRgb)(e);return(0,o.distanceRgb)(s,i)<70?(0,o.rgbToHexString)((0,o.invertRgb)(s)):t}function x(e,t,s,i,r){let o,l;if(null!==t){const e=r[4],s=t.change||0;l={change:s,currentPrice:e,prevPrice:e-s,percentChange:t.change_percent||0}}const n=s[4],a=e.search(i-1,h.PlotRowSearchMode.NearestLeft,1),c=a?.value[4]??null;return null!==c&&null!=n&&(o={change:n-c,currentPrice:n,prevPrice:c,percentChange:b(c,n)}),{barChange:o,lastDayChange:l}}class I{constructor(e,t){this._series=e,this._model=t,this._emptyValues=[{title:l.t(null,void 0,s(16610)),visible:!1,value:"",index:0,id:""},{title:l.t(null,void 0,s(778254)),visible:!1,value:"",index:1,id:""},{title:l.t(null,void 0,s(165318)),visible:!1,value:"",index:2,id:""},{title:l.t(null,void 0,s(862578)),visible:!1,value:"",index:3,id:""},{title:"",visible:!1,value:"",index:4,id:""},{title:"",visible:!1,value:"",index:5,id:""},{title:l.t(null,void 0,s(537276)),visible:!1,value:"",index:6,id:""},{title:l.t(null,{context:"study"},s(424261)),visible:!1,value:"",index:7,id:""},{title:l.t(null,void 0,s(463815)),visible:!1,value:"",index:8,id:""}]}getItems(){return this._emptyValues}getValues(e){const t=this._showLastPriceAndChangeOnly(),s=this._emptyValues.map(((e,s)=>({...e,value:6===s||8===s?w:y.notAvailable,visible:5!==s&&4!==s&&!t})));if(this._model.timeScale().isEmpty()||0===this._series.bars().size()||this._series.priceScale().isEmpty())return s;const o=(0,i.ensureNotNull)(this._series.data().bars().last());(0,r.isNumber)(e)||(e=o.index);const l=this._series.nearestIndex(e,h.PlotRowSearchMode.NearestLeft);if(void 0===l)return s;const n=this._series.data().valueAt(l),d=this._model.backgroundTopColor().value();if(null===n)return s;const _=n[1],u=n[2],b=n[3],m=n[4],{barChange:g,lastDayChange:v}=x(this._series.data(),this._series.quotes(),n,l,o.value),I=(0,p.getPriceValueFormatterForSource)(this._series);if((0,p.shouldBeFormattedAsPercent)(this._series)||(0,p.shouldBeFormattedAsIndexedTo100)(this._series))s[6].value="",s[8].value="";else{const e=this._series.formatter(),t={signPositive:!0};if(void 0!==g){const{currentPrice:i,prevPrice:r,change:o,percentChange:l}=g,n=e.formatChange?.(i,r,t)??e.format(o,t);s[6].value=(0,c.forceLTRStr)(`${n} (${C.format(l,t)})`)}if(void 0!==v){
const{currentPrice:i,prevPrice:r,change:o,percentChange:l}=v,n=e.formatChange?.(i,r,t)??e.format(o,t);s[8].value=(0,c.forceLTRStr)(`${n} (${C.format(l,t)})`)}}let B=null;if(t)s[5].value=null==m?y.notAvailable:I(m),s[5].visible=!0,B=this._getChangeColor(v?.change),s[6].visible=void 0!==g,s[8].visible=void 0!==v||f;else{s[0].value=null==_?y.notAvailable:I(_),s[1].value=null==u?y.notAvailable:I(u),s[2].value=null==b?y.notAvailable:I(b),s[3].value=null==m?y.notAvailable:I(m),s[4].value=I(this._series.barFunction()(n));const e=n[5];(0,r.isNumber)(e)?s[7].value=S.format(e):s[7].visible=!1;const t=this._series.intervalObj().is1Tick();s[0].visible=!t,s[1].visible=!t,s[2].visible=!t,s[8].visible=void 0!==v||f,s[6].visible=void 0!==g;const i=this._series.barColorer().barStyle(l,!1);B=P(d,i.barBorderColor??i.barColor)}B=(0,a.resetTransparency)(P(d,B));for(const e of s)e.color||(e.color=B);return s[8].visible&&(s[8].color=(0,a.resetTransparency)(P(d,this._getChangeColor(v?.change)))),s}_mobileNonTrackingMode(){return v&&(null===this._model.crossHairSource().pane||(0,m.isLineToolName)(d.tool.value())||null!==this._model.lineBeingEdited())}_showLastPriceAndChangeOnly(){return g.alwaysShowLastPriceAndLastDayChange||this._mobileNonTrackingMode()}_getChangeColor(e){const t=void 0===e||e>=0?u.SeriesBarColorer.upColor(this._series.properties()):u.SeriesBarColorer.downColor(this._series.properties());return t.barBorderColor??t.barColor}}},55582:(e,t,s)=>{"use strict";function i(e,t,s){let i=e[`${t}#${s}`]||null;return null===i&&(i=e[t]||null),null===i&&Object.keys(e).forEach((s=>{null===i&&s.startsWith(`${t}#`)&&(i=e[s]||null)})),i}s.d(t,{getObsoleteIdeaSymbolInfo:()=>i})},427047:(e,t,s)=>{"use strict";s.d(t,{NonSeriesStudy:()=>l,isNonSeriesStudy:()=>o});var i=s(650151),r=s(689052);function o(e){return e instanceof l}class l extends r.Study{clearData(){this._customData=null,this._indexes=null}restoreData(e,t,s){super.restoreData(e),this._customData=t,this._indexes=s}state(e){const t=super.state(e);return e&&(t.nonSeriesData=this._customData,t.indexes=this._indexes),t}customData(){return this._customData}_setPaneViews(e){this._paneViews=e,this.model().lightUpdate()}_onDataUpdated(e,t,s){null!==t&&(t.indexes_replace?((0,i.assert)("nochange"!==s),this._indexes=s):(this._customData=t.data,"nochange"!==s&&(this._indexes=s))),super._onDataUpdated(e,t,s)}}},622161:(e,t,s)=>{"use strict";s.r(t),s.d(t,{StudyCompare:()=>O});var i=s(650151),r=s(55582),o=s(546821),l=s(689052),n=s(975179),a=s(658843),c=s(882782),h=s(764829),d=s(675490),_=s(347808),u=s(613438),b=s(432059);const p=h.enabled("force_exchange_as_title");class m extends _.PriceAxisView{constructor(e,t){super(),this._studyCompare=e,this._data=t}_updateRendererData(e,t,s){e.visible=!1,t.visible=!1;const r=this._studyCompare.priceScale(),o=this._studyCompare.lastValueData(this._data.plotIndex,!1);if(o.noData||null===r||r.isEmpty())return;const l=this._studyCompare.model(),n=l.timeScale().visibleBarsStrictRange(),a=l.mainSeries().bars().lastIndex();if(null===n||null===a)return
;if(a<=n.lastBar())s.background=(0,b.resetTransparency)(o.color),s.textColor=this.generateTextColor(s.background),s.borderColor=void 0,e.borderVisible=!1,t.borderVisible=!1;else{const r=l.backgroundColorAtYPercentFromTop(o.coordinate/(0,i.ensureNotNull)(l.paneForSource(this._studyCompare)).height());s.background=r,s.textColor=(0,b.resetTransparency)(o.color),s.borderColor=s.textColor,e.borderVisible=!0,t.borderVisible=!0}s.coordinate=o.coordinate,s.floatCoordinate=o.floatCoordinate;const c=l.properties().childs().scalesProperties.childs();c.showSeriesLastValue.value()&&(e.text=(0,u.getCurrentModePriceText)(r,o),c.seriesLastValueMode.value()!==d.PriceAxisLastValueMode.LastPriceAndPercentageValue?e.secondLine="":e.secondLine=(0,u.getOppositeModePriceText)(r,o),e.visible=!0),t.text="",c.showSymbolLabels.value()&&(t.text=this._paneText(),t.visible=t.text.length>0)}_paneText(){let e="";const t=this._studyCompare.symbolInfo();return p?e=(0,n.displayedSymbolExchange)(t):this._studyCompare.model().properties().childs().scalesProperties.childs().showSymbolLabels.value()&&(e=(0,n.displayedSymbolName)(t)),e}}var y=s(444372),g=s(193938),f=s(911144),v=s(419283),C=s(638456),S=s(627620),w=s(124829),P=s(287741);const x=C.CheckMobile.any();class I extends f.StudyValuesProvider{constructor(e,t){super(e,t),this._emptyValues[0].title=e.guiPlotName(P.TitleDisplayTarget.StatusLine,"")}getValues(e){return(0,w.isNumber)(e)||(this._showLastPriceAndChangeOnly()?e=this._study.data().lastIndex():(e=this._model.crossHairSource().appliedIndex(),(0,w.isNumber)(e)||(e=this._study.data().lastIndex()))),super.getValues(e)}_hideValues(){return!1}_showLastPriceAndChangeOnly(){return x&&(null===this._model.crossHairSource().pane||(0,S.isLineToolName)(v.tool.value())||null!==this._model.lineBeingEdited())}}class B extends g.StudyDataWindowView{constructor(e,t){super(e,t),this._studyCompare=e}_hideValues(){return!1}_createValuesProvider(e,t){return new I(e,t)}}var L=s(35403);class R extends B{constructor(e,t){super(e,t),this._additional=null,this._showSeriesOHLC=t.properties().childs().paneProperties.childs().legendProperties.childs().showSeriesOHLC,this._showSeriesOHLC.subscribe(this,this.update)}areValuesVisible(){return this._showSeriesOHLC.value()}destroy(){this._showSeriesOHLC.unsubscribeAll(this)}additional(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional}_updateImpl(){{const e=(0,L.getDataVendorString)(this._studyCompare.symbolInfo());this._additional=e?y.t(null,void 0,s(957131))+" "+e:null}super._updateImpl()}}var T=s(323719),M=s(339709),D=s(181945);class k extends D.StudyStatusProvider{getSplitTitle(){return this._source.titleInParts(P.TitleDisplayTarget.StatusLine,!0,void 0,!1,!1)}text(){
return this._source.isActualInterval()?this._source.isFailed()?`${this._source.title(P.TitleDisplayTarget.StatusLine,!0,void 0,!1,!1)}: ${this.sourceStatusText()}`:`${this._source.title(P.TitleDisplayTarget.StatusLine,!0,void 0,!1,!1)} ${this.sourceStatusText()}`:this._source.title(P.TitleDisplayTarget.StatusLine,!0,void 0,!1,!1)}}var A=s(157504),V=s(61625),N=s(375397);const q=h.enabled("study_overlay_compare_legend_option"),F=h.enabled("force_exchange_as_title"),E=!h.enabled("hide_study_compare_legend_item"),W=h.enabled("hide_unresolved_symbols_in_legend");class O extends l.Study{constructor(e,t,s,i,r){super(e,function(e){return e.hasChild("currencyId")||e.addChild("currencyId",new a.Property(null)),e.hasChild("unitId")||e.addChild("unitId",new a.Property(null)),e.addExcludedKey("currencyId",1),e.addExcludedKey("unitId",1),e}(t),s,i,r),this._isActingAsSymbolSource=new N.WatchedValue(!0),this._realignToolsLastParams=null,this._lastResolvedSymbolSource="",this.properties().childs().minTick.subscribe(null,(()=>this._recreatePriceFormattingDependencies())),this.properties().childs().minTick.subscribe(null,(()=>this._model.fullUpdate())),this.properties().childs().currencyId.subscribe(this,this._onCurrencyChanged),this.properties().childs().unitId.subscribe(this,this._onUnitChanged),this._symbolResolvingActive=new N.WatchedValue(!1),this._symbolHibernated=new N.WatchedValue(!1),e.mainSeries().onIntervalChanged().subscribe(this,(()=>e.realignLineTools(this)))}destroy(){this._model.mainSeries().onIntervalChanged().unsubscribeAll(this),super.destroy()}properties(){return this._properties}isActingAsSymbolSource(){return this._isActingAsSymbolSource.readonly()}symbolParams(){return(0,A.symbolParams)(this)}compareSymbolParams(e){return(0,A.compareSymbolParams)(this,e,this._model.unitConversionEnabled())}async setSymbolParams(e){this._setSymbolCurrencyUnitInternal(e)}symbol(){return this.properties().childs().inputs.childs().symbol.value()}symbolChanged(){return this.properties().childs().inputs.childs().symbol}setSymbol(e){this.setSymbolParams({symbol:e})}symbolInfo(){if(!this._resolvedSymbols)return null;const e=this.symbol();if(!e)return null;let t;return t=this._model.isSnapshot()?this._resolvedSymbols.___snapshot||null:this._resolvedSymbols[this._getSymbolForResolve(e)]||null,this._model.isSnapshot()&&null===t&&(t=(0,r.getObsoleteIdeaSymbolInfo)(this._resolvedSymbols,e,this.currency()),null!==t&&(this._resolvedSymbols.___snapshot=t)),t}symbolResolved(){return this.symbolsResolved()}symbolResolvingActive(){return this._symbolResolvingActive}symbolHibernated(){return this._symbolHibernated}isVisible(){const e=super.isVisible();return this._symbolHibernated.setValue(!e),e}symbolSameAsCurrent(e){return(0,A.symbolSameAsCurrent)(e,this.symbolInfo())}symbolSameAsResolved(e){return(0,V.symbolSameAsResolved)(e,this._lastResolvedSymbolSource,this.symbol())}currency(){return this.properties().childs().currencyId.value()||null}setCurrency(e){this.setSymbolParams({currency:e})}isConvertedToOtherCurrency(){return(0,
n.isConvertedToOtherCurrency)(this.symbolInfo())}unit(){return this.properties().childs().unitId.value()||null}setUnit(e){this.setSymbolParams({unit:e})}isConvertedToOtherUnit(){return(0,n.isConvertedToOtherUnit)(this.symbolInfo(),this._model.unitConversionEnabled())}style(){return 2}setStyle(e){}interval(){return this._model.mainSeries().interval()}setInterval(e){}symbolSource(){return this}valueAt(e,t){return this.data().search(e)?.value[1]??null}state(e,t){const s=super.state(e,t);this._model.unitConversionEnabled()||delete s.state.unitId;const r=this.symbol();return s.state.inputs.symbol=(0,n.symbolToSaveInState)(this.symbolInfo()??this._model.chartApi().lastSymbolResolveInfo(r),r),e&&((0,i.ensureDefined)(s.data).symbols={___snapshot:this.symbolInfo()||void 0}),s}symbolTitle(e,t,s){return this.title(e,!0,{},!1,t)}titleInParts(e,t,s,i,r){const o=this._titleInParts(e,t,s,i,r);return[[o[0],...o[1]??[]].join(", ")]}tags(){const e=this.symbol();return e?[e]:[]}statusView(){return E?super.statusView():null}guiPlotName(e,t){return this.properties().childs().inputs.childs().symbol.value()}canOverrideMinTick(){return!0}canBeHiddenByGlobalFlag(){return!1}legendValuesProvider(){return new I(this,this.model())}statusProvider(e){return new k(this)}measureUnitId(){return(0,n.measureUnitId)(this.symbolInfo())}getSymbolString(e){return void 0===e&&(e=this._getSymbolForApi(this.symbol())),(0,c.encodeExtendedSymbolOrGetSimpleSymbolString)(this._getSymbolObject(e))}_createPriceAxisView(e){return new m(this,{plotIndex:"compare"})}_createViews(){this._legendView||(this._legendView=new R(this,this._model)),this._dataWindowView||(this._dataWindowView=new B(this,this._model)),this._statusView||(this._statusView=new T.StudyStatusView(this)),super._createViews()}_onUnitChanged(){"alwaysOff"!==(0,o.currencyUnitVisibilityProperty)().value()&&this._model.fullUpdate(),this._model.unitConversionEnabled()&&this.isStarted()&&this._tryChangeInputs(),this._unitChanged.fire()}_getSymbolObject(e){const t=super._getSymbolObject(e),s=this.currency();null!==s&&(t["currency-id"]=s);const i=this.unit();return this._model.unitConversionEnabled()&&null!==i&&(t["unit-id"]=i),t}_onSymbolResolvingStart(e,t){this._lastResolvedSymbolSource=t,super._onSymbolResolvingStart(e,t),this._symbolResolvingActive.setValue(!0)}_onSymbolError(){super._onSymbolError(),this._symbolResolvingActive.setValue(!1)}_onSymbolResolved(e,t,s){super._onSymbolResolved(e,t,s),this._recreatePriceFormattingDependencies();const i=t===this.symbol()?(0,n.extractSymbolNameFromSymbolInfo)(s,this.symbol()):null,r=(0,n.symbolCurrency)(s),o=(0,n.symbolUnit)(s,this._model.unitConversionEnabled());this._setSymbolCurrencyUnitInternal({symbol:i??void 0,currency:r,unit:o},s),this._symbolResolvingActive.setValue(!1)}async _changeInputsImpl(e,t){await super._changeInputsImpl(e,t),this._realignLineToolsIfParamsChanged()}_createStudyOnServer(){const e=super._createStudyOnServer();return this._realignLineToolsIfParamsChanged(),e}_tryCreateFormatter(){
M.customFormatters?.priceFormatterFactory?.(this.symbolInfo(),this.properties().childs().minTick.value());return(0,n.createSeriesFormatter)(this.symbolInfo(),this.properties().childs().minTick.value())}_tryCreateDefaultFormatter(){return(0,n.createSeriesFormatter)(this.symbolInfo(),"default")}_titleInParts(e,t,s,i,r){const o=this.symbolInfo();return[this._getSymbolTitlePart(o),[this._getExchangeTitlePart(o,r),this._getPriceSourceTitlePart(o)].filter((e=>null!==e))]}_skipHistogramBaseOnAutoScale(){return!0}_getSymbolTitlePart(e){if(null===e)return W?"":this.properties().childs().inputs.childs().symbol.value();const t=(0,n.getSymbolExchange)(e);if(F&&void 0!==t)return t;if(q)switch(this._model.mainSeries().symbolTextSourceProxyProperty().value()){case"description":return e.description;case"ticker-and-description":return`${e.name}, ${e.description}`;case"long-description":return e.long_description??e.description}return e.name}_getExchangeTitlePart(e,t){return null===e||t?null:(0,n.getSymbolExchange)(e)}_getPriceSourceTitlePart(e){return null}_setSymbolCurrencyUnitInternal(e,t){const{symbol:s,currency:i,unit:r}=e,o=this.properties().childs(),l=o.inputs.childs().symbol.value(),a=o.currencyId.value(),c=o.unitId.value();if(void 0!==s&&o.inputs.childs().symbol.setValueSilently(s),void 0!==i&&o.currencyId.setValueSilently(i),void 0!==r&&o.unitId.setValueSilently(r),t)this._resolvedSymbolsByInput[this.symbol()]=t,this._resolvedSymbols[this._getSymbolForResolve(this.symbol())]=t,this._realignToolsLastParams=null;else{const e=this.symbolInfo();null!==e&&(o.currencyId.setValueSilently((0,n.symbolCurrency)(e)),o.unitId.setValueSilently((0,n.symbolUnit)(e,this._model.unitConversionEnabled())))}o.inputs.childs().symbol.value()!==l&&o.inputs.childs().symbol.fireChanged(),o.currencyId.value()!==a&&o.currencyId.fireChanged(),o.unitId.value()!==c&&o.unitId.fireChanged(),this._realignLineToolsIfParamsChanged()}_realignLineToolsIfParamsChanged(){let e=null===this._realignToolsLastParams;if(null!==this._realignToolsLastParams){const t=this.compareSymbolParams(this._realignToolsLastParams);e=t.symbolChanged||t.intervalChanged||t.currencyChanged||t.unitChanged}e&&(this._model.realignLineTools(this),this._realignToolsLastParams=this.symbolParams())}}},315507:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},85290:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'}}]);